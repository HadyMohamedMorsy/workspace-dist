import{a as he,b as Ce,c as ge}from"./chunk-3SEL3OTR.js";import"./chunk-4TAAWFWS.js";import"./chunk-7AFSXZCD.js";import{a as ke}from"./chunk-7PWCODBA.js";import{$ as re,E as te,Ea as ye,Sa as fe,W as ne,X as oe,_ as ae,ca as le,da as S,ia as pe,na as se,ob as P,ra as de,ua as ce,v as Z,va as ue,z as ee}from"./chunk-AA67JPLF.js";import{A as v,B as me,C as D,e as ie}from"./chunk-LBHIXMIT.js";import"./chunk-R2AUDRXA.js";import"./chunk-JXG4LUU7.js";import{q as J}from"./chunk-AHOHCUBB.js";import{Bb as d,Cc as M,Gb as j,Kb as p,Lb as s,Mb as L,Nb as $,Ob as Y,Qb as b,T as K,Tb as m,Ub as c,W as O,Xb as E,ac as Q,bc as X,db as u,dc as z,ea as _,fc as H,ia as k,ic as R,jc as I,kc as N,mc as T,ob as W,qb as B,r as A,ua as r,va as l,wb as V,xc as y,ya as x,yc as f}from"./chunk-PLVIENQC.js";import{a as h,b as C,e as q,i as we}from"./chunk-5KTCK5IS.js";var _e=we(ke());var w=class{id;name;phone;city;address;whatsApp;website;facebook;instagram;company_type;linkedin;holders;constructor(t){this.id=t?.id||null,this.name=t?.name||null,this.phone=t?.phone||null,this.city=t?.city||null,this.address=t?.address||null,this.whatsApp=t?.whatsApp||null,this.company_type=t?.company_type||"General",this.website=t?.website||null,this.facebook=t?.facebook||null,this.instagram=t?.instagram||null,this.linkedin=t?.linkedin||null,this.holders=t?.holders||[null]}};var F=class a extends ue{#e=_(se);#t=_(P).getGlobalList(["type_company","city"]);ngOnInit(){this.dialogMeta=C(h({},this.dialogMeta),{dialogData$:this.#t,endpoints:{store:"company/store",update:"company/update"}}),this.editData?(this.dialogMeta=C(h({},this.dialogMeta),{dialogTitle:this.translate.instant("Update Company"),submitButtonLabel:this.translate.instant("Update Company")}),this.model=new w(this.editData)):(this.dialogMeta=C(h({},this.dialogMeta),{dialogTitle:this.translate.instant("Create Company"),submitButtonLabel:this.translate.instant("Create Company")}),this.model=new w),this.fields=this.configureFields()}configureFields(){return[{fieldGroup:[{type:"separator-field",props:{title:this.translate.instant("Information Company"),icon:"fa-solid fa-info"}},this.#e.fieldBuilder([{key:"name",type:"floated-input-field",props:{label:"name",required:!0}},{key:"company_type",type:"select-field",props:{isFloatedLabel:!0,required:!0,label:"Select Company Type",placeholder:"Select Company Type",options:this.#t.pipe(A(({type_company:t})=>t.slice(1)))}}]),this.#e.fieldBuilder([{key:"whatsApp",type:"input-group-field",props:{type:"number",placeholder:"whatsApp",icon:"pi pi-whatsapp"}},{key:"phone",type:"input-group-field",props:{type:"number",placeholder:"Number",icon:"pi pi-phone"}},{key:"city",type:"select-field",props:{filter:!0,isFloatedLabel:!0,required:!0,label:"Select City",placeholder:"Select City",options:this.#t.pipe(A(({city:t})=>t.slice(1)))}}]),this.#e.fieldBuilder([{key:"address",type:"textarea-field",props:{label:"Address",placeholder:"Address"}}])]},{template:'<div class="border-1 border-200 -mt-3"></div>',className:"col-12"},{fieldGroup:[{type:"separator-field",props:{title:this.translate.instant("Social Media Company"),icon:"fa-solid fa-globe"}},this.#e.fieldBuilder([{key:"facebook",type:"input-group-field",props:{placeholder:"facebook",icon:"fa-brands fa-facebook"}},{key:"website",type:"input-group-field",props:{placeholder:"website",icon:"pi pi-globe"}}]),this.#e.fieldBuilder([{key:"instagram",type:"input-group-field",props:{placeholder:"instagram",icon:"pi pi-instagram"}},{key:"linkedin",type:"input-group-field",props:{placeholder:"linkedin",icon:"pi pi-linkedin"}}])]},{template:'<div class="border-1 border-200 -mt-3"></div>',className:"col-12"},{fieldGroup:[{type:"separator-field",props:{title:this.translate.instant("Holders Company"),icon:"fa-solid fa-users"}},this.#e.fieldBuilder([{key:"holders",type:"repeat-field",props:{addBtnText:"Add Holders",disabledRepeater:!1},hooks:{onInit:t=>t.formControl?.valueChanges.pipe(K(t.model),O(i=>{if(t.props)return i.length===4?t.props.disabledRepeater=!0:t.props.disabledRepeater=!1}))},fieldArray:this.#e.fieldBuilder([{key:"name",type:"floated-input-field",props:{label:"name holder",required:!0}},{key:"number",type:"input-group-field",props:{type:"number",placeholder:"number",icon:"pi pi-phone",required:!0}},{key:"whatsApp",type:"input-group-field",props:{type:"number",placeholder:"whatsApp",icon:"pi pi-whatsapp",required:!0}}])}])]}]}static \u0275fac=(()=>{let t;return function(e){return(t||(t=x(a)))(e||a)}})();static \u0275cmp=k({type:a,selectors:[["app-company-dialog"]],standalone:!0,features:[B,T],decls:7,vars:11,consts:[[3,"onSubmit","form","model","fields","options","showSubmitButton","buttonLabel","isFiledsLoaded","submitBtnLoading"],["ngProjectAs","[header]",5,["","header",""]],[1,"flex","align-items-center","justify-content-between","w-full","p-3","border-bottom-1","border-300","bg-white"],[1,"font-semibold","capitalize","text-lg","line-height-2","my-0"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"flex-shrink-0","p-button-text","p-button-plain","p-button-rounded","w-2rem","h-2rem",3,"click"]],template:function(i,e){i&1&&(p(0,"app-form",0),y(1,"async"),m("onSubmit",function(){return e.createUpdateRecord(e.dialogMeta.endpoints)}),$(2,1),p(3,"div",2)(4,"h2",3),z(5),s(),p(6,"button",4),m("click",function(){return e.closeDialog()}),s()(),Y(),s()),i&2&&(d("form",e.createUpdateForm)("model",e.model)("fields",e.fields)("options",e.options)("showSubmitButton",e.dialogMeta.showSubmitButton)("buttonLabel",e.dialogMeta.submitButtonLabel)("isFiledsLoaded",f(1,9,e.dialogMeta.dialogData$))("submitBtnLoading",e.isLoading()),u(5),H(" ",e.dialogMeta.dialogTitle," "))},dependencies:[J,S,D,v,ce],encapsulation:2,changeDetection:0})};var Me=["viewClient"];function Se(a,t){if(a&1){let i=b();p(0,"div",9)(1,"p-dropdown",10),y(2,"translate"),N("ngModelChange",function(n){r(i);let o=c();return I(o.selectedType,n)||(o.selectedType=n),l(n)}),m("onChange",function(n){r(i);let o=c();return l(o.filter(n,"company_type"))}),s()(),p(3,"div",11)(4,"p-dropdown",10),y(5,"translate"),N("ngModelChange",function(n){r(i);let o=c();return I(o.selectedCity,n)||(o.selectedCity=n),l(n)}),m("onChange",function(n){r(i);let o=c();return l(o.filter(n,"city"))}),s()()}if(a&2){let i=c();u(),E("placeholder",f(2,8,"Select a Company Type")),d("options",i.listData().type_company),R("ngModel",i.selectedType),d("filter",!0),u(3),E("placeholder",f(5,10,"Select City")),d("options",i.listData().city),R("ngModel",i.selectedCity),d("filter",!0)}}function ve(a,t){if(a&1){let i=b();p(0,"p-button",12),m("onClick",function(){let n=r(i).$implicit,o=c();return l(o.viewDialog(n))}),s()}if(a&2){let i=t.$implicit;d("label",i.name)("link",!0)}}function De(a,t){if(a&1){let i=b();p(0,"button",15),m("click",function(){r(i);let n=c().$implicit,o=c();return l(o.showMessage(n.orders[0].order_price))}),s()}}function Pe(a,t){if(a&1&&(L(0,"app-menu-collapse-actions",13),V(1,De,1,0,"button",14)),a&2){let i=t.$implicit,e=c();d("recordId",i.id)("permissionShared",e.hasPermisstion(e.resource.Shared,"create"))("permissionDeskArea",e.hasPermisstion(e.resource.Deskarea,"create"))("permissionMemebership",e.hasPermisstion(e.resource.AssignesMembership,"create"))("permissionDeal",e.hasPermisstion(e.resource.Deals,"create"))("permissionPackage",e.hasPermisstion(e.resource.AssignesPackage,"create"))("dialogConfig",e.dialogConfig)("clearCachingLists",e.clearCachingLists()),u(),j(i.orders!=null&&i.orders.length?1:-1)}}var G=class a extends ye{viewClient=W.required("viewClient");listData$=_(P).getGlobalList(["type_company","city"]);listData=de(this.listData$,{initialValue:{}});confirmationService=_(ie);selectedType="company";selectedCity="";exportColumns;resource=pe;showMessage(t){this.confirmationService.confirm({message:`There Is Order From Kitchen You Must Pay It , Total Price is : ${t} EG`,header:this.translate.instant("message"),icon:"pi pi-envelope",acceptVisible:!1,rejectVisible:!1,rejectButtonStyleClass:"p-button-text"})}ngOnInit(){this.isShareRecord.set(!0),this.clearCachingLists.set(["assignes-membership/company","assign-general-offer/company","assignes-package/company","deals/company","shared/company","deskarea/company","reservation-room/company","order/company"]),this.dialogComponent=F,this.viewDialogComponent=Ce,this.indexMeta=C(h({},this.indexMeta),{provideFields:["website","facebook","instagram","linkedin","holders","address"],resourse:"customers-company",endpoints:{index:"company/index",delete:"company/delete"},indexTitle:"Companies",indexIcon:"fa-solid fa-building",createBtnLabel:"Create Company",indexTableKey:"COMPANY_KEY",columns:[{title:this.#e("name"),name:"name",searchable:!0,orderable:!1,render:this.viewClient()},{title:this.#e("phone"),name:"phone",searchable:!0,orderable:!1},{title:this.#e("whatsApp"),name:"whatsApp",searchable:!0,orderable:!1},{title:this.#e("company type"),name:"company_type",searchable:!1,orderable:!1},{title:this.#e("city"),name:"city",searchable:!1,orderable:!1},{title:this.#e("created by"),name:"createdBy",searchable:!1,orderable:!1},{title:this.#e("created at"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}}]}),this.initializePermissions(),this.exportColumns=this.indexMeta.columns.map(t=>({title:t.title,dataKey:t.name}))}exportPdf(){import("./chunk-H3P4WYJK.js").then(t=>{import("./chunk-M4ATFCOO.js").then(i=>{let e=new t.default("p","px","a4");e.autoTable(this.exportColumns,this.records()),e.save("records.pdf")})})}exportExcel(){import("./chunk-4VY6OIZS.js").then(t=>{let i=this.records().map(Ie=>{var U=Ie,{website:g,instagram:Fe,linkedin:Ae,facebook:Ve,holders:Le,company_type:Ee,address:Re}=U,be=q(U,["website","instagram","linkedin","facebook","holders","company_type","address"]);return be}),n={Sheets:{data:t.utils.json_to_sheet(i)},SheetNames:["data"]},o=t.write(n,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(o,"records")})}saveAsExcelFile(t,i){let e="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",n=".xlsx",o=new Blob([t],{type:e});_e.default.saveAs(o,i+"_export_"+new Date().getTime()+n)}filter(t,i){this.filtersData.update(e=>C(h({},e),{customFilters:t.value?{[i]:t.value}:null}))}#e(t){return this.translate.instant(t)}viewDialog(t){super.viewDialog(t,{endpoint:"company",keyState:"COMPANY",key:"company_id"})}hasPermisstion(t,i){return this.userPermission.hasPermission(t,i)}static \u0275fac=(()=>{let t;return function(e){return(t||(t=x(a)))(e||a)}})();static \u0275cmp=k({type:a,selectors:[["app-company"]],viewQuery:function(i,e){i&1&&Q(e.viewClient,Me,5),i&2&&X()},standalone:!0,features:[B,T],decls:16,vars:34,consts:[["additionalContentTemplate",""],["viewClient",""],["extendDefaultActionsTemplate",""],[1,"flex","gap-2","mb-4"],["type","button","pButton","","icon","pi pi-file-excel text-xs","tooltipPosition","top",1,"text-xs","py-1","px-3",3,"click","label","pTooltip"],["type","button","pButton","","icon","pi pi-file-pdf text-xs","tooltipPosition","top",1,"text-xs","bg-pink","border-pink","py-1","px-3",3,"click","label","pTooltip"],["paginatorPosition","both","placeholderSearch","Search Name Or Phone",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexPermission","updateBtnPermission","createBtnPermission","deleteBtnPermission","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows","withAdditionalContent"],["moreActions",""],["type","company"],[1,"flex-order-2"],["styleClass","py-1 pl-2 shadow-none w-14rem",3,"ngModelChange","onChange","options","ngModel","filter","placeholder"],[1,"flex-order-1"],[3,"onClick","label","link"],["typeUser","company",3,"recordId","permissionShared","permissionDeskArea","permissionMemebership","permissionDeal","permissionPackage","dialogConfig","clearCachingLists"],["pButton","","pRipple","","icon","pi pi-exclamation-circle text-xs","tooltipPosition","top","pTooltip","Note order from kitchen",1,"p-button-rounded","p-button-text","p-button-sm"],["pButton","","pRipple","","icon","pi pi-exclamation-circle text-xs","tooltipPosition","top","pTooltip","Note order from kitchen",1,"p-button-rounded","p-button-text","p-button-sm",3,"click"]],template:function(i,e){if(i&1){let n=b();p(0,"div",3)(1,"button",4),y(2,"translate"),y(3,"translate"),m("click",function(){return r(n),l(e.exportExcel())}),s(),p(4,"button",5),y(5,"translate"),y(6,"translate"),m("click",function(){return r(n),l(e.exportPdf())}),s()(),p(7,"app-table-wrapper",6),m("createBtnClicked",function(){return r(n),l(e.openCreateRecordDialog())})("updateBtnClicked",function(g){return r(n),l(e.openUpdateRecordDialog(g))})("deleteBtnClicked",function(g){return r(n),l(e.deleteRecord(g))})("onLoadData",function(g){return r(n),l(e.loadRecords(g))}),p(8,"div",7),L(9,"app-links-client",8),s(),V(10,Se,6,12,"ng-template",null,0,M)(12,ve,1,2,"ng-template",null,1,M)(14,Pe,2,9,"ng-template",null,2,M),s()}if(i&2){let n,o;u(),d("label",f(2,26,"Excel"))("pTooltip",f(3,28,"export_as_excel")),u(3),d("label",f(5,30,"PDF"))("pTooltip",f(6,32,"export_as_pdf")),u(3),d("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("displayCreateButton",e.indexMeta.displayCreateButton)("columns",e.indexMeta.columns)("dataSource",e.sharedRecords())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("rows",e.rows())("indexPermission",e.permissions().index)("updateBtnPermission",e.permissions().update)("createBtnPermission",e.permissions().create)("deleteBtnPermission",e.permissions().delete)("withActionsColumn",e.indexMeta.withAction)("displayUpdateButton",e.indexMeta.displayUpdateButton)("displayDeleteButton",e.indexMeta.displayDeleteButton)("globalFilterValue",e.globalFilterValue)("reorderableColumns",(n=e.indexMeta.reorderableColumns)!==null&&n!==void 0?n:!1)("reorderableRows",(o=e.indexMeta.reorderableRows)!==null&&o!==void 0?o:!1)("withAdditionalContent",!0)}},dependencies:[fe,D,v,me,re,ae,te,Z,ee,oe,ne,ge,he,S,le],encapsulation:2,changeDetection:0})};export{G as default};
