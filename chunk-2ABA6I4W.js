import{a as Ge}from"./chunk-X3LLGXGY.js";import{F as Pe,Fa as Ne,I as ve,Ia as Re,J as Ie,Ja as Qe,Ka as Ae,Na as ze,O as Se,Wa as je,Y as Me,Ya as Ue,Z as Be,aa as Ee,c as be,d as xe,ea as ke,l as we,m as A,q as z,ra as Oe,sa as Le,ta as Fe,ua as We,v as E,ya as qe,za as H}from"./chunk-B2YRLTHG.js";import{A as U,C as G,E as Ve,z as Te}from"./chunk-VGJJ4SUB.js";import"./chunk-NU2CE2PW.js";import{c as j,d as D,e as De,g as $}from"./chunk-DBWXYH2V.js";import"./chunk-R2AUDRXA.js";import"./chunk-JXG4LUU7.js";import{s as Ce,u as Q}from"./chunk-Y2JJNTGM.js";import{$a as le,Ba as se,Bb as C,Bc as W,Cc as he,Db as ue,Ha as pe,Hb as V,Ia as k,Ib as O,Jb as L,Kb as n,Lb as o,M as oe,Mb as v,Qb as M,Tb as y,Ub as _,Uc as q,W as ae,Xb as Z,ac as ge,bc as ye,db as l,dc as d,ea as P,ec as F,fc as g,gc as fe,ia as T,ic as b,jc as x,kc as w,mc as B,nb as h,nc as _e,ob as de,pb as N,r as X,ua as m,va as u,wb as Y,xc as c,yb as ce,yc as f,z as ne,zb as me,zc as R}from"./chunk-I6HS2BDL.js";import{a as I,b as S,e as re}from"./chunk-5KTCK5IS.js";var J=class p{product=k({});orderItems=k([]);quantity=N(0);updateQty=pe();existingItem;ngOnInit(){this.existingItem=this.orderItems().find(t=>t.product.id===this.product().id),this.quantity.set(this.existingItem?.quantity??1)}updateOrder(t){this.quantity.set(t>this.product().store?this.product().store:t),this.updateQty.emit(this.quantity())}static \u0275fac=function(i){return new(i||p)};static \u0275cmp=T({type:p,selectors:[["app-product-qty"]],inputs:{product:[1,"product"],orderItems:[1,"orderItems"],quantity:[1,"quantity"]},outputs:{quantity:"quantityChange",updateQty:"updateQty"},standalone:!0,features:[B],decls:1,vars:6,consts:[["buttonLayout","horizontal","spinnerMode","horizontal","incrementButtonIcon","pi pi-plus","decrementButtonIcon","pi pi-minus",3,"ngModelChange","ngModel","allowEmpty","min","max","showButtons","decrementButtonClass"]],template:function(i,e){i&1&&(n(0,"p-inputNumber",0),w("ngModelChange",function(s){return x(e.quantity,s)||(e.quantity=s),s}),y("ngModelChange",function(s){return e.updateOrder(s)}),o()),i&2&&(b("ngModel",e.quantity),C("allowEmpty",!1)("min",1)("max",e.product().store)("showButtons",!0)("decrementButtonClass",e.quantity()===1?"disabled":""))},dependencies:[H,qe,E,A,z,D],encapsulation:2,changeDetection:0})};function Ze(p,t){if(p&1){let i=M();n(0,"div",0)(1,"div",2)(2,"div",3)(3,"div",4),v(4,"img",5),n(5,"div",6)(6,"h3",7),d(7),o(),n(8,"span",8),d(9),o(),n(10,"div",4)(11,"span",9),d(12),c(13,"currency"),o(),n(14,"app-product-qty",10),y("updateQty",function(r){let s=m(i).$implicit,a=_();return u(a.updateQty(r,s))}),o()()()(),n(15,"button",11),y("click",function(){let r=m(i).$implicit,s=_();return u(s.deleteItem(r))}),o()()()()}if(p&2){let i=t.$implicit,e=_();l(4),C("src",e.domain+i.featured_image,le),l(3),F(i.name),l(2),g(" ",i.store," / max pcs"),l(3),g(" ",W(13,7,e.getOrderItemTotalPrice(i)," Eg ","symbol","0.0-0")," "),l(2),C("product",i)("quantity",i.take_store)("orderItems",e.selectedProducts())}}function $e(p,t){p&1&&(n(0,"div",1),v(1,"img",12),n(2,"h2",13),d(3),c(4,"translate"),o(),n(5,"p",14),d(6),c(7,"translate"),o()()),p&2&&(l(3),g(" ",f(4,2,"CART Is Empty")," "),l(3),g(" ",f(7,4,"Add Products On Cart Items")," "))}var K=class p{selectedProducts=N([]);domain=Te.DOMAIN_SERVER;products=q(()=>this.selectedProducts().map(t=>S(I({},t.product),{take_store:t.quantity})));updateQty(t,i){this.selectedProducts.update(e=>e.map(r=>r.product.id===i.id?S(I({},r),{quantity:t}):r))}deleteItem(t){this.selectedProducts.update(i=>i.filter(e=>e.product.id!==t.id))}getOrderItemTotalPrice(t){return t.selling_price*t.stock}static \u0275fac=function(i){return new(i||p)};static \u0275cmp=T({type:p,selectors:[["app-list-items"]],inputs:{selectedProducts:[1,"selectedProducts"]},outputs:{selectedProducts:"selectedProductsChange"},standalone:!0,features:[B],decls:3,vars:1,consts:[[1,"border-wrapper"],[1,"text-center","p-3"],[1,"flex-auto","flex","justify-content-between","align-items-center"],[1,"flex","justify-content-between","align-items-center","w-full"],[1,"flex","align-items-center","gap-4"],["alt","",1,"object-contain","w-3rem","h-3rem",3,"src"],[1,"flex","flex-column"],[1,"truncate","text-sm","mb-1","capitalize"],[1,"text-gray-400","text-sm"],[1,"text-sm","text-gray-400"],[3,"updateQty","product","quantity","orderItems"],["pButton","","icon","pi pi-trash","severity","danger",1,"p-button-icon-only","p-button-danger","p-button-rounded","p-button-outlined","text-sm","w-2rem","h-2rem",3,"click"],["src","assets/media/empty-bag.png","width","100"],[1,"my-2","font-semibold","text-base"],[1,"text-sm"]],template:function(i,e){i&1&&O(0,Ze,16,12,"div",0,V,!1,$e,8,6,"div",1),i&2&&L(e.products())},dependencies:[E,J,G,U,Q,D,j,H,Pe],styles:[".border-wrapper[_ngcontent-%COMP%]{border:1px solid #f7f8fa;background-color:#fefefe;border-radius:16px;margin-bottom:20px;padding:10px}"],changeDetection:0})};var et=["buttonWrapper"],tt=()=>[import("./chunk-YPDRQZD2.js").then(p=>p.DataViewComponent),import("./chunk-SLYR5PTY.js").then(p=>p.ProductComponent)],it=()=>[];function rt(p,t){if(p&1){let i=M();n(0,"button",51),y("click",function(){let r=m(i),s=r.$implicit,a=r.$index,te=_();return u(te.getProducts(s,a))}),o()}if(p&2){let i=t.$implicit,e=t.$index,r=_();ue("bg-primary",r.activeIndex()===e)("p-button-outlined",r.activeIndex()!==e),C("label",i.name)}}function nt(p,t){p&1&&v(0,"p-skeleton",52)}function ot(p,t){p&1&&(O(0,nt,1,0,"p-skeleton",52,V),c(2,"range")),p&2&&L(R(2,0,_e(3,it),6))}function at(p,t){if(p&1){let i=M();n(0,"app-product",54),y("productsListSelected",function(r){m(i);let s=_(2);return u(s.updatedSelectedProducts(r))}),w("selectedProductsChange",function(r){m(i);let s=_(2);return x(s.selectedProducts,r)||(s.selectedProducts=r),u(r)}),o()}if(p&2){let i=t.$implicit,e=_(2);C("product",i),b("selectedProducts",e.selectedProducts)}}function st(p,t){if(p&1&&(n(0,"app-data-view",53),Y(1,at,1,2,"ng-template",null,1,he),o()),p&2){let i=_();C("filtersData",i.filterData())}}var ee=class p{buttonWrapper=de.required("buttonWrapper");#t=P(Be);#e=P(Ge);#i=P(Me);breakpoint=P(ke);destroyRef=P(se);cacheFilters=P(Ue);currentUser=P(Ee).currentUser;clearCachingLists=h([]);router=P(be);userData=k("");categoriesList=h([]);activeIndex=h(0);orderType=h("PAID");searchValue=h("");orderNumber=h(null);isLoading=h(!1);filterData=h({length:10,start:0,category_id:0});selectedProducts=h([]);currentDate$=ne(0,1e3).pipe(X(()=>new Date));currentDate=$(this.currentDate$,{initialValue:new Date});updatedSelectedProducts(t){this.selectedProducts.update(i=>(t.forEach(e=>{let r=i.find(s=>s.product.id===e.product.id);r?r.quantity=e.quantity:i.push(e)}),[...i]))}ngOnInit(){if(this.userData()){let t=JSON.parse(this.userData());this.#e.setCustomerType.set(t.type),this.#e.setCustomerId.set(t.id)}this.orderNumber.set(`#${Date.now()}`),this.clearCachingLists.set(["purchases/index","returns/index","category/show","category/list-categories","order/index","product/index","individual/index","company/index","studentActivity/index","user/index"])}subTotal=q(()=>this.selectedProducts().reduce((t,i)=>t+this.getOrderItemTotalPrice(i,"PAID"),0));totalOrder=q(()=>this.selectedProducts().reduce((t,i)=>t+this.getOrderItemTotalPrice(i,this.orderType()),0));invalidBtn(){return!!this.subTotal()}searchProducts(){this.filterData.update(t=>S(I({},t),{category_id:this.categoriesList()[0]?.id,search:this.searchValue()}))}getOrderItemTotalPrice(t,i){let e=0,r="";switch(i){case"PAID":case"HOLD":e=t.quantity,r="selling_price";break;case"COST":e=t.quantity,r="purshase_price";break;case"FREE":e=0,r="selling_price";break;default:e=t.quantity,r="selling_price";break}return t.product[r]*e}categories$=this.#t.getListData("category/list-categories","GET",void 0,"category/list-categories").pipe(X(({data:t})=>t),ae(t=>{this.cacheFilters.cacheFilters.has("category/list-categories")||this.cacheFilters.cacheFilters.set("category/list-categories",new Set),this.cacheFilters.cacheFilters.get("category/list-categories")?.add("category/list-categories"),this.categoriesList.set(t),this.filterData.update(i=>S(I({},i),{category_id:t[0].id}))}));categories=$(this.categories$,{initialValue:[]});search(){this.searchValue()===""&&this.filterData.update(t=>S(I({},t),{category_id:this.categoriesList()[0]?.id,search:this.searchValue()}))}getProducts(t,i){this.activeIndex.set(i),this.filterData.update(e=>S(I({},e),{category_id:t.id}))}scrollLeft(){this.buttonWrapper().nativeElement.scrollBy({left:-150,behavior:"smooth"})}scrollRight(){this.buttonWrapper().nativeElement.scrollBy({left:150,behavior:"smooth"})}submit(){let t=this.#e.customerType(),i=this.#e.customerId(),e={type_order:this.orderType(),type_user:t,order_number:this.orderNumber(),customer_id:i,order_items:this.selectedProducts().map(r=>{let{quantity:s,product:a}=r,ie=a,{take_store:te}=ie;return{product:re(ie,["take_store"]),quantity:s}})};this.isLoading.set(!0),this.#i.request("post","order/store",e).pipe(oe(()=>this.isLoading.set(!1)),De(this.destroyRef)).subscribe(()=>{this.cacheFilters.deleteAnotherCacheEndPoint(this.clearCachingLists()),this.router.navigateByUrl("/kitchen")})}static \u0275fac=function(i){return new(i||p)};static \u0275cmp=T({type:p,selectors:[["app-pos"]],viewQuery:function(i,e){i&1&&ge(e.buttonWrapper,et,5),i&2&&ye()},inputs:{userData:[1,"userData"]},standalone:!0,features:[B],decls:96,vars:64,consts:[["buttonWrapper",""],["viewBodyTemplate",""],[1,"layout-header","px-4","py-2"],[1,"flex","align-items-center","align-items-center","gap-3","justify-content-between"],[1,"logo-dashboard"],["routerLink","/dashboard"],["loading","lazy","src","assets/media/logo/creatvo-2.jpg","alt","Creativo","title","Creativo",1,"w-3rem","cursor-pointer"],[1,"flex","gap-3","align-items-center"],[1,"user","flex","gap-3","align-items-center"],["loading","lazy","src","assets/media/avatar.svg","alt","Creativo","title","Creativo",1,"w-3rem"],[1,"flex","flex-column","gap-1"],[1,"text-sm","text-gray-500"],[1,"text-xs","font-medium"],[1,"bg-wrapper","px-4","pt-2"],[1,"grid"],[1,"col-12","lg:col-9"],[1,"mt-3"],[1,"flex","flex-wrap","justify-content-between","align-items-center","gap-3"],[1,"capitalize"],[1,"p-field"],["type","text","pInputText","",1,"w-20rem","h-3rem","p-3","border-none","input",3,"ngModelChange","input","ngModel","placeholder"],["type","button","pButton","","icon","pi pi-search",1,"p-button-warning","w-3rem","h-3rem",3,"click"],[1,"flex","align-items-center"],[1,"button-wrapper","flex","align-items-center","overflow-x-auto","flex-1","px-4"],[1,"flex","flex-wrap","gap-3","my-4"],["pButton","",1,"text-xs","py-1","px-2","font-medium","border-round-3xl","w-10rem","capitalize",3,"bg-primary","p-button-outlined","label"],[1,"col-12","lg:col-3"],[1,"shadow-none","rounded-lg","p-3","bg-white"],[1,"flex","justify-content-between","align-items-center"],[1,"flex","flex-column"],[1,"text-base","font-semibold","capitalize"],[1,"text-gray-400","text-sm","mt-1"],[1,"overflow-y-auto","mt-3"],[3,"selectedProductsChange","selectedProducts"],[1,"footer","p-3","mb-3"],[1,"text-base","font-semibold","capitalize","mb-3"],[1,"flex","flex-wrap","gap-3","mb-3"],[1,"flex","items-center"],["name","type-order","value","PAID","inputId","type-order3",3,"ngModelChange","onClick","ngModel"],["for","type-order3",1,"ml-2"],["name","type-order","value","HOLD","inputId","type-order1",3,"ngModelChange","onClick","ngModel"],["for","type-order1",1,"ml-2"],["name","type-order","value","COST","inputId","type-order4",3,"ngModelChange","onClick","ngModel"],["for","type-order4",1,"ml-2"],["name","type-order","value","FREE","inputId","type-order2",3,"ngModelChange","onClick","ngModel"],["for","type-order2",1,"ml-2"],[1,"flex","justify-content-between","mb-3"],[1,"capitalize","text-900"],[1,"text-900","text-sm"],[1,"flex","my-2","py-2","sticky","bottom-0","bg-white"],["pButton","","pRipple","",1,"bg-success",3,"click","disabled","label"],["pButton","",1,"text-xs","py-1","px-2","font-medium","border-round-3xl","w-10rem","capitalize",3,"click","label"],["width","120px","height","25px","borderRadius","30px"],["endpoint","category/show","classStyle","md:col-6 lg:col-4",3,"filtersData"],[3,"productsListSelected","selectedProductsChange","product","selectedProducts"]],template:function(i,e){if(i&1){let r=M();n(0,"div",2)(1,"div",3)(2,"div",4)(3,"a",5),v(4,"img",6),o()(),n(5,"div",7)(6,"div",8),v(7,"img",9),n(8,"div",10)(9,"span",11),d(10),o(),n(11,"span",12),d(12),c(13,"date"),c(14,"date"),o()()()()()(),n(15,"div",13)(16,"div",14)(17,"div",15)(18,"div",16),v(19,"app-breadcrumb"),n(20,"div",17)(21,"h3",18),d(22,"categories"),o(),n(23,"div",19)(24,"p-inputGroup")(25,"input",20),c(26,"translate"),w("ngModelChange",function(a){return m(r),x(e.searchValue,a)||(e.searchValue=a),u(a)}),y("input",function(){return m(r),u(e.search())}),o(),n(27,"button",21),y("click",function(){return m(r),u(e.searchProducts())}),o()()()()(),n(28,"div",22)(29,"div",23,0)(31,"div",24),O(32,rt,1,5,"button",25,V,!1,ot,3,4),o()()(),Y(35,st,3,1),ce(36,35,tt),o(),n(38,"div",26)(39,"div",27)(40,"div",28)(41,"div",29)(42,"h2",30),d(43),c(44,"translate"),o(),n(45,"span",31),d(46),o()()(),n(47,"div",32)(48,"app-list-items",33),w("selectedProductsChange",function(a){return m(r),x(e.selectedProducts,a)||(e.selectedProducts=a),u(a)}),o()(),n(49,"div",34)(50,"h2",35),d(51),c(52,"translate"),o(),n(53,"div",36)(54,"div",37)(55,"p-radioButton",38),w("ngModelChange",function(a){return m(r),x(e.orderType,a)||(e.orderType=a),u(a)}),y("onClick",function(a){return m(r),u(e.orderType.set(a.value))}),o(),n(56,"label",39),d(57),c(58,"translate"),o()(),n(59,"div",37)(60,"p-radioButton",40),w("ngModelChange",function(a){return m(r),x(e.orderType,a)||(e.orderType=a),u(a)}),y("onClick",function(a){return m(r),u(e.orderType.set(a.value))}),o(),n(61,"label",41),d(62),c(63,"translate"),o()(),n(64,"div",37)(65,"p-radioButton",42),w("ngModelChange",function(a){return m(r),x(e.orderType,a)||(e.orderType=a),u(a)}),y("onClick",function(a){return m(r),u(e.orderType.set(a.value))}),o(),n(66,"label",43),d(67),c(68,"translate"),o()(),n(69,"div",37)(70,"p-radioButton",44),w("ngModelChange",function(a){return m(r),x(e.orderType,a)||(e.orderType=a),u(a)}),y("onClick",function(a){return m(r),u(e.orderType.set(a.value))}),o(),n(71,"label",45),d(72),c(73,"translate"),o()()()(),n(74,"div",34)(75,"h2",35),d(76),c(77,"translate"),o(),n(78,"div",46)(79,"p",47),d(80),c(81,"translate"),o(),n(82,"span",48),d(83),c(84,"currency"),o()(),v(85,"p-divider"),n(86,"div",46)(87,"p",47),d(88),c(89,"translate"),o(),n(90,"span",48),d(91),c(92,"currency"),o()()(),n(93,"div",49)(94,"button",50),c(95,"translate"),y("click",function(){return m(r),u(e.submit())}),o()()()()()()}if(i&2){let r;l(10),g(" ",((r=e.currentUser())==null?null:r.firstName)+" "+((r=e.currentUser())==null?null:r.lastName)," "),l(2),fe(" ",R(13,26,e.currentDate(),"EEE, ")," ",R(14,29,e.currentDate(),"MMMM yy hh:mm:ss a")," "),l(13),Z("placeholder",f(26,32,"Search Products")),b("ngModel",e.searchValue),l(7),L(e.categoriesList()),l(4),me(e.categoriesList().length),l(7),g(" ",f(44,34,"Orders Summary")," "),l(3),g(" ",e.orderNumber(),""),l(2),b("selectedProducts",e.selectedProducts),l(3),g(" ",f(52,36,"Order Type")," "),l(4),b("ngModel",e.orderType),l(2),g(" ",f(58,38,"Paid"),""),l(3),b("ngModel",e.orderType),l(2),g(" ",f(63,40,"Hold"),""),l(3),b("ngModel",e.orderType),l(2),g(" ",f(68,42,"Cost"),""),l(3),b("ngModel",e.orderType),l(2),g(" ",f(73,44,"Free"),""),l(4),g(" ",f(77,46,"Payment Summary")," "),l(4),F(f(81,48,"Order Price")),l(3),g(" ",W(84,50,e.subTotal()," Eg ","symbol","0.0-0")," "),l(5),F(f(89,55,"Total")),l(3),g(" ",W(92,57,e.totalOrder()," Eg ","symbol","0.0-0")," "),l(3),Z("label",f(95,62,"Place Order")),C("disabled",!e.invalidBtn())}},dependencies:[ze,Ae,Qe,Re,G,U,Se,Ce,je,Ne,Ie,ve,K,Q,Le,Oe,E,we,A,z,We,Fe,xe,D,j,Ve],styles:[".bg-wrapper[_ngcontent-%COMP%]{background-color:#efefef}.input[_ngcontent-%COMP%]{outline:none}.button-wrapper[_ngcontent-%COMP%]{scroll-behavior:smooth;-ms-overflow-style:none;scrollbar-width:none}.button-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.scroll-arrow.hidden[_ngcontent-%COMP%]{visibility:hidden}.scroll-arrow.left[_ngcontent-%COMP%]{margin-right:.5rem}.scroll-arrow.right[_ngcontent-%COMP%]{margin-left:.5rem}[_nghost-%COMP%]     .p-card .p-card-body{height:100%}[_nghost-%COMP%]     .p-card .p-card-body .p-card-content{display:grid;grid-template-rows:auto 1fr auto;height:100%;padding:0}.footer[_ngcontent-%COMP%]{border:1px solid #f7f8fa;border-radius:16px;background-color:#fefefe}"],changeDetection:0})};export{ee as default};
