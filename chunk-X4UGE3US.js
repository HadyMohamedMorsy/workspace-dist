import{$ as ie,A as H,D as J,E as X,F as Z,Fa as ae,H as ee,M as te,Ta as le,_ as re,ca as M,da as x,oa as oe,pb as T,qb as se,sa as ne,v as q,w as Q,x as $,z}from"./chunk-H45ZYL4L.js";import"./chunk-LBHIXMIT.js";import"./chunk-R2AUDRXA.js";import"./chunk-JXG4LUU7.js";import"./chunk-AHOHCUBB.js";import{Bb as f,C as k,Cc as P,Gb as W,Kb as m,Lb as u,Mb as K,Qb as F,Tb as V,Ub as d,W as C,ac as U,bc as j,db as w,dc as h,ea as c,fc as y,ia as D,ic as I,jc as R,kc as L,mc as B,ob as N,pb as Y,qb as A,r as _,ua as l,va as s,wb as v,xc as g,ya as G,yc as b}from"./chunk-PLVIENQC.js";import{a,b as S}from"./chunk-5KTCK5IS.js";var O=class o{#e=c(oe);filtersData=Y();#t=c(T).getGlobalList(["type_order","type_order_user"]);model={};form=new $({});options={};fields=[this.#e.fieldBuilder([{key:"customFilters.start_date",type:"date-field",props:{format:"YYYY-MM-DD",label:"start date"},hooks:{onInit:r=>r.formControl?.valueChanges.pipe(k(t=>!!t),C(()=>{this.filtersData.update(t=>a(a({},t),this.model))}))}},{key:"customFilters.end_date",type:"date-field",props:{format:"YYYY-MM-DD",label:"end date"},hooks:{onInit:r=>r.formControl?.valueChanges.pipe(k(t=>!!t),C(()=>{this.filtersData.update(t=>a(a({},t),this.model))}))}},{key:"customFilters.type_order",type:"select-field",props:{isFloatedLabel:!0,label:"Select a Order Type",options:this.#t.pipe(_(({type_order:r})=>r))},hooks:{onInit:r=>r.formControl?.valueChanges.pipe(C(()=>{this.filtersData.update(t=>a(a({},t),this.model))}))}},{key:"customFilters.type_user",type:"select-field",props:{isFloatedLabel:!0,label:"Select a User Type",options:this.#t.pipe(_(({type_order_user:r})=>r))},hooks:{onInit:r=>r.formControl?.valueChanges.pipe(C(()=>{this.filtersData.update(t=>a(a({},t),this.model))}))}}])];static \u0275fac=function(t){return new(t||o)};static \u0275cmp=D({type:o,selectors:[["app-filter-order"]],inputs:{filtersData:[1,"filtersData"]},outputs:{filtersData:"filtersDataChange"},standalone:!0,features:[B],decls:5,vars:8,consts:[[1,"text-base","capitalize","font-medium","mb-3"],[3,"formGroup"],[3,"model","fields","form","options"]],template:function(t,e){t&1&&(m(0,"h1",0),h(1),g(2,"translate"),u(),m(3,"form",1),K(4,"formly-form",2),u()),t&2&&(w(),y(" ",b(2,6,"Filters orders")," : "),w(2),f("formGroup",e.form),w(),f("model",e.model)("fields",e.fields)("form",e.form)("options",e.options))},dependencies:[te,ee,Z,H,Q,J,x,M],encapsulation:2,changeDetection:0})};var ce=["status"];function fe(o,r){if(o&1){let t=F();m(0,"app-filter-order",3),L("filtersDataChange",function(i){l(t);let n=d();return R(n.filtersData,i)||(n.filtersData=i),s(i)}),u()}if(o&2){let t=d();I("filtersData",t.filtersData)}}function _e(o,r){o&1&&(h(0),g(1,"translate")),o&2&&y(" ",b(1,1,"paid")," ")}function Ce(o,r){o&1&&(h(0),g(1,"translate")),o&2&&y(" ",b(1,1,"Free")," ")}function he(o,r){if(o&1){let t=F();m(0,"p-dropdown",5),L("ngModelChange",function(i){l(t);let n=d().$implicit;return R(n.type_order,i)||(n.type_order=i),s(i)}),V("onChange",function(i){l(t);let n=d().$implicit,p=d();return s(p.changeStatus(n.id,i))}),u()}if(o&2){let t=d().$implicit,e=d();f("options",e.listData()),I("ngModel",t.type_order)}}function ye(o,r){if(o&1&&v(0,_e,2,3)(1,Ce,2,3)(2,he,1,2,"p-dropdown",4),o&2){let t=r.$implicit;W(t.type_order==="PAID"?0:t.type_order==="FREE"?1:2)}}var E=class o extends ae{status=N.required("status");listData$=c(T).getGlobalList(["type_order"]).pipe(_(({type_order:r})=>r.slice(1)));listData=ne(this.listData$,{initialValue:[]});currentLang=c(se).currentLanguage;ngOnInit(){this.indexMeta=S(a({},this.indexMeta),{endpoints:{index:"order/index",delete:"order/delete"},resourse:"kitchen-orders",displayCreateButton:!1,withAction:!1,indexTitle:this.translate.instant("order"),indexIcon:"pi pi-inbox",indexTableKey:"ORDER_KEY",columns:[{name:"id",title:this.#e("#ID"),searchable:!1,orderable:!0},{name:"order_number",title:this.#e("#order number"),searchable:!1,orderable:!0},{name:"type_order",title:this.#e("type order"),searchable:!1,orderable:!1,render:this.status()},{name:"type_user",title:this.#e("type user"),searchable:!1,orderable:!1},{name:"order_price",title:this.#e("order price"),searchable:!1,orderable:!0},{name:"total_order",title:this.#e("total order"),searchable:!1,orderable:!0},{title:this.#e("created by"),name:"createdBy",searchable:!1,orderable:!1},{title:this.#e("Created At"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}}]}),this.initializePermissions()}changeStatus(r,t){this.confirmService.confirmDelete({acceptCallback:()=>{this.api.request("post","order/update",{type_order:t.value,id:r}).subscribe()},rejectCallback:()=>{this.records.update(e=>e.map(i=>i.id===r?S(a({},i),{type_order:i.type_order}):i))}})}#e(r){return this.translate.instant(r)}static \u0275fac=(()=>{let r;return function(e){return(r||(r=G(o)))(e||o)}})();static \u0275cmp=D({type:o,selectors:[["app-orders"]],viewQuery:function(t,e){t&1&&U(e.status,ce,5),t&2&&j()},standalone:!0,features:[A,B],decls:5,vars:23,consts:[["customFiltersTemplate",""],["status",""],["paginatorPosition","both",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexPermission","updateBtnPermission","createBtnPermission","deleteBtnPermission","placeholderSearch","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows","withCustomFilters"],[3,"filtersDataChange","filtersData"],["styleClass","py-1 pl-2 shadow-none","appendTo","body",3,"options","ngModel"],["styleClass","py-1 pl-2 shadow-none","appendTo","body",3,"ngModelChange","onChange","options","ngModel"]],template:function(t,e){if(t&1){let i=F();m(0,"app-table-wrapper",2),V("createBtnClicked",function(){return l(i),s(e.openCreateRecordDialog())})("updateBtnClicked",function(p){return l(i),s(e.openUpdateRecordDialog(p))})("deleteBtnClicked",function(p){return l(i),s(e.deleteRecord(p))})("onLoadData",function(p){return l(i),s(e.loadRecords(p))}),v(1,fe,1,1,"ng-template",null,0,P)(3,ye,3,1,"ng-template",null,1,P),u()}if(t&2){let i,n;f("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("displayCreateButton",e.indexMeta.displayCreateButton)("columns",e.indexMeta.columns)("dataSource",e.records())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("rows",e.rows())("indexPermission",e.permissions().index)("updateBtnPermission",e.permissions().update)("createBtnPermission",e.permissions().create)("deleteBtnPermission",e.permissions().delete)("placeholderSearch",e.indexMeta.placeholderSearch)("withActionsColumn",e.indexMeta.withAction)("displayUpdateButton",e.indexMeta.displayUpdateButton)("displayDeleteButton",e.indexMeta.displayDeleteButton)("globalFilterValue",e.globalFilterValue)("reorderableColumns",(i=e.indexMeta.reorderableColumns)!==null&&i!==void 0?i:!1)("reorderableRows",(n=e.indexMeta.reorderableRows)!==null&&n!==void 0?n:!1)("withCustomFilters",!0)}},dependencies:[x,M,ie,re,X,q,z,O,le],encapsulation:2,changeDetection:0})};export{E as default};
