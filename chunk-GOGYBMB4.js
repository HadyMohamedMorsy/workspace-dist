import{da as q,oa as I,va as V,wa as x}from"./chunk-H45ZYL4L.js";import{A as D,C as L}from"./chunk-LBHIXMIT.js";import{q as M}from"./chunk-AHOHCUBB.js";import{Bb as C,Kb as d,L as n,Lb as m,Nb as F,Ob as v,Tb as h,W as l,db as _,dc as k,ea as f,fc as B,ia as y,mc as R,qb as w,xc as P,ya as b,yc as S}from"./chunk-PLVIENQC.js";import{a as u,b as p}from"./chunk-5KTCK5IS.js";var s=class{id;return_price;return_qty;type_store;weight_kg;weight_g;weight_product;total;product_id;constructor(e){this.id=e?.id||null,this.return_price=e?.return_price??0,this.type_store=e?.type_store||"item",this.return_qty=e?.return_qty??0,this.weight_kg=e?.weight_kg??0,this.weight_g=e?.weight_g??0,this.weight_product=e?.weight_product??0,this.total=e?.total??0,this.product_id=e?.product_id||null}};var Q=class a extends x{#e=f(I);ngOnInit(){this.clearCachingLists.set(["product/index","category/show","category/list-categories","dashboard/analytics"]),this.dialogMeta=p(u({},this.dialogMeta),{endpoints:{store:"returns/store",update:"returns/update"}}),this.editData&&this.editData.method!=="create"?(this.dialogMeta=p(u({},this.dialogMeta),{dialogTitle:this.translate.instant("Update Returns"),submitButtonLabel:this.translate.instant("Update Returns")}),this.model=new s(this.editData)):(this.dialogMeta=p(u({},this.dialogMeta),{dialogTitle:this.translate.instant("Create Returns"),submitButtonLabel:this.translate.instant("Create Returns")}),this.model=new s(this.editData)),this.fields=this.configureFields()}configureFields(){return[this.#e.fieldBuilder([{key:"type_store",type:"radio-field",props:{required:!0,options:[{value:"item",label:this.translate.instant("Item")},{value:"weight",label:this.translate.instant("Weight")}]},hooks:{onInit:e=>e.formControl?.valueChanges.pipe(n(),l(()=>{let o=e.form?.get("purchase_qty"),t=e.form?.get("total");e.form?.get("return_price")?.setValue(0),o?.setValue(0),t?.setValue(0)}))}}]),{fieldGroup:[{type:"separator-field",props:{title:this.translate.instant("Calculate Purchase Qty"),icon:"pi pi-calculator"},expressions:{hide:e=>e.form?.get("type_store")?.value!=="weight"}},this.#e.fieldBuilder([{key:"weight_kg",type:"floated-input-field",props:{type:"number",label:"weight Kg",required:!0,min:0,placeholder:"weight Kg"},expressions:{hide:e=>e.form?.get("type_store")?.value!=="weight"},hooks:{onInit:e=>e.formControl?.valueChanges.pipe(n(),l(o=>{let t=e.form?.get("weight_g"),r=e.form?.get("weight_product"),i=e.form?.get("purchase_qty"),g=e.form?.get("total"),c=e.form?.get("return_price");t?.setValue(o*1e3),i?.setValue(t?.value/r?.value),g?.setValue(c?.value*i?.value?i?.value:0)}))}},{key:"weight_g",type:"floated-input-field",props:{type:"number",label:"weight g",required:!0,min:0,placeholder:"weight g",disabled:!0},expressions:{hide:e=>e.form?.get("type_store")?.value!=="weight"}},{key:"weight_product",type:"floated-input-field",props:{type:"number",label:"weight Product g",required:!0,min:0,placeholder:"weight Product g"},expressions:{hide:e=>e.form?.get("type_store")?.value!=="weight"},hooks:{onInit:e=>e.formControl?.valueChanges.pipe(n(),l(o=>{let t=e.form?.get("weight_g"),r=e.form?.get("weight_product"),i=e.form?.get("purchase_qty"),g=e.form?.get("total"),c=e.form?.get("return_price");i?.setValue(t?.value/r?.value),g?.setValue(c?.value*i?.value)}))}}]),{template:'<div class="border-1 border-200 -mt-3"></div>',className:"col-12",expressions:{hide:e=>e.form?.get("type_store")?.value!=="weight"}}]},this.#e.fieldBuilder([{key:"return_price",type:"floated-input-field",className:"col-12 md:col-4",props:{label:"Return Price By One Item",required:!0,placeholder:"Return Price"},hooks:{onInit:e=>e.formControl?.valueChanges.pipe(n(),l(o=>{let t=e.form?.get("total"),r=e.form?.get("purchase_qty");t?.setValue(+o*r?.value)}))}},{key:"return_qty",type:"floated-input-field",className:"col-12 md:col-4",expressions:{"props.disabled":e=>e.form?.get("type_store")?.value!=="item"},props:{type:"number",label:"Qty Purshase",required:!0,min:0,placeholder:"Qty Return By Item"},hooks:{onInit:e=>e.formControl?.valueChanges.pipe(n(),l(o=>{let t=e.form?.get("total"),r=e.form?.get("return_price");t?.setValue(+o*r?.value)}))}},{key:"total",type:"floated-input-field",className:"col-12 md:col-4",props:{label:"total Refund",required:!0,placeholder:"total Refund",disabled:!0}},this.#e.fieldBuilder([{key:"note",type:"textarea-field",props:{label:"note",placeholder:"note"}}])])]}static \u0275fac=(()=>{let e;return function(t){return(e||(e=b(a)))(t||a)}})();static \u0275cmp=y({type:a,selectors:[["app-returns-dialog"]],standalone:!0,features:[w,R],decls:7,vars:11,consts:[[3,"onSubmit","form","model","fields","options","showSubmitButton","buttonLabel","isFiledsLoaded","submitBtnLoading"],["ngProjectAs","[header]",5,["","header",""]],[1,"flex","align-items-center","justify-content-between","w-full","p-3","border-bottom-1","border-300","bg-white"],[1,"font-semibold","capitalize","text-lg","line-height-2","my-0"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"flex-shrink-0","p-button-text","p-button-plain","p-button-rounded","w-2rem","h-2rem",3,"click"]],template:function(o,t){o&1&&(d(0,"app-form",0),P(1,"async"),h("onSubmit",function(){return t.createUpdateRecord(t.dialogMeta.endpoints)}),F(2,1),d(3,"div",2)(4,"h2",3),k(5),m(),d(6,"button",4),h("click",function(){return t.closeDialog()}),m()(),v(),m()),o&2&&(C("form",t.createUpdateForm)("model",t.model)("fields",t.fields)("options",t.options)("showSubmitButton",t.dialogMeta.showSubmitButton)("buttonLabel",t.dialogMeta.submitButtonLabel)("isFiledsLoaded",S(1,9,t.dialogMeta.dialogData$))("submitBtnLoading",t.isLoading()),_(5),B(" ",t.dialogMeta.dialogTitle," "))},dependencies:[M,q,L,D,V],encapsulation:2,changeDetection:0})};export{Q as a};
