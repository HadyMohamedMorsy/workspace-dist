import{D as te,Ea as oe,ab as P,ba as k,ga as re,ha as le,n as H,o as J,qa as ne,r as Q,u as X,w as Z,y as ee}from"./chunk-B2YRLTHG.js";import{A as ie,C as I}from"./chunk-VGJJ4SUB.js";import"./chunk-NU2CE2PW.js";import{c as ae,d as b}from"./chunk-DBWXYH2V.js";import"./chunk-R2AUDRXA.js";import"./chunk-JXG4LUU7.js";import{q as $}from"./chunk-Y2JJNTGM.js";import{Bb as d,C as N,Cc as z,Kb as o,Lb as s,Mb as A,Nb as G,Ob as K,Qb as R,Tb as _,Ub as E,W as p,db as h,dc as B,ea as u,fc as w,ia as c,ic as j,jc as O,kc as W,mc as g,pb as Y,qb as D,r as x,s as U,ua as f,va as y,wb as q,xc as M,ya as S,yc as v}from"./chunk-I6HS2BDL.js";import{a as n,b as m}from"./chunk-5KTCK5IS.js";var T=class r{#e=u(k);filtersData=Y();model={};form=new J({});options={};fields=[this.#e.fieldBuilder([{key:"customFilters.start_date",type:"date-field",className:"md:col-3 col-12",props:{format:"YYYY-MM-DD",label:"start date"},hooks:{onInit:e=>e.formControl?.valueChanges.pipe(N(a=>!!a),p(()=>{this.filtersData.update(a=>n(n({},a),this.model))}))}},{key:"customFilters.end_date",type:"date-field",className:"md:col-3 col-12",props:{format:"YYYY-MM-DD",label:"end date"},hooks:{onInit:e=>e.formControl?.valueChanges.pipe(N(a=>!!a),p(()=>{this.filtersData.update(a=>n(n({},a),this.model))}))}}])];static \u0275fac=function(a){return new(a||r)};static \u0275cmp=c({type:r,selectors:[["app-sallaries"]],inputs:{filtersData:[1,"filtersData"]},outputs:{filtersData:"filtersDataChange"},standalone:!0,features:[g],decls:5,vars:8,consts:[[1,"text-base","capitalize","font-medium","mb-3"],[3,"formGroup"],[3,"model","fields","form","options"]],template:function(a,t){a&1&&(o(0,"h1",0),B(1),M(2,"translate"),s(),o(3,"form",1),A(4,"formly-form",2),s()),a&2&&(h(),w(" ",v(2,6,"Filters Sallaries")," : "),h(2),d("formGroup",t.form),h(),d("model",t.model)("fields",t.fields)("form",t.form)("options",t.options))},dependencies:[te,ee,Z,Q,H,X,b,ae],encapsulation:2,changeDetection:0})};var F=class{id;sallary;rewards;incentives;discounts;net_sallary;type_sallary;name;destination;user;user_id;constructor(e){this.id=e?.id||null,this.name=e?.name||null,this.destination=e?.destination||null,this.sallary=e?.sallary??0,this.rewards=e?.rewards??0,this.incentives=e?.incentives??0,this.discounts=e?.discounts??0,this.net_sallary=e?.net_sallary??0,this.type_sallary=e?.type_sallary||"Internal",this.user_id=e?.user?.id||null}};var L=class r extends le{#e=u(k);#a=u(P).getGlobalList(["type_sallary"]);#i=u(P).getGlobalEntityList("user");ngOnInit(){this.dialogMeta=m(n({},this.dialogMeta),{dialogData$:U([this.#a,this.#i]),endpoints:{store:"salary/store",update:"salary/update"}}),this.editData?(this.dialogMeta=m(n({},this.dialogMeta),{dialogTitle:this.translate.instant("Update Salary"),submitButtonLabel:this.translate.instant("Update Salary")}),this.model=new F(this.editData)):(this.dialogMeta=m(n({},this.dialogMeta),{dialogTitle:this.translate.instant("Create  Salary"),submitButtonLabel:this.translate.instant("Create  Salary")}),this.model=new F),this.fields=this.configureFields()}configureFields(){return[this.#e.fieldBuilder([{key:"type_sallary",type:"select-field",className:"col-12 md:col-4",props:{filter:!0,isFloatedLabel:!0,required:!0,label:"Select Type Salllary",placeholder:"Select Type Salllary",options:this.#a.pipe(x(({type_sallary:e})=>e.slice(1)))}},{key:"user_id",type:"select-field",className:"col-12 md:col-4",expressions:{hide:e=>e.form?.get("type_sallary")?.value!=="Internal"},props:{isFloatedLabel:!0,label:"users",options:this.#i.pipe(x(e=>e.map(a=>({label:a.firstName+" "+a.lastName,value:a.id}))))}},{key:"name",type:"floated-input-field",className:"col-12 md:col-4",expressions:{hide:e=>e.form?.get("type_sallary")?.value!=="External"},props:{label:"name",required:!0}},{key:"destination",type:"floated-input-field",expressions:{hide:e=>e.form?.get("type_sallary")?.value!=="External"},props:{label:"destination",required:!0}}]),this.#e.fieldBuilder([{key:"sallary",type:"floated-input-field",className:"col-12 md:col-4",props:{type:"number",label:"Sallary",required:!0},hooks:{onInit:e=>e.formControl?.valueChanges.pipe(p(()=>{this.#t(e)}))}},{key:"rewards",type:"floated-input-field",className:"col-12 md:col-4",expressions:{hide:e=>e.form?.get("type_sallary")?.value!=="Internal"},props:{type:"number",label:"Rewards",required:!0},hooks:{onInit:e=>e.formControl?.valueChanges.pipe(p(()=>{this.#t(e)}))}},{key:"incentives",type:"floated-input-field",className:"col-12 md:col-4",expressions:{hide:e=>e.form?.get("type_sallary")?.value!=="Internal"},props:{type:"number",label:"Incentives",required:!0},hooks:{onInit:e=>e.formControl?.valueChanges.pipe(p(()=>{this.#t(e)}))}},{key:"discounts",type:"floated-input-field",className:"col-12 md:col-4",expressions:{hide:e=>e.form?.get("type_sallary")?.value!=="Internal"},props:{type:"number",label:"discounts",required:!0},hooks:{onInit:e=>e.formControl?.valueChanges.pipe(p(()=>{this.#t(e)}))}},{key:"net_sallary",type:"floated-input-field",className:"col-12 md:col-4",expressions:{hide:e=>e.form?.get("type_sallary")?.value!=="Internal"},props:{disabled:!0,type:"number",label:"Net Sallary",required:!0},hooks:{onInit:e=>e.formControl?.valueChanges.pipe(p(()=>{this.#t(e)}))}}])]}#t(e){let a=+e.model.rewards,t=+e.model.sallary,i=+e.model.incentives,l=+e.model.discounts;e.model.type_sallary==="Internal"&&e.parent?.get?.("net_sallary").formControl?.setValue(t+a+i-l)}static \u0275fac=(()=>{let e;return function(t){return(e||(e=S(r)))(t||r)}})();static \u0275cmp=c({type:r,selectors:[["app-salary-dialog"]],standalone:!0,features:[D,g],decls:7,vars:11,consts:[[3,"onSubmit","form","model","fields","options","showSubmitButton","buttonLabel","isFiledsLoaded","submitBtnLoading"],["ngProjectAs","[header]",5,["","header",""]],[1,"flex","align-items-center","justify-content-between","w-full","p-3","border-bottom-1","border-300","bg-white"],[1,"font-semibold","capitalize","text-lg","line-height-2","my-0"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"flex-shrink-0","p-button-text","p-button-plain","p-button-rounded","w-2rem","h-2rem",3,"click"]],template:function(a,t){a&1&&(o(0,"app-form",0),M(1,"async"),_("onSubmit",function(){return t.createUpdateRecord(t.dialogMeta.endpoints)}),G(2,1),o(3,"div",2)(4,"h2",3),B(5),s(),o(6,"button",4),_("click",function(){return t.closeDialog()}),s()(),K(),s()),a&2&&(d("form",t.createUpdateForm)("model",t.model)("fields",t.fields)("options",t.options)("showSubmitButton",t.dialogMeta.showSubmitButton)("buttonLabel",t.dialogMeta.submitButtonLabel)("isFiledsLoaded",v(1,9,t.dialogMeta.dialogData$))("submitBtnLoading",t.isLoading()),h(5),w(" ",t.dialogMeta.dialogTitle," "))},dependencies:[$,b,I,ie,re],encapsulation:2,changeDetection:0})};function de(r,e){if(r&1){let a=R();o(0,"app-sallaries",2),W("filtersDataChange",function(i){f(a);let l=E();return O(l.filtersData,i)||(l.filtersData=i),y(i)}),s()}if(r&2){let a=E();j("filtersData",a.filtersData)}}var V=class r extends ne{ngOnInit(){this.dialogComponent=L,this.indexMeta=m(n({},this.indexMeta),{resourse:"settings-expenses-salaries",endpoints:{index:"salary/index",delete:"salary/delete"},indexTitle:"salaries",indexIcon:"pi pi-money-bill",createBtnLabel:"Create salary",indexTableKey:"SALARY_KEY",columns:[{title:this.#e("Sallary"),name:"sallary",searchable:!1,orderable:!0},{title:this.#e("Rewards"),name:"rewards",searchable:!1,orderable:!0},{title:this.#e("Incentives"),name:"incentives",searchable:!1,orderable:!0},{title:this.#e("Discounts"),name:"discounts",searchable:!1,orderable:!0},{title:this.#e("Annual"),name:"annual",searchable:!1,orderable:!0},{title:this.#e("Net Sallary"),name:"net_sallary",searchable:!1,orderable:!0},{title:this.#e("Employer Internal"),name:"user.firstName",searchable:!1,orderable:!1},{title:this.#e("Employer External"),name:"name",searchable:!1,orderable:!1},{title:this.#e("created at"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy"}}]}),this.initializePermissions()}#e(e){return this.translate.instant(e)}static \u0275fac=(()=>{let e;return function(t){return(e||(e=S(r)))(t||r)}})();static \u0275cmp=c({type:r,selectors:[["app-salaries"]],standalone:!0,features:[D,g],decls:3,vars:22,consts:[["customFiltersTemplate",""],["paginatorPosition","both",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexPermission","updateBtnPermission","createBtnPermission","deleteBtnPermission","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows","withCustomFilters"],[3,"filtersDataChange","filtersData"]],template:function(a,t){if(a&1){let i=R();o(0,"app-table-wrapper",1),_("createBtnClicked",function(){return f(i),y(t.openCreateRecordDialog())})("updateBtnClicked",function(C){return f(i),y(t.openUpdateRecordDialog(C))})("deleteBtnClicked",function(C){return f(i),y(t.deleteRecord(C))})("onLoadData",function(C){return f(i),y(t.loadRecords(C))}),q(1,de,1,1,"ng-template",null,0,z),s()}if(a&2){let i,l;d("headerTitle",t.indexMeta.indexTitle)("titleIcon",t.indexMeta.indexIcon)("headerBtnLabel",t.indexMeta.createBtnLabel)("displayCreateButton",t.indexMeta.displayCreateButton)("columns",t.indexMeta.columns)("dataSource",t.records())("loading",t.isLoading())("totalRecords",t.totalRecords())("recordsFiltered",t.recordsFiltered())("stateKey",t.indexMeta.indexTableKey)("rows",t.rows())("indexPermission",t.permissions().index)("updateBtnPermission",t.permissions().update)("createBtnPermission",t.permissions().create)("deleteBtnPermission",t.permissions().delete)("withActionsColumn",t.indexMeta.withAction)("displayUpdateButton",t.indexMeta.displayUpdateButton)("displayDeleteButton",t.indexMeta.displayDeleteButton)("globalFilterValue",t.globalFilterValue)("reorderableColumns",(i=t.indexMeta.reorderableColumns)!==null&&i!==void 0?i:!1)("reorderableRows",(l=t.indexMeta.reorderableRows)!==null&&l!==void 0?l:!1)("withCustomFilters",!0)}},dependencies:[b,oe,T,I],encapsulation:2,changeDetection:0})};export{V as default};
