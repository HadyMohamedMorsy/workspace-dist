import{a as he,b as ge,c as _e}from"./chunk-3SEL3OTR.js";import"./chunk-4TAAWFWS.js";import"./chunk-7AFSXZCD.js";import{a as Ce}from"./chunk-7PWCODBA.js";import{$ as T,E as ee,Ea as ce,Sa as fe,W as te,X as ne,_ as oe,ca as ae,da as D,ia as le,na as re,ob as P,ra as se,ua as pe,v as H,va as ue,xa as me,z as Z}from"./chunk-AA67JPLF.js";import{A as M,B as de,C as S,e as ie}from"./chunk-LBHIXMIT.js";import"./chunk-R2AUDRXA.js";import"./chunk-JXG4LUU7.js";import{q as J}from"./chunk-AHOHCUBB.js";import{Bb as u,Cc as k,Gb as U,Kb as l,Lb as r,Mb as V,Nb as K,Ob as $,Qb as v,Tb as p,Ub as c,Xb as G,ac as O,bc as W,db as m,dc as Q,ea as y,fc as X,ia as w,ic as Y,jc as q,kc as z,mc as I,ob as N,qb as B,r as j,ua as s,va as d,wb as L,xc as f,ya as x,yc as h}from"./chunk-PLVIENQC.js";import{a as g,b as _,e as R,i as ve}from"./chunk-5KTCK5IS.js";var be=ve(Ce());var C=class{id;name;number;whatsApp;individual_type;employed_job;freelancer_job;unviresty;college;constructor(i){this.id=i?.id||null,this.name=i?.name||null,this.number=i?.number||null,this.whatsApp=i?.whatsApp||null,this.individual_type=i?.individual_type||"freelancer",this.employed_job=i?.employed_job||null,this.freelancer_job=i?.freelancer_job||null,this.unviresty=i?.unviresty||null,this.college=i?.college||null}};var F=class a extends ue{#e=y(re);#i=y(P).getGlobalList(["type_work"]);ngOnInit(){this.dialogMeta=_(g({},this.dialogMeta),{dialogData$:this.#i,endpoints:{store:"individual/store",update:"individual/update"}}),this.editData?(this.dialogMeta=_(g({},this.dialogMeta),{dialogTitle:this.translate.instant("Update Individual"),submitButtonLabel:this.translate.instant("Update Individual")}),this.model=new C(this.editData)):(this.dialogMeta=_(g({},this.dialogMeta),{dialogTitle:this.translate.instant("Create Individual"),submitButtonLabel:this.translate.instant("Create Individual")}),this.model=new C),this.fields=this.configureFields()}configureFields(){return[{fieldGroup:[{type:"separator-field",props:{title:this.translate.instant("Information Client"),icon:"fa-solid fa-info"}},this.#e.fieldBuilder([{key:"name",type:"floated-input-field",props:{label:"name"}},{key:"number",type:"input-group-field",props:{type:"number",placeholder:"number",icon:"pi pi-phone",maxLength:me.NUMBER_PHONE}}]),this.#e.fieldBuilder([{key:"whatsApp",type:"input-group-field",className:"col-12 md:col-6",props:{type:"number",placeholder:"whatsApp",icon:"pi pi-whatsapp"}}])]},{template:'<div class="border-1 border-200 -mt-3"></div>',className:"col-12"},{fieldGroup:[{type:"separator-field",props:{title:this.translate.instant("Client Details"),icon:"fa-solid fa-info"}},{key:"individual_type",type:"radio-field",props:{label:"Choose Type Customer",options:this.#i.pipe(j(({type_work:i})=>i.slice(1)))}},this.#e.fieldBuilder([{key:"unviresty",type:"input-group-field",expressions:{hide:({model:i})=>i?.individual_type!=="student"},props:{placeholder:"unviresty",icon:"fa-solid fa-building-columns"}},{key:"college",type:"input-group-field",expressions:{hide:({model:i})=>i?.individual_type!=="student"},props:{placeholder:"college",icon:"fa-solid fa-graduation-cap"}}]),this.#e.fieldBuilder([{key:"freelancer_job",type:"floated-input-field",className:"col-12 md:col-6",expressions:{hide:({model:i})=>i?.individual_type!=="freelancer"},props:{label:"freelancer Job"}}]),this.#e.fieldBuilder([{key:"employed_job",type:"floated-input-field",className:"col-12 md:col-6",expressions:{hide:({model:i})=>i?.individual_type!=="employed"},props:{label:"employed Job"}}])]}]}static \u0275fac=(()=>{let i;return function(e){return(i||(i=x(a)))(e||a)}})();static \u0275cmp=w({type:a,selectors:[["app-individual-dialog"]],standalone:!0,features:[B,I],decls:7,vars:11,consts:[[3,"onSubmit","form","model","fields","options","showSubmitButton","buttonLabel","isFiledsLoaded","submitBtnLoading"],["ngProjectAs","[header]",5,["","header",""]],[1,"flex","align-items-center","justify-content-between","w-full","p-3","border-bottom-1","border-300","bg-white"],[1,"font-semibold","capitalize","text-lg","line-height-2","my-0"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"flex-shrink-0","p-button-text","p-button-plain","p-button-rounded","w-2rem","h-2rem",3,"click"]],template:function(t,e){t&1&&(l(0,"app-form",0),f(1,"async"),p("onSubmit",function(){return e.createUpdateRecord(e.dialogMeta.endpoints)}),K(2,1),l(3,"div",2)(4,"h2",3),Q(5),r(),l(6,"button",4),p("click",function(){return e.closeDialog()}),r()(),$(),r()),t&2&&(u("form",e.createUpdateForm)("model",e.model)("fields",e.fields)("options",e.options)("showSubmitButton",e.dialogMeta.showSubmitButton)("buttonLabel",e.dialogMeta.submitButtonLabel)("isFiledsLoaded",h(1,9,e.dialogMeta.dialogData$))("submitBtnLoading",e.isLoading()),m(5),X(" ",e.dialogMeta.dialogTitle," "))},dependencies:[J,D,T,S,M,pe],encapsulation:2,changeDetection:0})};var Ie=["viewClient"];function ke(a,i){if(a&1){let t=v();l(0,"p-button",9),p("onClick",function(){let n=s(t).$implicit,o=c();return d(o.viewDialog(n))}),r()}if(a&2){let t=i.$implicit;u("label",t.name)("link",!0)}}function Te(a,i){if(a&1){let t=v();l(0,"div",10)(1,"p-dropdown",11),f(2,"translate"),z("ngModelChange",function(n){s(t);let o=c();return q(o.selectedType,n)||(o.selectedType=n),d(n)}),p("onChange",function(n){s(t);let o=c();return d(o.filter(n,"individual_type"))}),r()()}if(a&2){let t=c();m(),G("placeholder",h(2,4,"Select a Work Type")),u("options",t.listData().type_work)("filter",!0),Y("ngModel",t.selectedType)}}function De(a,i){if(a&1){let t=v();l(0,"button",14),p("click",function(){s(t);let n=c().$implicit,o=c();return d(o.showMessage(n.orders[0].order_price))}),r()}}function Me(a,i){if(a&1&&(V(0,"app-menu-collapse-actions",12),L(1,De,1,0,"button",13)),a&2){let t=i.$implicit,e=c();u("recordId",t.id)("permissionShared",e.hasPermisstion(e.resource.Shared,"create"))("permissionDeskArea",e.hasPermisstion(e.resource.Deskarea,"create"))("permissionMemebership",e.hasPermisstion(e.resource.AssignesMembership,"create"))("permissionDeal",e.hasPermisstion(e.resource.Deals,"create"))("permissionPackage",e.hasPermisstion(e.resource.AssignesPackage,"create"))("dialogConfig",e.dialogConfig)("clearCachingLists",e.clearCachingLists()),m(),U(t.orders!=null&&t.orders.length?1:-1)}}var E=class a extends ce{confirmationService=y(ie);viewClient=N.required("viewClient");resource=le;listData$=y(P).getGlobalList(["type_work"]);listData=se(this.listData$,{initialValue:{}});selectedType="";exportColumns;showMessage(i){this.confirmationService.confirm({message:`There Is Order From Kitchen You Must Pay It , Total Price is : ${i} EG`,header:this.translate.instant("message"),icon:"pi pi-envelope",acceptVisible:!1,rejectVisible:!1,rejectButtonStyleClass:"p-button-text"})}ngOnInit(){this.isShareRecord.set(!0),this.clearCachingLists.set(["assignes-membership/individual","assign-general-offer/individual","assignes-package/individual","deals/individual","shared/individual","deskarea/individual","reservation-room/individual","order/individual"]),this.dialogComponent=F,this.viewDialogComponent=ge,this.indexMeta=_(g({},this.indexMeta),{endpoints:{index:"individual/index",delete:"individual/delete"},resourse:"customers-individual",indexTitle:"Individual",provideFields:["individual_type","employed_job","freelancer_job","unviresty","college"],indexIcon:"fa-solid fa-user",createBtnLabel:this.#e("Create Individual"),indexTableKey:"INDIVIDUAL_KEY",columns:[{title:this.#e("name"),name:"name",searchable:!0,orderable:!1,render:this.viewClient()},{title:this.#e("number"),name:"number",searchable:!0,orderable:!1},{title:this.#e("whatsApp"),name:"whatsApp",searchable:!0,orderable:!1},{title:this.#e("created by"),name:"createdBy",searchable:!1,orderable:!1},{title:this.#e("Created At"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}}]}),this.initializePermissions(),this.exportColumns=this.indexMeta.columns.map(i=>({title:i.title,dataKey:i.name}))}exportPdf(){import("./chunk-H3P4WYJK.js").then(i=>{import("./chunk-M4ATFCOO.js").then(t=>{let e=new i.default("p","px","a4");e.autoTable(this.exportColumns,this.records()),e.save("records.pdf")})})}exportExcel(){import("./chunk-4VY6OIZS.js").then(i=>{let t=this.records().map(Ve=>{var A=Ve,{individual_type:b,employed_job:Se,freelancer_job:Pe,unviresty:Fe,college:Le}=A,ye=R(A,["individual_type","employed_job","freelancer_job","unviresty","college"]);return ye}),n={Sheets:{data:i.utils.json_to_sheet(t)},SheetNames:["data"]},o=i.write(n,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(o,"records")})}saveAsExcelFile(i,t){let e="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",n=".xlsx",o=new Blob([i],{type:e});be.default.saveAs(o,t+"_export_"+new Date().getTime()+n)}filter(i,t){this.filtersData.update(e=>_(g({},e),{customFilters:i.value?{[t]:i.value}:null}))}#e(i){return this.translate.instant(i)}viewDialog(i){super.viewDialog(i,{endpoint:"individual",keyState:"INDIVIDUAL",key:"individual_id"})}hasPermisstion(i,t){return this.userPermission.hasPermission(i,t)}static \u0275fac=(()=>{let i;return function(e){return(i||(i=x(a)))(e||a)}})();static \u0275cmp=w({type:a,selectors:[["app-individual"]],viewQuery:function(t,e){t&1&&O(e.viewClient,Ie,5),t&2&&W()},standalone:!0,features:[B,I],decls:16,vars:34,consts:[["viewClient",""],["additionalContentTemplate",""],["extendDefaultActionsTemplate",""],[1,"flex","gap-2","mb-4"],["type","button","pButton","","icon","pi pi-file-excel text-xs","tooltipPosition","top",1,"text-xs","py-1","px-3",3,"click","label","pTooltip"],["type","button","pButton","","icon","pi pi-file-pdf text-xs","tooltipPosition","top",1,"text-xs","bg-pink","border-pink","py-1","px-3",3,"click","label","pTooltip"],["paginatorPosition","both","placeholderSearch","search Name Or Phone Or Whatapp",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexPermission","updateBtnPermission","createBtnPermission","deleteBtnPermission","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows","withAdditionalContent"],["moreActions",""],["type","individual"],[3,"onClick","label","link"],[1,"flex-order-2"],["styleClass","py-1 pl-2 shadow-none w-14rem",3,"ngModelChange","onChange","options","filter","ngModel","placeholder"],[3,"recordId","permissionShared","permissionDeskArea","permissionMemebership","permissionDeal","permissionPackage","dialogConfig","clearCachingLists"],["pButton","","pRipple","","icon","pi pi-exclamation-circle text-xs","tooltipPosition","top","pTooltip","Note order from kitchen",1,"p-button-rounded","p-button-text","p-button-sm"],["pButton","","pRipple","","icon","pi pi-exclamation-circle text-xs","tooltipPosition","top","pTooltip","Note order from kitchen",1,"p-button-rounded","p-button-text","p-button-sm",3,"click"]],template:function(t,e){if(t&1){let n=v();l(0,"div",3)(1,"button",4),f(2,"translate"),f(3,"translate"),p("click",function(){return s(n),d(e.exportExcel())}),r(),l(4,"button",5),f(5,"translate"),f(6,"translate"),p("click",function(){return s(n),d(e.exportPdf())}),r()(),l(7,"app-table-wrapper",6),p("createBtnClicked",function(){return s(n),d(e.openCreateRecordDialog())})("updateBtnClicked",function(b){return s(n),d(e.openUpdateRecordDialog(b))})("deleteBtnClicked",function(b){return s(n),d(e.deleteRecord(b))})("onLoadData",function(b){return s(n),d(e.loadRecords(b))}),l(8,"div",7),V(9,"app-links-client",8),r(),L(10,ke,1,2,"ng-template",null,0,k)(12,Te,3,6,"ng-template",null,1,k)(14,Me,2,9,"ng-template",null,2,k),r()}if(t&2){let n,o;m(),u("label",h(2,26,"Excel"))("pTooltip",h(3,28,"export_as_excel")),m(3),u("label",h(5,30,"PDF"))("pTooltip",h(6,32,"export_as_pdf")),m(3),u("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("displayCreateButton",e.indexMeta.displayCreateButton)("columns",e.indexMeta.columns)("dataSource",e.sharedRecords())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("rows",e.rows())("indexPermission",e.permissions().index)("updateBtnPermission",e.permissions().update)("createBtnPermission",e.permissions().create)("deleteBtnPermission",e.permissions().delete)("withActionsColumn",e.indexMeta.withAction)("displayUpdateButton",e.indexMeta.displayUpdateButton)("displayDeleteButton",e.indexMeta.displayDeleteButton)("globalFilterValue",e.globalFilterValue)("reorderableColumns",(n=e.indexMeta.reorderableColumns)!==null&&n!==void 0?n:!1)("reorderableRows",(o=e.indexMeta.reorderableRows)!==null&&o!==void 0?o:!1)("withAdditionalContent",!0)}},dependencies:[fe,ee,H,Z,ne,te,T,oe,he,S,M,de,_e,D,ae],encapsulation:2,changeDetection:0})};export{E as default};
