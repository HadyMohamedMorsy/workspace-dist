import{a as oe}from"./chunk-Z7FNWZKA.js";import{a as re}from"./chunk-KIB5IVYP.js";import{Ea as te,N as z,O as H,ab as ie,ba as Y,bb as T,d as Q,da as J,ga as X,ha as Z,qa as ee}from"./chunk-RDWS3ZUY.js";import{A as M,C as S}from"./chunk-VGJJ4SUB.js";import"./chunk-NU2CE2PW.js";import{c as W,d as k,e as I}from"./chunk-DBWXYH2V.js";import"./chunk-R2AUDRXA.js";import"./chunk-JXG4LUU7.js";import{q as j}from"./chunk-Y2JJNTGM.js";import{Bb as f,Cc as x,Kb as l,Lb as s,Nb as q,Ob as $,Qb as L,Tb as m,Ub as F,ac as G,bc as K,db as y,dc as P,ea as p,fc as w,ia as b,mc as B,nb as U,ob as E,oc as O,qb as C,r as V,ua as u,va as c,wb as A,xc as D,ya as _,yc as R}from"./chunk-I6HS2BDL.js";import{a,b as d}from"./chunk-5KTCK5IS.js";var h=class{id;name;code;selling_price;purshase_price;type;store;featured_image;categories;category_ids;constructor(t){this.id=t?.id||null,this.name=t?.name||null,this.code=t?.code||null,this.selling_price=t?.selling_price??0,this.purshase_price=t?.purshase_price??0,this.type=t?.type||null,this.store=t?.store??0,this.featured_image=t?.featured_image||null,this.category_ids=t?.categories?.map(i=>i.id)||null}};var v=class n extends Z{#e=p(ie).getGlobalEntityList("categories");#t=p(Y);#i=p(T);dialogCategoryRef;isSingleUploading=U(!1);configDialog={showHeader:!1,width:"800px",height:"100%",modal:!0,focusOnShow:!1,styleClass:"m-0 max-h-full transform-none",position:this.#i.currentLanguage()==="en"?"right":"left",rtl:this.#i.currentLanguage()!=="en",closable:!0,closeOnEscape:!0,dismissableMask:!1};ngOnInit(){this.clearCachingLists.set(["purchases/index","returns/index","category/show","category/list-categories"]),this.dialogMeta=d(a({},this.dialogMeta),{dialogData$:this.#e,endpoints:{store:"product/store",update:"product/update"}}),this.editData?(this.dialogMeta=d(a({},this.dialogMeta),{dialogTitle:this.translate.instant("Update product"),submitButtonLabel:this.translate.instant("Update product")}),this.model=new h(this.editData)):(this.dialogMeta=d(a({},this.dialogMeta),{dialogTitle:this.translate.instant("Create product"),submitButtonLabel:this.translate.instant("Create product")}),this.model=new h),this.#o()}#o(){this.fields=this.configureFields()}configureFields(){return[{fieldGroup:[{type:"separator-field",props:{title:this.translate.instant("Information Product"),icon:"fa-solid fa-info"}},this.#t.fieldBuilder([{key:"code",type:"floated-input-field",props:{label:"code",required:!0,placeholder:"code"}},{key:"name",type:"floated-input-field",props:{label:"Name",required:!0,placeholder:"Name"}},{key:"selling_price",type:"floated-input-field",props:{fieldValidate:"purshase price",label:"selling price",required:!0,placeholder:"selling price"},expressions:{"props.min":"model.purshase_price"}}]),this.#t.fieldBuilder([{key:"store",type:"floated-input-field",className:"col-12 md:col-4",props:{disabled:!0,label:"store Inventory",placeholder:"store Inventory",description:"when u created product and after it purshase this product store it will be genearted Automatic"}},{key:"purshase_price",type:"floated-input-field",className:"col-12 md:col-4",props:{disabled:!0,label:"purshase price",placeholder:"purshase price",description:"when u created product and after it purshase this product purshase price it will be genearted Automatic"}}])]},{template:'<div class="border-1 border-200 -mt-3"></div>',className:"col-12"},{fieldGroup:[{type:"separator-field",props:{title:this.translate.instant("Categories"),icon:"pi pi-bars"}},this.#t.fieldBuilder([{key:"category_ids",type:"select-field",className:"col-12 md:col-4",props:{isFloatedLabel:!0,filter:!0,multiple:!0,label:"Select Categories",options:this.#e.pipe(V(t=>t.map(i=>({label:i.name,value:i.id}))))}},{key:"type",type:"select-field",className:"col-12 md:col-4",props:{filter:!0,isFloatedLabel:!0,required:!0,label:"Select Type Product",placeholder:"Select Type",options:[{label:"item",value:"item"},{label:"weight",value:"weight"}]}}])]},{template:'<div class="border-1 border-200 -mt-3"></div>',className:"col-12"},{fieldGroup:[{type:"separator-field",props:{title:this.translate.instant("Uploads"),icon:"pi pi-arrow-up"}},this.fieldBuilder.fieldBuilder([{key:"featured_image",type:"file-field",props:{label:"image Upload",mode:this.editData?"update":"store",isUploading:this.isSingleUploading}}])]}]}static \u0275fac=(()=>{let t;return function(e){return(t||(t=_(n)))(e||n)}})();static \u0275cmp=b({type:n,selectors:[["app-product-dialog"]],standalone:!0,features:[C,B],decls:7,vars:11,consts:[[3,"onSubmit","form","model","fields","options","showSubmitButton","buttonLabel","isFiledsLoaded","submitBtnLoading"],["ngProjectAs","[header]",5,["","header",""]],[1,"flex","align-items-center","justify-content-between","w-full","p-3","border-bottom-1","border-300","bg-white"],[1,"font-semibold","capitalize","text-lg","line-height-2","my-0"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"flex-shrink-0","p-button-text","p-button-plain","p-button-rounded","w-2rem","h-2rem",3,"click"]],template:function(i,e){i&1&&(l(0,"app-form",0),D(1,"async"),m("onSubmit",function(){return e.createUpdateRecord(e.dialogMeta.endpoints)}),q(2,1),l(3,"div",2)(4,"h2",3),P(5),s(),l(6,"button",4),m("click",function(){return e.closeDialog()}),s()(),$(),s()),i&2&&(f("form",e.createUpdateForm)("model",e.model)("fields",e.fields)("options",e.options)("showSubmitButton",e.dialogMeta.showSubmitButton)("buttonLabel",e.dialogMeta.submitButtonLabel)("isFiledsLoaded",R(1,9,e.dialogMeta.dialogData$))("submitBtnLoading",e.isLoading()),y(5),w(" ",e.dialogMeta.dialogTitle," "))},dependencies:[j,k,S,M,X],encapsulation:2,changeDetection:0})};var se=["productName"],de=n=>[n];function pe(n,t){if(n&1&&(l(0,"a",3),P(1),s()),n&2){let i=t.$implicit;f("routerLink",O(2,de,"/product/"+i.id)),y(),w(" ",i.name," ")}}function ue(n,t){if(n&1){let i=L();l(0,"button",4),D(1,"translate"),m("click",function(){let r=u(i).$implicit,o=F();return c(o.openPurshaseDialog(r))}),s(),l(2,"button",5),m("click",function(){let r=u(i).$implicit,o=F();return c(o.openReturnsDialog(r))}),s()}n&2&&f("pTooltip",R(1,1,"Create Purshases"))}var N=class n extends ee{productName=E.required("productName");alertService=p(J);currentLang=p(T).currentLanguage;dialogRefPurshase;dialogRefReturns;ngOnInit(){this.clearCachingLists.set(["purchases/index","returns/index","category/show","category/list-categories"]),this.dialogComponent=v,this.indexMeta=d(a({},this.indexMeta),{endpoints:{index:"product/index",delete:"product/delete"},resourse:"kitchen-product",provideFields:["featured_image","type"],indexTitle:this.translate.instant("products"),createBtnLabel:this.translate.instant("Create product"),indexIcon:"fa-brands fa-product-hunt",indexTableKey:"PRODUCT_KEY",columns:[{name:"id",title:this.#e("#ID"),searchable:!1,orderable:!1},{name:"code",title:this.#e("Code"),searchable:!0,orderable:!1},{name:"name",title:this.#e("Name"),searchable:!0,orderable:!1,render:this.productName()},{name:"store",title:this.#e("store"),searchable:!1,orderable:!0},{name:"selling_price",title:this.#e("selling price"),searchable:!1,orderable:!0},{name:"purshase_price",title:this.#e("purshase price"),searchable:!1,orderable:!0},{title:this.#e("Created At"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}}]}),this.initializePermissions()}openPurshaseDialog(t){let i=d(a({},this.dialogConfig),{width:"950px",data:{method:"create",product_id:t.id,type_store:t.type}});this.dialogRefPurshase=this.dialogService.open(oe,i),this.dialogRefPurshase?.onClose.pipe(I(this.destroyRef)).subscribe(e=>{e&&this.records.update(r=>r.map(o=>o.id===e.product.id?a(a({},o),e.product):o))})}openReturnsDialog(t){let i=d(a({},this.dialogConfig),{width:"950px",data:{method:"create",product_id:t.id,type_store:t.type}});this.dialogRefReturns=this.dialogService.open(re,i),this.dialogRefReturns?.onClose.pipe(I(this.destroyRef)).subscribe(e=>{e&&this.records.update(r=>r.map(o=>o.id===e.product.id?a(a({},o),e.product):o))})}#e(t){return this.translate.instant(t)}static \u0275fac=(()=>{let t;return function(e){return(t||(t=_(n)))(e||n)}})();static \u0275cmp=b({type:n,selectors:[["app-products"]],viewQuery:function(i,e){i&1&&G(e.productName,se,5),i&2&&K()},standalone:!0,features:[C,B],decls:5,vars:21,consts:[["productName",""],["extendDefaultActionsTemplate",""],["paginatorPosition","both",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexPermission","updateBtnPermission","createBtnPermission","deleteBtnPermission","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows"],[1,"table-link-title",3,"routerLink"],["pButton","","icon","pi pi-credit-card text-sm","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",3,"click","pTooltip"],["pButton","","icon","pi pi-arrow-left text-sm","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",3,"click"]],template:function(i,e){if(i&1){let r=L();l(0,"app-table-wrapper",2),m("createBtnClicked",function(){return u(r),c(e.openCreateRecordDialog())})("updateBtnClicked",function(g){return u(r),c(e.openUpdateRecordDialog(g))})("deleteBtnClicked",function(g){return u(r),c(e.deleteRecord(g))})("onLoadData",function(g){return u(r),c(e.loadRecords(g))}),A(1,pe,2,4,"ng-template",null,0,x)(3,ue,3,3,"ng-template",null,1,x),s()}if(i&2){let r,o;f("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("displayCreateButton",e.indexMeta.displayCreateButton)("columns",e.indexMeta.columns)("dataSource",e.records())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("rows",e.rows())("indexPermission",e.permissions().index)("updateBtnPermission",e.permissions().update)("createBtnPermission",e.permissions().create)("deleteBtnPermission",e.permissions().delete)("withActionsColumn",e.indexMeta.withAction)("displayUpdateButton",e.indexMeta.displayUpdateButton)("displayDeleteButton",e.indexMeta.displayDeleteButton)("globalFilterValue",e.globalFilterValue)("reorderableColumns",(r=e.indexMeta.reorderableColumns)!==null&&r!==void 0?r:!1)("reorderableRows",(o=e.indexMeta.reorderableRows)!==null&&o!==void 0?o:!1)}},dependencies:[k,W,te,H,z,Q,S,M],encapsulation:2,changeDetection:0})};export{N as default};
