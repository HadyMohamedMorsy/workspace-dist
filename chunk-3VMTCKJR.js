import{a as te,b as ie,c as ne,d as oe,e as re,f as ae}from"./chunk-STDT7DU7.js";import{Pa as Y,Qa as ee,Z as x}from"./chunk-B2YRLTHG.js";import{A as Q,C as X}from"./chunk-VGJJ4SUB.js";import"./chunk-NU2CE2PW.js";import{c as K,d as U,e as Z,f as q,g as L}from"./chunk-DBWXYH2V.js";import"./chunk-R2AUDRXA.js";import"./chunk-JXG4LUU7.js";import"./chunk-Y2JJNTGM.js";import{Ba as z,Bb as p,C as N,Cc as H,E as W,Gb as G,Ia as _,Kb as r,Lb as o,Qb as $,Tb as O,U as V,Uc as J,W as P,_ as j,db as a,dc as s,ea as m,fc as d,ia as R,ic as b,jc as v,kc as S,l as A,mc as F,nb as c,pb as D,r as C,ua as I,va as M,wb as y,xc as w,yc as k}from"./chunk-I6HS2BDL.js";import{a as g,b as h}from"./chunk-5KTCK5IS.js";var T=class n{#e=m(x);getTreeRooms$(t){return this.#e.getListData("lists/rooms-filters-calender","GET",void 0,`${t}`).pipe(C(({data:e})=>e))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};function pe(n,t){n&1&&(r(0,"h4",1),s(1),w(2,"translate"),o()),n&2&&(a(),d(" ",k(2,1,"Filters Free Reservations Rooms")," "))}function me(n,t){n&1&&(r(0,"h4",1),s(1),w(2,"translate"),o()),n&2&&(a(),d(" ",k(2,1,"Filters Reservations Rooms")," "))}var E=class n{isFree=_("");#e=m(T);#t=m(x);#i=m(z);selection=c([]);isLoading=D(!0);isAllSelected=c(!1);filterData=D({});events=D();loadRecords$=q(this.filterData).pipe(N(t=>!!t&&t.weekStartDate!==void 0),P(()=>this.isLoading.set(!0)),V(t=>{let e=JSON.stringify(t);return this.#t.getListData("reservation-room/index","POST",t,`reservation-room/index-${e}`).pipe(C(({data:i})=>i),P(i=>{this.events.set(i)}),Z(this.#i),W(()=>A({})))}));searchRooms(){let t=this.selection().map(e=>e.value);this.filterData.update(e=>h(g({},e),{roomIds:t}))}loadRecordsReadOnly=L(this.loadRecords$,{initialValue:{}});filtersRoom$=this.#e.getTreeRooms$("rooms");filtersRoom=L(this.filtersRoom$,{initialValue:null});selectAll(){this.isAllSelected.set(!this.isAllSelected()),this.isAllSelected()?this.selection.set(this.filtersRoom()):this.selection.set([])}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=R({type:n,selectors:[["app-filters-rooms"]],inputs:{isFree:[1,"isFree"],isLoading:[1,"isLoading"],filterData:[1,"filterData"],events:[1,"events"]},outputs:{isLoading:"isLoadingChange",filterData:"filterDataChange",events:"eventsChange"},standalone:!0,features:[F],decls:9,vars:10,consts:[[1,"surface-0","p-4","border-round","rooms"],[1,"font-bold","mb-3","capitalize","text-xl"],[1,"mb-3"],["pButton","",1,"text-xs","bg-pink","border-pink","py-1","px-3","p-button",3,"click","icon","label"],["filterBy","label","selectionMode","checkbox","scrollHeight","400px",1,"w-full","md:w-30rem",3,"selectionChange","filter","filterPlaceholder","loading","selection","value"],[1,"flex","justify-content-end"],["pButton","","icon","pi pi-search","label","Search By Room",1,"text-xs","mt-3","border-pink","py-1","px-3","p-button",3,"click"]],template:function(e,i){e&1&&(r(0,"div",0),y(1,pe,3,3,"h4",1)(2,me,3,3,"h4",1),r(3,"div",2)(4,"button",3),O("click",function(){return i.selectAll()}),o()(),r(5,"p-tree",4),w(6,"translate"),S("selectionChange",function(u){return v(i.selection,u)||(i.selection=u),u}),o(),r(7,"div",5)(8,"button",6),O("click",function(){return i.searchRooms()}),o()()()),e&2&&(a(),G(i.isFree()?1:2),a(3),p("icon",i.isAllSelected()?"pi pi-minus":"pi pi-plus")("label",i.isAllSelected()?"Deselect All":"Select All"),a(),p("filter",!0)("filterPlaceholder",k(6,8,"Search Room"))("loading",!1),b("selection",i.selection),p("value",i.filtersRoom()))},dependencies:[ee,Y,X,Q,U,K],styles:["[_nghost-%COMP%]     .p-tree .p-tree-filter-container .p-tree-filter{width:100%;height:var(--field-height);font-size:14px;padding:.65rem}.rooms[_ngcontent-%COMP%]{position:sticky;top:100px}"],changeDetection:0})};function ce(n,t){if(n&1&&(r(0,"div",6)(1,"h2",7)(2,"span"),s(3," Client Name : "),o(),s(4),o(),r(5,"p",8)(6,"span"),s(7," Room Name : "),o(),s(8),o()()),n&2){let e=t.$implicit;a(4),d(" ",e.event.title," "),a(4),d("",e.event.extendedProps.roomName," ")}}var B=class n{free=_("");filterData=c({});events=c([]);calendarOptions=J(()=>{let t=this;return{plugins:[oe,ne,ae,re],timeZone:"Africa/Cairo",headerToolbar:{left:"prev,next",center:"",right:"title"},initialView:"listWeek",events:this.events(),weekends:!0,businessHours:{daysOfWeek:[0,1,2,3,4,5,6]},datesSet:e=>{this.filterData.update(i=>h(g({},i),{weekStartDate:t.#e(e.start)}))}}});ngOnInit(){this.free()&&this.filterData.update(t=>h(g({},t),{isFree:!0}))}#e(t){let e=new Date(t);return e.setDate(t.getDate()-t.getDay()),e}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=R({type:n,selectors:[["app-room-reservation"]],inputs:{free:[1,"free"]},standalone:!0,features:[F],decls:7,vars:4,consts:[["eventContent",""],[1,"grid"],[1,"md:col-3","col-12"],[3,"filterDataChange","eventsChange","isFree","filterData","events"],[1,"md:col-9","col-12"],[3,"options"],[1,"box-calender","p-3"],[1,"text-900","text-base","capitalize"],[1,"mt-2","capitalize"]],template:function(e,i){if(e&1){let f=$();r(0,"div",1)(1,"div",2)(2,"app-filters-rooms",3),S("filterDataChange",function(l){return I(f),v(i.filterData,l)||(i.filterData=l),M(l)})("eventsChange",function(l){return I(f),v(i.events,l)||(i.events=l),M(l)}),o()(),r(3,"div",4)(4,"full-calendar",5),y(5,ce,9,2,"ng-template",null,0,H),o()()()}e&2&&(a(2),p("isFree",i.free()),b("filterData",i.filterData)("events",i.events),a(2),p("options",i.calendarOptions()))},dependencies:[ie,te,E],styles:["[_nghost-%COMP%]     .fc-theme-standard td{background-color:var(--surface-0)}[_nghost-%COMP%]     .fc-v-event{background-color:transparent;border:none}[_nghost-%COMP%]     .fc .fc-non-business{background-color:transparent}[_nghost-%COMP%]     .box-calender{background-color:#f5f5f5;border:none}"],changeDetection:0})};export{B as default};
