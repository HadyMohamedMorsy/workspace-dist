import{a as et}from"./chunk-AQWO3IYN.js";import{c as ze,d as We,e as Ye,f as He,g as Qe,h as Je,i as Xe,j as Ze}from"./chunk-4TAAWFWS.js";import{a as Ge}from"./chunk-7AFSXZCD.js";import{$ as E,$a as $e,E as U,Ea as D,Ra as Ae,Sa as x,W as Fe,X as M,Za as Ne,_a as Ee,ca as Z,da as C,eb as Oe,fa as Ue,ga as Ve,ia as he,kb as qe,l as De,na as Ie,ob as Ke,pa as ee,pb as je,ua as ie,v as xe,va as ne,wa as Le,z as Re}from"./chunk-AA67JPLF.js";import{A as $,B as te,C as g,e as Pe}from"./chunk-LBHIXMIT.js";import"./chunk-R2AUDRXA.js";import"./chunk-JXG4LUU7.js";import{l as Me,q as X}from"./chunk-AHOHCUBB.js";import{Bb as m,Cc as K,Gb as V,Hb as Ce,Ia as l,Ib as ge,Jb as we,Kb as r,Lb as s,Nb as Y,Ob as H,Pb as ke,Qb as T,Tb as p,Tc as F,Ub as c,Uc as J,W as be,_ as ye,ac as G,bc as Q,db as v,dc as P,ea as w,fc as q,gc as Be,ia as b,ic as ve,jc as Se,kc as Te,mc as y,nb as L,ob as j,qb as B,r as W,ua as h,va as f,wb as S,xc as A,ya as k,yc as N}from"./chunk-PLVIENQC.js";import{a as d,b as u}from"./chunk-5KTCK5IS.js";var z=class{id;firstName;lastName;email;username;role;phone;password;password_confirmation;constructor(t){this.id=t?.id||null,this.firstName=t?.firstName||null,this.lastName=t?.lastName||null,this.email=t?.email||null,this.role=t?.role||null,this.username=t?.username||null,this.phone=t?.phone||null,this.password=t?.password||null,this.password_confirmation=t?.password_confirmation||null}},oe=class{id;permission;constructor(t){this.id=t?.id||null,this.permission=t?.permission||null}};var ae=class o extends ne{#e=w(Ie);#t=w(Ke).getGlobalList(["roles"]);ngOnInit(){this.dialogMeta=u(d({},this.dialogMeta),{dialogData$:this.#t,endpoints:{store:"user/store",update:"user/update"}}),this.editData?(this.dialogMeta=u(d({},this.dialogMeta),{dialogTitle:this.translate.instant("Update User"),submitButtonLabel:this.translate.instant("Update User")}),this.model=new z(this.editData)):(this.dialogMeta=u(d({},this.dialogMeta),{dialogTitle:this.translate.instant("Create User"),submitButtonLabel:this.translate.instant("Create User")}),this.model=new z),this.fields=this.configureFields()}configureFields(){return[{fieldGroup:[{type:"separator-field",props:{title:this.translate.instant("Information Users"),icon:"fa-solid fa-info"}},this.#e.fieldBuilder([{key:"firstName",type:"floated-input-field",props:{label:"First Name",required:!0}},{key:"lastName",type:"floated-input-field",props:{label:"Last Name",required:!0}},{key:"phone",type:"floated-input-field",props:{type:"number",label:"Mobile Number",required:!0}}]),this.#e.fieldBuilder([{key:"email",type:"floated-input-field",props:{label:"Email",required:!0}},{key:"username",type:"floated-input-field",props:{label:"Username",required:!0}},{key:"role",type:"select-field",props:{isFloatedLabel:!0,label:"Roles",options:this.#t.pipe(W(({roles:t})=>t))}}])]},{template:'<div class="border-1 border-200 -mt-3"></div>',className:"col-12"},{fieldGroup:[{type:"separator-field",props:{title:this.translate.instant("Password Users"),icon:"fa-solid fa-lock"}},this.#e.fieldBuilder([{validators:{validation:[{name:"fieldMatch",options:{errorPath:"password_confirmation"}}]},fieldGroup:[this.#e.fieldBuilder([{key:"password",type:"password-field",props:{label:"password",placeholder:"password",toggleMask:!0,required:!this.editData}},{key:"password_confirmation",type:"password-field",props:{label:"password confirmation",placeholder:"password confirmation",toggleMask:!0,required:!this.editData}}])]}])]}]}static \u0275fac=(()=>{let t;return function(e){return(t||(t=k(o)))(e||o)}})();static \u0275cmp=b({type:o,selectors:[["app-user-dialog"]],standalone:!0,features:[B,y],decls:7,vars:11,consts:[[3,"onSubmit","form","model","fields","options","showSubmitButton","buttonLabel","isFiledsLoaded","submitBtnLoading"],["ngProjectAs","[header]",5,["","header",""]],[1,"flex","align-items-center","justify-content-between","w-full","p-3","border-bottom-1","border-300","bg-white"],[1,"font-semibold","capitalize","text-lg","line-height-2","my-0"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"flex-shrink-0","p-button-text","p-button-plain","p-button-rounded","w-2rem","h-2rem",3,"click"]],template:function(i,e){i&1&&(r(0,"app-form",0),A(1,"async"),p("onSubmit",function(){return e.createUpdateRecord(e.dialogMeta.endpoints)}),Y(2,1),r(3,"div",2)(4,"h2",3),P(5),s(),r(6,"button",4),p("click",function(){return e.closeDialog()}),s()(),H(),s()),i&2&&(m("form",e.createUpdateForm)("model",e.model)("fields",e.fields)("options",e.options)("showSubmitButton",e.dialogMeta.showSubmitButton)("buttonLabel",e.dialogMeta.submitButtonLabel)("isFiledsLoaded",N(1,9,e.dialogMeta.dialogData$))("submitBtnLoading",e.isLoading()),v(5),q(" ",e.dialogMeta.dialogTitle," "))},dependencies:[X,C,g,$,ie],encapsulation:2,changeDetection:0})};var re=class o{#e=w(qe);getTreeNodesData$(t){return this.#e.getListData("lists/permission-list-tree","GET",void 0,`${t}`).pipe(W(({data:i})=>i))}static \u0275fac=function(i){return new(i||o)};static \u0275prov=ye({token:o,factory:o.\u0275fac,providedIn:"root"})};var se=class o extends ne{#e=w(re);selection=L([]);nodeLists=L([]);flattenNodeOptions=L([]);filteredNodes=L([]);ngOnInit(){this.dialogMeta=u(d({},this.dialogMeta),{dialogData$:this.#e.getTreeNodesData$(`permission-list-${this.editData.id}`),dialogTitle:this.translate.instant("Update User Permissions"),submitButtonLabel:this.translate.instant("Update User Permissions"),endpoints:{update:"user/update"}}),this.#e.getTreeNodesData$(`permission-list-${this.editData.id}`).pipe(be(t=>{this.nodeLists.set(t),this.flattenNodeOptions.set(this.#o(this.nodeLists())),this.selection.set(this.#t(this.editData.permission)),this.#i(),this.fields=this.configureFields()}),ee(this.destroyRef)).subscribe(),this.fields=this.configureFields()}#t(t){return this.nodeLists().flatMap(i=>{let e=t.find(R=>R.resource===i.data);if(!e)return[];let a=(i.children||[]).map(R=>R.data?.split(":")[1]).filter(Boolean).every(R=>e.actions.includes(R)),_=i.children.filter(R=>e.actions.includes(R.data.split(":")[1])).map(R=>d({},R));return a?[{key:i.key,label:i.label,data:i.data},..._]:_})}#i(){let t=this.selection().reduce((i,e)=>{let[n,a]=e.data.split(":");if(!n||!a)return i;let _=i.find(R=>R.resource===n);return _?_.actions.push(a):i.push({resource:n,actions:[a]}),i},[]);this.model=new oe({id:this.editData.id,permission:t})}#n(t){let i=this.filteredNodes().length?this.filteredNodes():this.flattenNodeOptions();if(t.props?.isAllSelected){let e=this.selection().filter(n=>!i.some(a=>a.key===n.key));this.selection.set(e)}else this.selection.update(e=>[...new Set([...e,...i])]),this.selection().forEach(e=>e.partialSelected=!1);this.#i()}configureFields(){return[{template:`
          <h2 class="text-base font-medium mt-0 mb-3">
            <i class="fas fa-user-shield mr-2"></i> ${this.editData.firstName+" "+this.editData.lastName}
          </h2>
        `},{type:"tree-field",props:{filter:!0,filterPlaceholder:this.translate.instant("filter selections"),withSelectionToggler:!0,withCollapseToggler:!0,isAllSelected:!1,isNoFilterResult:!1,selection:this.selection,options:this.nodeLists(),selectionChange:(t,i)=>{this.selection.set(i),this.#i();let e=this.selection().length===this.flattenNodeOptions().length;t.props&&(t.props.isAllSelected=e)},toggleSelection:t=>{this.#n(t),t.props&&(t.props.isAllSelected=!t.props.isAllSelected)}}}]}#o(t){return t?.flatMap(i=>[i,...i.children||[]])||[]}static \u0275fac=(()=>{let t;return function(e){return(t||(t=k(o)))(e||o)}})();static \u0275cmp=b({type:o,selectors:[["app-user-permissions-dialog"]],standalone:!0,features:[B,y],decls:7,vars:11,consts:[[3,"onSubmit","form","model","fields","options","showSubmitButton","buttonLabel","isFiledsLoaded","submitBtnLoading"],["ngProjectAs","[header]",5,["","header",""]],[1,"flex","align-items-center","justify-content-between","w-full","p-3","border-bottom-1","border-300","bg-white"],[1,"font-semibold","capitalize","text-lg","line-height-2","my-0"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"flex-shrink-0","p-button-text","p-button-plain","p-button-rounded","w-2rem","h-2rem",3,"click"]],template:function(i,e){i&1&&(r(0,"app-form",0),A(1,"async"),p("onSubmit",function(){return e.createUpdateRecord(e.dialogMeta.endpoints)}),Y(2,1),r(3,"div",2)(4,"h2",3),P(5),s(),r(6,"button",4),p("click",function(){return e.closeDialog()}),s()(),H(),s()),i&2&&(m("form",e.createUpdateForm)("model",e.model)("fields",e.fields)("options",e.options)("showSubmitButton",e.dialogMeta.showSubmitButton)("buttonLabel",e.dialogMeta.submitButtonLabel)("isFiledsLoaded",N(1,9,e.dialogMeta.dialogData$))("submitBtnLoading",e.isLoading()),v(5),q(" ",e.dialogMeta.dialogTitle," "))},dependencies:[X,C,g,$,ie],encapsulation:2,changeDetection:0})};var le=class o extends D{id=l.required({transform:F});endpoint=l.required();keyState=l.required();resourse=l.required();key=l.required();ngOnInit(){this.indexMeta=u(d({},this.indexMeta),{endpoints:{index:`company/${this.endpoint()}`},displayCreateButton:!1,resourse:this.resourse(),withAction:!1,indexTitle:"Companies",indexIcon:"fa-solid fa-building",createBtnLabel:this.#e("Create Company"),indexTableKey:`${this.keyState()}_COMPANY_KEY`,columns:[{title:this.#e("name"),name:"name",searchable:!0,orderable:!1},{title:this.#e("phone"),name:"phone",searchable:!1,orderable:!1},{title:this.#e("whatsApp"),name:"whatsApp",searchable:!0,orderable:!1},{title:this.#e("company type"),name:"company_type",searchable:!1,orderable:!1},{title:this.#e("city"),name:"city",searchable:!1,orderable:!1},{title:this.#e("created by"),name:"createdBy",searchable:!1,orderable:!1},{title:this.#e("created at"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}}]}),this.initializePermissions(),this.filtersData.update(t=>u(d({},t),{[this.key()]:this.id()}))}#e(t){return this.translate.instant(t)}static \u0275fac=(()=>{let t;return function(e){return(t||(t=k(o)))(e||o)}})();static \u0275cmp=b({type:o,selectors:[["app-view-related-company"]],inputs:{id:[1,"id"],endpoint:[1,"endpoint"],keyState:[1,"keyState"],resourse:[1,"resourse"],key:[1,"key"]},standalone:!0,features:[B,y],decls:1,vars:21,consts:[["paginatorPosition","both",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexPermission","updateBtnPermission","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows","withCustomFilters","withTableFilters"]],template:function(i,e){if(i&1&&(r(0,"app-table-wrapper",0),p("createBtnClicked",function(){return e.openCreateRecordDialog()})("updateBtnClicked",function(a){return e.openUpdateRecordDialog(a)})("deleteBtnClicked",function(a){return e.deleteRecord(a)})("onLoadData",function(a){return e.loadRecords(a)}),s()),i&2){let n,a;m("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("displayCreateButton",e.indexMeta.displayCreateButton)("columns",e.indexMeta.columns)("dataSource",e.records())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("rows",e.rows())("indexPermission",e.permissions().index)("updateBtnPermission",e.permissions().update)("withActionsColumn",e.indexMeta.withAction)("displayUpdateButton",e.indexMeta.displayUpdateButton)("displayDeleteButton",e.indexMeta.displayDeleteButton)("globalFilterValue",e.globalFilterValue)("reorderableColumns",(n=e.indexMeta.reorderableColumns)!==null&&n!==void 0?n:!1)("reorderableRows",(a=e.indexMeta.reorderableRows)!==null&&a!==void 0?a:!1)("withCustomFilters",!0)("withTableFilters",!1)}},dependencies:[x,U,M,E,g,C],encapsulation:2,changeDetection:0})};var de=class o extends D{id=l.required({transform:F});endpoint=l.required();keyState=l.required();resourse=l.required();key=l.required();ngOnInit(){this.indexMeta=u(d({},this.indexMeta),{endpoints:{index:`individual/${this.endpoint()}`},displayCreateButton:!1,withAction:!1,resourse:this.resourse(),indexTitle:"Individual",indexIcon:"fa-solid fa-user",createBtnLabel:this.#e("Create Individual"),indexTableKey:`${this.keyState()}_INDIVIDUAL_KEY`,columns:[{title:this.#e("name"),name:"name",searchable:!0,orderable:!1},{title:this.#e("number"),name:"number",searchable:!0,orderable:!1},{title:this.#e("whatsApp"),name:"whatsApp",searchable:!0,orderable:!1},{title:this.#e("created by"),name:"createdBy",searchable:!1,orderable:!1},{title:this.#e("Created At"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}}]}),this.initializePermissions(),this.filtersData.update(t=>u(d({},t),{[this.key()]:this.id()}))}#e(t){return this.translate.instant(t)}static \u0275fac=(()=>{let t;return function(e){return(t||(t=k(o)))(e||o)}})();static \u0275cmp=b({type:o,selectors:[["app-view-related-individual"]],inputs:{id:[1,"id"],endpoint:[1,"endpoint"],keyState:[1,"keyState"],resourse:[1,"resourse"],key:[1,"key"]},standalone:!0,features:[B,y],decls:1,vars:21,consts:[["paginatorPosition","both",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexPermission","updateBtnPermission","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows","withCustomFilters","withTableFilters"]],template:function(i,e){if(i&1&&(r(0,"app-table-wrapper",0),p("createBtnClicked",function(){return e.openCreateRecordDialog()})("updateBtnClicked",function(a){return e.openUpdateRecordDialog(a)})("deleteBtnClicked",function(a){return e.deleteRecord(a)})("onLoadData",function(a){return e.loadRecords(a)}),s()),i&2){let n,a;m("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("displayCreateButton",e.indexMeta.displayCreateButton)("columns",e.indexMeta.columns)("dataSource",e.records())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("rows",e.rows())("indexPermission",e.permissions().index)("updateBtnPermission",e.permissions().update)("withActionsColumn",e.indexMeta.withAction)("displayUpdateButton",e.indexMeta.displayUpdateButton)("displayDeleteButton",e.indexMeta.displayDeleteButton)("globalFilterValue",e.globalFilterValue)("reorderableColumns",(n=e.indexMeta.reorderableColumns)!==null&&n!==void 0?n:!1)("reorderableRows",(a=e.indexMeta.reorderableRows)!==null&&a!==void 0?a:!1)("withCustomFilters",!0)("withTableFilters",!1)}},dependencies:[x,U,M,E,g,C],encapsulation:2,changeDetection:0})};var pe=class o extends D{id=l.required({transform:F});endpoint=l.required();keyState=l.required();resourse=l.required();key=l.required();ngOnInit(){this.indexMeta=u(d({},this.indexMeta),{resourse:this.resourse(),endpoints:{index:`salary/${this.endpoint()}`},indexTitle:"salaries",displayCreateButton:!1,withAction:!1,indexIcon:"pi pi-money-bill",createBtnLabel:"Create salary",indexTableKey:"SALARY_KEY",columns:[{title:this.#e("Sallary"),name:"cost",searchable:!1,orderable:!0},{title:this.#e("Employer Internal"),name:"user.firstName",searchable:!1,orderable:!1},{title:this.#e("created at"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}}]}),this.initializePermissions(),this.filtersData.update(t=>u(d({},t),{[this.key()]:this.id()}))}#e(t){return this.translate.instant(t)}static \u0275fac=(()=>{let t;return function(e){return(t||(t=k(o)))(e||o)}})();static \u0275cmp=b({type:o,selectors:[["app-view-related-sallary"]],inputs:{id:[1,"id"],endpoint:[1,"endpoint"],keyState:[1,"keyState"],resourse:[1,"resourse"],key:[1,"key"]},standalone:!0,features:[B,y],decls:1,vars:23,consts:[["paginatorPosition","both",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexPermission","updateBtnPermission","createBtnPermission","deleteBtnPermission","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows","withCustomFilters","withTableFilters"]],template:function(i,e){if(i&1&&(r(0,"app-table-wrapper",0),p("createBtnClicked",function(){return e.openCreateRecordDialog()})("updateBtnClicked",function(a){return e.openUpdateRecordDialog(a)})("deleteBtnClicked",function(a){return e.deleteRecord(a)})("onLoadData",function(a){return e.loadRecords(a)}),s()),i&2){let n,a;m("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("displayCreateButton",e.indexMeta.displayCreateButton)("columns",e.indexMeta.columns)("dataSource",e.records())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("rows",e.rows())("indexPermission",e.permissions().index)("updateBtnPermission",e.permissions().update)("createBtnPermission",e.permissions().create)("deleteBtnPermission",e.permissions().delete)("withActionsColumn",e.indexMeta.withAction)("displayUpdateButton",e.indexMeta.displayUpdateButton)("displayDeleteButton",e.indexMeta.displayDeleteButton)("globalFilterValue",e.globalFilterValue)("reorderableColumns",(n=e.indexMeta.reorderableColumns)!==null&&n!==void 0?n:!1)("reorderableRows",(a=e.indexMeta.reorderableRows)!==null&&a!==void 0?a:!1)("withCustomFilters",!0)("withTableFilters",!1)}},dependencies:[x,U,M,E,g,C],encapsulation:2,changeDetection:0})};var me=class o extends D{id=l.required({transform:F});endpoint=l.required();keyState=l.required();resourse=l.required();key=l.required();ngOnInit(){this.indexMeta=u(d({},this.indexMeta),{endpoints:{index:`studentActivity/${this.endpoint()}`},displayCreateButton:!1,withAction:!1,resourse:this.resourse(),indexTitle:"Student Activity",indexIcon:"fa-solid fa-building",createBtnLabel:this.#e("Create Student Activity"),indexTableKey:`${this.keyState()}_STUDENT_KEY`,columns:[{title:this.#e("name"),name:"name",searchable:!0,orderable:!1},{title:this.#e("unviresty"),name:"unviresty",searchable:!0,orderable:!1},{title:this.#e("college"),name:"college",searchable:!0,orderable:!1},{title:this.#e("created by"),name:"createdBy",searchable:!1,orderable:!1},{title:this.#e("created at"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}}]}),this.initializePermissions(),this.filtersData.update(t=>u(d({},t),{[this.key()]:this.id()}))}#e(t){return this.translate.instant(t)}static \u0275fac=(()=>{let t;return function(e){return(t||(t=k(o)))(e||o)}})();static \u0275cmp=b({type:o,selectors:[["app-view-related-student-activity"]],inputs:{id:[1,"id"],endpoint:[1,"endpoint"],keyState:[1,"keyState"],resourse:[1,"resourse"],key:[1,"key"]},standalone:!0,features:[B,y],decls:1,vars:23,consts:[["paginatorPosition","both",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexPermission","updateBtnPermission","createBtnPermission","deleteBtnPermission","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows","withCustomFilters","withTableFilters"]],template:function(i,e){if(i&1&&(r(0,"app-table-wrapper",0),p("createBtnClicked",function(){return e.openCreateRecordDialog()})("updateBtnClicked",function(a){return e.openUpdateRecordDialog(a)})("deleteBtnClicked",function(a){return e.deleteRecord(a)})("onLoadData",function(a){return e.loadRecords(a)}),s()),i&2){let n,a;m("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("displayCreateButton",e.indexMeta.displayCreateButton)("columns",e.indexMeta.columns)("dataSource",e.records())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("rows",e.rows())("indexPermission",e.permissions().index)("updateBtnPermission",e.permissions().update)("createBtnPermission",e.permissions().create)("deleteBtnPermission",e.permissions().delete)("withActionsColumn",e.indexMeta.withAction)("displayUpdateButton",e.indexMeta.displayUpdateButton)("displayDeleteButton",e.indexMeta.displayDeleteButton)("globalFilterValue",e.globalFilterValue)("reorderableColumns",(n=e.indexMeta.reorderableColumns)!==null&&n!==void 0?n:!1)("reorderableRows",(a=e.indexMeta.reorderableRows)!==null&&a!==void 0?a:!1)("withCustomFilters",!0)("withTableFilters",!1)}},dependencies:[x,U,M,E,g,C],encapsulation:2,changeDetection:0})};var tt=["user"];function it(o,t){if(o&1&&P(0),o&2){let i=t.$implicit;q(" ",i.user.firstName+" "+i.user.lastName," ")}}var ue=class o extends D{user=j.required("user");id=l.required({transform:F});endpoint=l.required();keyState=l.required();resourse=l.required();key=l.required();ngOnInit(){this.dialogComponent=et,this.indexMeta=u(d({},this.indexMeta),{displayCreateButton:!1,withAction:!1,resourse:this.resourse(),endpoints:{index:`task/${this.endpoint()}`},indexTitle:"tasks",indexIcon:"pi pi-file",createBtnLabel:"Create task",provideFields:["note"],indexTableKey:`${this.keyState()}_TASK_KEY`,columns:[{title:this.#e("name"),name:"name",searchable:!1,orderable:!1},{title:this.#e("User"),name:"user.firstName",searchable:!1,orderable:!1,render:this.user()},{title:this.#e("created by"),name:"createdBy",searchable:!1,orderable:!1},{title:this.#e("created at"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}}]}),this.initializePermissions(),this.filtersData.update(t=>u(d({},t),{[this.key()]:this.id()}))}#e(t){return this.translate.instant(t)}static \u0275fac=(()=>{let t;return function(e){return(t||(t=k(o)))(e||o)}})();static \u0275cmp=b({type:o,selectors:[["app-view-related-task"]],viewQuery:function(i,e){i&1&&G(e.user,tt,5),i&2&&Q()},inputs:{id:[1,"id"],endpoint:[1,"endpoint"],keyState:[1,"keyState"],resourse:[1,"resourse"],key:[1,"key"]},standalone:!0,features:[B,y],decls:3,vars:23,consts:[["user",""],["paginatorPosition","both",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexPermission","updateBtnPermission","createBtnPermission","deleteBtnPermission","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows","withCustomFilters","withTableFilters"]],template:function(i,e){if(i&1){let n=T();r(0,"app-table-wrapper",1),p("createBtnClicked",function(){return h(n),f(e.openCreateRecordDialog())})("updateBtnClicked",function(_){return h(n),f(e.openUpdateRecordDialog(_))})("deleteBtnClicked",function(_){return h(n),f(e.deleteRecord(_))})("onLoadData",function(_){return h(n),f(e.loadRecords(_))}),S(1,it,1,1,"ng-template",null,0,K),s()}if(i&2){let n,a;m("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("displayCreateButton",e.indexMeta.displayCreateButton)("columns",e.indexMeta.columns)("dataSource",e.records())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("rows",e.rows())("indexPermission",e.permissions().index)("updateBtnPermission",e.permissions().update)("createBtnPermission",e.permissions().create)("deleteBtnPermission",e.permissions().delete)("withActionsColumn",e.indexMeta.withAction)("displayUpdateButton",e.indexMeta.displayUpdateButton)("displayDeleteButton",e.indexMeta.displayDeleteButton)("globalFilterValue",e.globalFilterValue)("reorderableColumns",(n=e.indexMeta.reorderableColumns)!==null&&n!==void 0?n:!1)("reorderableRows",(a=e.indexMeta.reorderableRows)!==null&&a!==void 0?a:!1)("withCustomFilters",!0)("withTableFilters",!1)}},dependencies:[x,g,C],encapsulation:2,changeDetection:0})};function at(o,t){if(o&1){let i=T();r(0,"p-button",9),p("click",function(){let n=h(i).$index,a=c(2);return f(a.setActiveIndex(n))}),s()}if(o&2){let i=t.$implicit,e=t.$index,n=c(2);m("outlined",n.activeIndex()!==e)("label",i.label)}}function rt(o,t){o&1&&ke(0)}function st(o,t){if(o&1&&S(0,rt,1,0,"ng-container",10),o&2){let i=c(2);m("ngComponentOutlet",i.filterTabs()[i.activeIndex()].component)("ngComponentOutletInputs",i.filterTabs()[i.activeIndex()].inputs)}}function lt(o,t){if(o&1&&(r(0,"div",3)(1,"div",5)(2,"div",6),ge(3,at,1,2,"p-button",7,Ce),s()(),r(5,"div",8),S(6,st,1,2,"ng-container"),s()()),o&2){let i=c();v(3),we(i.filterButton()),v(3),V(i.filterTabs()[i.activeIndex()]?6:-1)}}function dt(o,t){o&1&&(r(0,"h3",4),P(1," U Don't have Permission here "),s())}var ce=class o{#e=w(Le);#t=w(Ve);#i=w(Ue);data=this.#i.data;buttons=J(()=>[{label:"membership",visible:this.checkPermission(this.resource.AssignesMembership)},{label:"General Offers",visible:this.checkPermission(this.resource.AssignGeneralOffer)},{label:"Packages",visible:this.checkPermission(this.resource.AssignesPackage)},{label:"Orders",visible:this.checkPermission(this.resource.Order)},{label:"shared",visible:this.checkPermission(this.resource.Order)},{label:"deskarea",visible:this.checkPermission(this.resource.Deskarea)},{label:"rooms",visible:this.checkPermission(this.resource.ReservationRoom)},{label:"deals",visible:this.checkPermission(this.resource.Deals)},{label:"tasks",visible:this.checkPermission(this.resource.Task)},{label:"individual",visible:this.checkPermission(this.resource.Individual)},{label:"studentActivity",visible:this.checkPermission(this.resource.StudentActivity)},{label:"Companies",visible:this.checkPermission(this.resource.Company)},{label:"salaries",visible:this.checkPermission(this.resource.ExpensesSalaries)}]);resource=he;tabs=L([{component:Ye,visible:this.checkPermission(this.resource.AssignesMembership),inputs:{id:this.data.id,endpoint:this.data.endpoint,keyState:this.data.keyState,resourse:this.resource.AssignesMembership,key:this.data.key}},{component:ze,visible:this.checkPermission(this.resource.AssignGeneralOffer),inputs:{id:this.data.id,endpoint:this.data.endpoint,keyState:this.data.keyState,resourse:this.resource.AssignGeneralOffer,key:this.data.key}},{component:We,visible:this.checkPermission(this.resource.AssignesPackage),inputs:{id:this.data.id,endpoint:this.data.endpoint,keyState:this.data.keyState,resourse:this.resource.AssignesPackage,key:this.data.key}},{component:Xe,visible:this.checkPermission(this.resource.Order),inputs:{id:this.data.id,endpoint:this.data.endpoint,keyState:this.data.keyState,resourse:this.resource.Order,key:this.data.key}},{component:Qe,visible:this.checkPermission(this.resource.Order),inputs:{id:this.data.id,endpoint:`shared/${this.data.endpoint}`,keyState:this.data.keyState,resourse:this.resource.Shared,key:this.data.key,titleIndex:"shareds",iconIndex:"fa-solid fa-building",endpointChangeStatus:"shared/update",typeReservation:"shared",endpointStore:"shared/store",endpointUpdate:"shared/update",endpointListOffers:"global-offer-shared",provideFields:["note","start_hour","start_minute","start_time","end_hour","end_minute","end_time"]}},{component:He,visible:this.checkPermission(this.resource.Deskarea),inputs:{id:this.data.id,endpoint:`deskarea/${this.data.endpoint}`,keyState:this.data.keyState,resourse:this.resource.Deskarea,key:this.data.key,titleIndex:"deskarea",iconIndex:"fa-solid fa-building",endpointChangeStatus:"deskarea/update",typeReservation:"deskarea",endpointStore:"deskarea/store",endpointUpdate:"deskarea/update",endpointListOffers:"global-offer-deskarea",provideFields:["note","start_hour","start_minute","start_time","end_hour","end_minute","end_time"]}},{component:Ze,visible:this.checkPermission(this.resource.ReservationRoom),inputs:{id:this.data.id,endpoint:this.data.endpoint,keyState:this.data.keyState,resourse:this.resource.ReservationRoom,key:this.data.key}},{component:Je,visible:this.checkPermission(this.resource.Deals),inputs:{id:this.data.id,endpoint:this.data.endpoint,keyState:this.data.keyState,resourse:this.resource.Deals,key:this.data.key}},{component:ue,visible:this.checkPermission(this.resource.Task),inputs:{id:this.data.id,endpoint:this.data.endpoint,keyState:this.data.keyState,resourse:this.resource.Task,key:this.data.key}},{component:de,visible:this.checkPermission(this.resource.Individual),inputs:{id:this.data.id,endpoint:this.data.endpoint,keyState:this.data.keyState,resourse:this.resource.Individual,key:this.data.key}},{component:me,visible:this.checkPermission(this.resource.StudentActivity),inputs:{id:this.data.id,endpoint:this.data.endpoint,keyState:this.data.keyState,resourse:this.resource.StudentActivity,key:this.data.key}},{component:le,visible:this.checkPermission(this.resource.Company),inputs:{id:this.data.id,endpoint:this.data.endpoint,keyState:this.data.keyState,resourse:this.resource.Company,key:this.data.key}},{component:pe,visible:this.checkPermission(this.resource.ExpensesSalaries),inputs:{id:this.data.id,endpoint:this.data.endpoint,keyState:this.data.keyState,resourse:this.resource.ExpensesSalaries,key:this.data.key}}]);filterTabs=J(()=>this.tabs().filter(t=>t.visible));filterButton=J(()=>this.buttons().filter(t=>t.visible));activeIndex=L(0);setActiveIndex(t){this.activeIndex.set(t)}closeDialog(t){this.#t.close(t)}checkPermission(t){return this.#e.hasPermission(t,"index")}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=b({type:o,selectors:[["app-view-user"]],standalone:!0,features:[y],decls:7,vars:5,consts:[[1,"flex","align-items-center","justify-content-between","w-full","p-3","border-bottom-1","border-300","bg-white"],[1,"font-semibold","capitalize","text-lg","line-height-2","my-0"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"flex-shrink-0","p-button-text","p-button-plain","p-button-rounded","w-2rem","h-2rem",3,"click"],[1,"px-3","py-2"],[1,"flex","justify-content-center","h-full","capitalize","align-items-center","text-gray-400","font-bold","text-4xl"],[1,"scrollable-tabs"],[1,"flex","m-1","gap-2"],["rounded","true","styleClass","py-1 px-3 transition-none white-space-nowrap shadow-none capitalize","iconPos","right",3,"outlined","label"],[1,"mt-5"],["rounded","true","styleClass","py-1 px-3 transition-none white-space-nowrap shadow-none capitalize","iconPos","right",3,"click","outlined","label"],[4,"ngComponentOutlet","ngComponentOutletInputs"]],template:function(i,e){i&1&&(r(0,"div",0)(1,"h2",1),P(2),A(3,"translate"),s(),r(4,"button",2),p("click",function(){return e.closeDialog()}),s()(),S(5,lt,7,1,"div",3)(6,dt,2,0,"h3",4)),i&2&&(v(2),Be(" ",N(3,3,"History Of ")," ",e.data.firstName+" "+e.data.lastName," "),v(3),V(e.filterButton().length?5:6))},dependencies:[C,Z,$e,g,$,te,M,Me],styles:[".scrollable-tabs[_ngcontent-%COMP%]{width:100%;padding-bottom:10px;overflow-x:auto;scrollbar-width:thin}.scrollable-tabs[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}"],changeDetection:0})};var pt=["viewUser"],mt=["switch"];function ut(o,t){if(o&1){let i=T();r(0,"button",9),p("click",function(){h(i);let n=c(2).$implicit,a=c();return f(a.openUpdateRecordDialog(n))}),s()}o&2&&m("icon","pi pi-pencil text-xs")}function ct(o,t){if(o&1&&S(0,ut,1,1,"button",8),o&2){let i=c(2);m("appHasPermission",i.permissions().update)}}function ht(o,t){if(o&1){let i=T();r(0,"app-confirm",13),p("acceptAction",function(){h(i);let n=c(3).$implicit,a=c();return f(a.deleteRecord(n))}),s()}}function ft(o,t){if(o&1&&S(0,ht,1,0,"app-confirm",12),o&2){let i=c(3);m("appHasPermission",i.permissions().delete)}}function _t(o,t){if(o&1){let i=T();r(0,"button",14),A(1,"translate"),p("click",function(){h(i);let n=c(2).$implicit,a=c();return f(a.openUpdateUserPermissionsDialog(n))}),s()}o&2&&m("pTooltip",N(1,1,"Update User Permissions"))}function bt(o,t){if(o&1&&S(0,ft,1,1,"app-confirm",10)(1,_t,2,3,"button",11),o&2){let i=c(2);V(i.indexMeta.displayDeleteButton?0:-1),v(),m("appHasPermission",i.permissions()["update-permissions"])}}function yt(o,t){if(o&1){let i=T();r(0,"button",15),p("click",function(){h(i);let n=c().$implicit,a=c();return f(a.showMessage(n.orders[0].order_price))}),s()}}function Ct(o,t){if(o&1){let i=T();S(0,ct,1,1,"button",4)(1,bt,2,2,"button",5)(2,yt,1,0,"button",6),r(3,"button",7),p("click",function(){let n=h(i).$implicit,a=c();return f(a.navigateToPOS(n))}),s()}if(o&2){let i,e=t.$implicit,n=c();V(n.indexMeta.displayUpdateButton?0:-1),v(),V(((i=n.currentUser())==null?null:i.id)!==e.id?1:-1),v(),V(e.orders!=null&&e.orders.length?2:-1)}}function gt(o,t){if(o&1){let i=T();r(0,"p-button",16),p("onClick",function(){let n=h(i).$implicit,a=c();return f(a.viewDialog(n))}),s()}if(o&2){let i=t.$implicit;m("label",i.firstName+" "+i.lastName)("link",!0)}}function wt(o,t){if(o&1){let i=T();r(0,"p-inputSwitch",18),p("onChange",function(n){h(i);let a=c().$implicit,_=c();return f(_.changeStatus(a,n))}),Te("ngModelChange",function(n){h(i);let a=c().$implicit;return Se(a.status,n)||(a.status=n),f(n)}),s()}if(o&2){let i,e=c().$implicit,n=c();m("disabled",((i=n.currentUser())==null?null:i.id)===e.id),ve("ngModel",e.status)}}function kt(o,t){o&1&&P(0," Can't Inactive Technical Support ")}function Bt(o,t){if(o&1&&S(0,wt,1,2,"p-inputSwitch",17)(1,kt,1,0),o&2){let i=t.$implicit;V((i==null?null:i.role)!=="technical-support"?0:1)}}var _e=class o extends D{posService=w(Ge);router=w(De);viewUser=j.required("viewUser");switch=j.required("switch");currentLang=w(je).currentLanguage;confirmationService=w(Pe);showMessage(t){this.confirmationService.confirm({message:`There Is Order From Kitchen You Must Pay It , Total Price is : ${t} EG`,header:this.translate.instant("message"),icon:"pi pi-envelope",acceptVisible:!1,rejectVisible:!1,rejectButtonStyleClass:"p-button-text"})}navigateToPOS(t){this.posService.setCustomerId.set(t?.id),this.posService.setCustomerType.set("employed"),this.router.navigate(["/pos"],{queryParams:{userData:JSON.stringify({id:t?.id,type:"employed"})}})}ngOnInit(){this.clearCachingLists.set(["user/index"]),this.dialogComponent=ae,this.viewDialogComponent=ce,this.indexMeta=u(d({},this.indexMeta),{provideFields:["role","permission","lastName"],displayDeleteButton:this.currentUser()?.role==="technical-support",displayUpdateButton:this.currentUser()?.role==="technical-support",endpoints:{index:"user/index",delete:"user/delete"},indexTitle:"Users",resourse:"settings-user",indexIcon:"fa-solid fa-building",createBtnLabel:"Create Users",indexTableKey:"USERS_KEY",columns:[{title:this.#e("Full Name"),name:"firstName",searchable:!0,orderable:!1,render:this.viewUser()},{title:this.#e("email"),name:"email",searchable:!0,orderable:!1},{title:this.#e("username"),name:"username",searchable:!0,orderable:!1},{title:this.#e("number"),name:"phone",searchable:!0,orderable:!1},{title:this.#e("status"),name:"status",searchable:!1,orderable:!1,render:this.switch()},{title:this.#e("created at"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}}]}),this.initializePermissions(),this.permissions.update(t=>u(d({},t),{"update-permissions":this.userPermission.hasPermission(this.indexMeta.resourse,"update-permissions")}))}openUpdateUserPermissionsDialog(t){let i=u(d({},this.dialogConfig),{width:"500px",data:t});this.dialogRef=this.dialogService.open(se,i),this.dialogRef.onClose.pipe(ee(this.destroyRef)).subscribe(e=>{e&&(this.records.update(n=>n.map(a=>a.id===e.id?d(d({},a),e):a)),this.clearCachingLists.update(n=>[...n,`permission-list-${e.id}`]),this.cacheFilters.deleteAnotherCacheEndPoint(this.clearCachingLists()))})}changeStatus(t,i){this.api.request("post","user/update",{status:i.checked,id:t.id}).subscribe(()=>{this.cacheFilters.deleteAnotherCacheEndPoint(this.clearCachingLists())})}viewDialog(t){super.viewDialog(t,{endpoint:"user",keyState:"USER",key:"user_id"})}#e(t){return this.translate.instant(t)}static \u0275fac=(()=>{let t;return function(e){return(t||(t=k(o)))(e||o)}})();static \u0275cmp=b({type:o,selectors:[["app-users"]],viewQuery:function(i,e){i&1&&(G(e.viewUser,pt,5),G(e.switch,mt,5)),i&2&&Q(2)},standalone:!0,features:[B,y],decls:7,vars:22,consts:[["actionsTemplate",""],["viewUser",""],["switch",""],["paginatorPosition","both",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexPermission","updateBtnPermission","createBtnPermission","deleteBtnPermission","placeholderSearch","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows"],["pButton","","pRipple","",1,"p-button-rounded","p-button-text","p-button-sm",3,"icon"],["pButton","","icon","fas fa-user-shield text-sm","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",3,"pTooltip"],["pButton","","pRipple","","icon","pi pi-exclamation-circle text-xs","tooltipPosition","top","pTooltip","Note order from kitchen",1,"p-button-rounded","p-button-text","p-button-sm"],["pButton","","pRipple","","icon","fa-solid fa-kitchen-set text-sm","tooltipPosition","top","pTooltip","Kitchen",1,"p-button-rounded","p-button-text","p-button-sm",3,"click"],["pButton","","pRipple","","class","p-button-rounded p-button-text p-button-sm",3,"icon","click",4,"appHasPermission"],["pButton","","pRipple","",1,"p-button-rounded","p-button-text","p-button-sm",3,"click","icon"],["icon","fas fa-trash text-xs","buttonClass","p-button-sm p-button-rounded p-button-text p-button-danger"],["pButton","","icon","fas fa-user-shield text-sm","class","p-button-rounded p-button-text p-button-sm","tooltipPosition","top",3,"pTooltip","click",4,"appHasPermission"],["icon","fas fa-trash text-xs","buttonClass","p-button-sm p-button-rounded p-button-text p-button-danger",3,"acceptAction",4,"appHasPermission"],["icon","fas fa-trash text-xs","buttonClass","p-button-sm p-button-rounded p-button-text p-button-danger",3,"acceptAction"],["pButton","","icon","fas fa-user-shield text-sm","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",3,"click","pTooltip"],["pButton","","pRipple","","icon","pi pi-exclamation-circle text-xs","tooltipPosition","top","pTooltip","Note order from kitchen",1,"p-button-rounded","p-button-text","p-button-sm",3,"click"],[3,"onClick","label","link"],["trueValue","active","falseValue","inactive",3,"disabled","ngModel"],["trueValue","active","falseValue","inactive",3,"onChange","ngModelChange","disabled","ngModel"]],template:function(i,e){if(i&1){let n=T();r(0,"app-table-wrapper",3),p("createBtnClicked",function(){return h(n),f(e.openCreateRecordDialog())})("updateBtnClicked",function(_){return h(n),f(e.openUpdateRecordDialog(_))})("deleteBtnClicked",function(_){return h(n),f(e.deleteRecord(_))})("onLoadData",function(_){return h(n),f(e.loadRecords(_))}),S(1,Ct,4,3,"ng-template",null,0,K)(3,gt,1,2,"ng-template",null,1,K)(5,Bt,2,1,"ng-template",null,2,K),s()}if(i&2){let n,a;m("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("displayCreateButton",e.indexMeta.displayCreateButton)("columns",e.indexMeta.columns)("dataSource",e.records())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("rows",e.rows())("indexPermission",e.permissions().index)("updateBtnPermission",e.permissions().update)("createBtnPermission",e.permissions().create)("deleteBtnPermission",e.permissions().delete)("placeholderSearch",e.indexMeta.placeholderSearch)("withActionsColumn",e.indexMeta.withAction)("displayUpdateButton",e.indexMeta.displayUpdateButton)("displayDeleteButton",e.indexMeta.displayDeleteButton)("globalFilterValue",e.globalFilterValue)("reorderableColumns",(n=e.indexMeta.reorderableColumns)!==null&&n!==void 0?n:!1)("reorderableRows",(a=e.indexMeta.reorderableRows)!==null&&a!==void 0?a:!1)}},dependencies:[x,U,xe,Re,M,Fe,Ee,Ne,g,$,te,Oe,Ae,C,Z],encapsulation:2,changeDetection:0})};export{_e as default};
