import{a as H}from"./chunk-AQWO3IYN.js";import{$ as W,E as q,Ea as Y,Sa as G,_ as Q,ca as $,da as j,nb as M,v as U,z as K}from"./chunk-AA67JPLF.js";import{A as z,C as O}from"./chunk-LBHIXMIT.js";import"./chunk-R2AUDRXA.js";import"./chunk-JXG4LUU7.js";import"./chunk-AHOHCUBB.js";import{Bb as d,Cc as C,Gb as v,Kb as m,Lb as u,Qb as c,Tb as _,Ub as l,Xb as L,ac as B,bc as I,db as R,dc as h,fc as T,ia as V,ic as P,jc as E,kc as A,mc as N,nb as y,ob as b,qb as F,ua as s,va as r,wb as x,xc as w,ya as S,yc as k}from"./chunk-PLVIENQC.js";import{a as f,b as g}from"./chunk-5KTCK5IS.js";var J=["user"],X=["status"];function Z(n,a){if(n&1){let t=c();m(0,"div",5)(1,"p-dropdown",6),w(2,"translate"),_("onChange",function(i){s(t);let o=l();return r(o.filter(i,"status"))}),u()()}if(n&2){let t=l();R(),L("placeholder",k(2,3,"Select status Task")),d("options",t.filterStatusList())("filter",!0)}}function ee(n,a){if(n&1&&h(0),n&2){let t=a.$implicit;T(" ",t.user.firstName+" "+t.user.lastName," ")}}function te(n,a){if(n&1){let t=c();m(0,"button",7),_("click",function(){let i=s(t).$implicit,o=l();return r(o.openUpdateRecordDialog(i))}),u()}n&2&&d("icon","pi pi-eye text-xs")}function ne(n,a){n&1&&(h(0),w(1,"translate")),n&2&&T(" ",k(1,1,"complete")," ")}function ie(n,a){n&1&&(h(0),w(1,"translate")),n&2&&T(" ",k(1,1,"cancelled")," ")}function ae(n,a){if(n&1){let t=c();m(0,"p-dropdown",9),A("ngModelChange",function(i){s(t);let o=l().$implicit;return E(o.status,i)||(o.status=i),r(i)}),_("onChange",function(i){s(t);let o=l().$implicit,p=l();return r(p.changeStatus(o.id,i))}),u()}if(n&2){let t=l().$implicit,e=l();d("options",e.statusList()),P("ngModel",t.status)}}function oe(n,a){if(n&1&&x(0,ne,2,3)(1,ie,2,3)(2,ae,1,2,"p-dropdown",8),n&2){let t=a.$implicit;v(t.status==="complete"?0:t.status==="cancelled"?1:2)}}var D=class n extends Y{user=b.required("user");status=b.required("status");statusList=y(M);filterStatusList=y([{label:"all",value:null},...M]);ngOnInit(){this.dialogComponent=H,this.indexMeta=g(f({},this.indexMeta),{resourse:"tasks",endpoints:{index:"task/index",delete:"task/delete"},indexTitle:"tasks",indexIcon:"pi pi-file",createBtnLabel:"Create task",provideFields:["note"],indexTableKey:"TASK_KEY",columns:[{name:"id",title:this.#e("#ID"),searchable:!1,orderable:!1},{title:this.#e("name"),name:"name",searchable:!0,orderable:!1},{name:"status",title:this.#e("status"),searchable:!1,orderable:!1,render:this.status()},{title:this.#e("User"),name:"user.firstName",searchable:!1,orderable:!1,render:this.user()},{title:this.#e("created by"),name:"createdBy",searchable:!1,orderable:!1},{title:this.#e("created at"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}}]}),this.initializePermissions()}filter(a,t){this.filtersData.update(e=>g(f({},e),{customFilters:a.value?{[t]:a.value}:null}))}changeStatus(a,t){this.confirmService.confirmDelete({acceptCallback:()=>{this.api.request("post","task/update",{status:t.value,id:a}).subscribe(()=>{this.cacheFilters.deleteAnotherCacheEndPoint(this.clearCachingLists())})},rejectCallback:()=>{this.records.update(e=>e.map(i=>i.id===a?g(f({},i),{status:i.status}):i))}})}#e(a){return this.translate.instant(a)}static \u0275fac=(()=>{let a;return function(e){return(a||(a=S(n)))(e||n)}})();static \u0275cmp=V({type:n,selectors:[["app-tasks"]],viewQuery:function(t,e){t&1&&(B(e.user,J,5),B(e.status,X,5)),t&2&&I(2)},standalone:!0,features:[F,N],decls:9,vars:23,consts:[["additionalContentTemplate",""],["user",""],["actionsTemplate",""],["status",""],["paginatorPosition","both",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexPermission","updateBtnPermission","createBtnPermission","deleteBtnPermission","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows","withCustomFilters","withAdditionalContent"],[1,"flex-order-2"],["styleClass","py-1 pl-2 shadow-none w-14rem",3,"onChange","options","filter","placeholder"],["pButton","","pRipple","",1,"p-button-rounded","p-button-text","p-button-sm",3,"click","icon"],["styleClass","py-1 pl-2 shadow-none","appendTo","body",3,"options","ngModel"],["styleClass","py-1 pl-2 shadow-none","appendTo","body",3,"ngModelChange","onChange","options","ngModel"]],template:function(t,e){if(t&1){let i=c();m(0,"app-table-wrapper",4),_("createBtnClicked",function(){return s(i),r(e.openCreateRecordDialog())})("updateBtnClicked",function(p){return s(i),r(e.openUpdateRecordDialog(p))})("deleteBtnClicked",function(p){return s(i),r(e.deleteRecord(p))})("onLoadData",function(p){return s(i),r(e.loadRecords(p))}),x(1,Z,3,5,"ng-template",null,0,C)(3,ee,1,1,"ng-template",null,1,C)(5,te,1,1,"ng-template",null,2,C)(7,oe,3,1,"ng-template",null,3,C),u()}if(t&2){let i,o;d("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("displayCreateButton",e.indexMeta.displayCreateButton)("columns",e.indexMeta.columns)("dataSource",e.records())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("rows",e.rows())("indexPermission",e.permissions().index)("updateBtnPermission",e.permissions().update)("createBtnPermission",e.permissions().create)("deleteBtnPermission",e.permissions().delete)("withActionsColumn",e.indexMeta.withAction)("displayUpdateButton",e.indexMeta.displayUpdateButton)("displayDeleteButton",e.indexMeta.displayDeleteButton)("globalFilterValue",e.globalFilterValue)("reorderableColumns",(i=e.indexMeta.reorderableColumns)!==null&&i!==void 0?i:!1)("reorderableRows",(o=e.indexMeta.reorderableRows)!==null&&o!==void 0?o:!1)("withCustomFilters",!0)("withAdditionalContent",!0)}},dependencies:[j,$,W,Q,q,U,K,G,O,z],encapsulation:2,changeDetection:0})};export{D as default};
