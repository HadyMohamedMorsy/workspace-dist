import{D as ne,Ea as me,Xa as de,ab as ue,ba as M,d as H,ga as le,ha as se,n as J,o as X,qa as pe,r as Z,u as ee,w as te,y as ie}from"./chunk-B2YRLTHG.js";import{A as ae,C as re}from"./chunk-VGJJ4SUB.js";import"./chunk-NU2CE2PW.js";import{c as oe,d as b}from"./chunk-DBWXYH2V.js";import"./chunk-R2AUDRXA.js";import"./chunk-JXG4LUU7.js";import{q as $}from"./chunk-Y2JJNTGM.js";import{Bb as m,C as T,Cc as I,Kb as r,Lb as l,Mb as G,Nb as A,Ob as K,Qb as L,Tb as D,Ub as N,W as k,ac as j,bc as O,db as p,dc as g,ea as F,fc as v,ia as u,ic as W,jc as q,kc as z,mc as C,ob as E,oc as Q,pb as U,qb as w,r as x,ua as c,va as f,wb as Y,xc as y,ya as B,yc as h}from"./chunk-I6HS2BDL.js";import{a,b as d}from"./chunk-5KTCK5IS.js";var P=class n{#e=F(M);filtersData=U();model={};form=new X({});options={};fields=[this.#e.fieldBuilder([{key:"customFilters.start_date",type:"date-field",className:"md:col-3 col-12",props:{format:"YYYY-MM-DD",label:"start date"},hooks:{onInit:i=>i.formControl?.valueChanges.pipe(T(t=>!!t),k(()=>{this.filtersData.update(t=>a(a({},t),this.model))}))}},{key:"customFilters.end_date",type:"date-field",className:"md:col-3 col-12",props:{format:"YYYY-MM-DD",label:"end date"},hooks:{onInit:i=>i.formControl?.valueChanges.pipe(T(t=>!!t),k(()=>{this.filtersData.update(t=>a(a({},t),this.model))}))}}])];static \u0275fac=function(t){return new(t||n)};static \u0275cmp=u({type:n,selectors:[["app-filter-revenue-place"]],inputs:{filtersData:[1,"filtersData"]},outputs:{filtersData:"filtersDataChange"},standalone:!0,features:[C],decls:5,vars:8,consts:[[1,"text-base","capitalize","font-medium","mb-3"],[3,"formGroup"],[3,"model","fields","form","options"]],template:function(t,e){t&1&&(r(0,"h1",0),g(1),y(2,"translate"),l(),r(3,"form",1),G(4,"formly-form",2),l()),t&2&&(p(),v(" ",h(2,6,"Filters revenue")," : "),p(2),m("formGroup",e.form),p(),m("model",e.model)("fields",e.fields)("form",e.form)("options",e.options))},dependencies:[ne,ie,te,Z,J,ee,b,oe],encapsulation:2,changeDetection:0})};var R=class{id;name;type;constructor(i){this.id=i?.id||null,this.name=i?.name||null,this.type=i?.type||"static"}};var S=class n extends se{#e=F(M);#t=F(ue).getGlobalList(["revenue"]);ngOnInit(){this.dialogMeta=d(a({},this.dialogMeta),{dialogData$:this.#t,endpoints:{store:"revenue/store",update:"revenue/update"}}),this.editData?(this.dialogMeta=d(a({},this.dialogMeta),{dialogTitle:this.translate.instant("Update Revenue"),submitButtonLabel:this.translate.instant("Update Revenue")}),this.model=new R(this.editData)):(this.dialogMeta=d(a({},this.dialogMeta),{dialogTitle:this.translate.instant("Create Revenue"),submitButtonLabel:this.translate.instant("Create Revenue")}),this.model=new R),this.fields=this.configureFields()}configureFields(){return[{key:"type",type:"radio-field",props:{label:"type",options:[{label:"static",value:"static"},{label:"dynamic",value:"dynamic"}]}},this.#e.fieldBuilder([{key:"name",type:"select-field",className:"md:col-4 col-12",expressions:{hide:({model:i})=>i?.type!=="static"},props:{isFloatedLabel:!0,label:"Revenue Name",options:this.#t.pipe(x(({revenue:i})=>i))}},{key:"name",type:"floated-input-field",className:"md:col-4 col-12",expressions:{hide:({model:i})=>i?.type!=="dynamic"},props:{label:"name",required:!0}}])]}static \u0275fac=(()=>{let i;return function(e){return(i||(i=B(n)))(e||n)}})();static \u0275cmp=u({type:n,selectors:[["app-revenue-dialog"]],standalone:!0,features:[w,C],decls:7,vars:11,consts:[[3,"onSubmit","form","model","fields","options","showSubmitButton","buttonLabel","isFiledsLoaded","submitBtnLoading"],["ngProjectAs","[header]",5,["","header",""]],[1,"flex","align-items-center","justify-content-between","w-full","p-3","border-bottom-1","border-300","bg-white"],[1,"font-semibold","capitalize","text-lg","line-height-2","my-0"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"flex-shrink-0","p-button-text","p-button-plain","p-button-rounded","w-2rem","h-2rem",3,"click"]],template:function(t,e){t&1&&(r(0,"app-form",0),y(1,"async"),D("onSubmit",function(){return e.createUpdateRecord(e.dialogMeta.endpoints)}),A(2,1),r(3,"div",2)(4,"h2",3),g(5),l(),r(6,"button",4),D("click",function(){return e.closeDialog()}),l()(),K(),l()),t&2&&(m("form",e.createUpdateForm)("model",e.model)("fields",e.fields)("options",e.options)("showSubmitButton",e.dialogMeta.showSubmitButton)("buttonLabel",e.dialogMeta.submitButtonLabel)("isFiledsLoaded",h(1,9,e.dialogMeta.dialogData$))("submitBtnLoading",e.isLoading()),p(5),v(" ",e.dialogMeta.dialogTitle," "))},dependencies:[$,b,re,ae,le],encapsulation:2,changeDetection:0})};var ge=["revenueName"],ve=n=>[n];function Ce(n,i){if(n&1){let t=L();r(0,"app-filter-revenue-place",3),z("filtersDataChange",function(o){c(t);let s=N();return q(s.filtersData,o)||(s.filtersData=o),f(o)}),l()}if(n&2){let t=N();W("filtersData",t.filtersData)}}function ye(n,i){if(n&1&&(r(0,"a",4),g(1),y(2,"formatString"),l()),n&2){let t=i.$implicit;m("routerLink",Q(4,ve,"/revenue/"+t.id)),p(),v(" ",h(2,2,t.name)," ")}}var V=class n extends pe{revenueName=E.required("revenueName");ngOnInit(){this.dialogComponent=S,this.indexMeta=d(a({},this.indexMeta),{resourse:"settings-revenue",endpoints:{index:"revenue/index",delete:"revenue/delete"},indexTitle:"Revenues",indexIcon:"pi pi-money-bill",createBtnLabel:"Create Revenue",indexTableKey:"REVENUE_KEY",columns:[{title:this.#e("name"),name:"name",searchable:!0,orderable:!1,render:this.revenueName()},{title:this.#e("Total Income"),name:"total",searchable:!1,orderable:!0},{title:this.#e("created at"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}}]}),this.initializePermissions()}#e(i){return this.translate.instant(i)}static \u0275fac=(()=>{let i;return function(e){return(i||(i=B(n)))(e||n)}})();static \u0275cmp=u({type:n,selectors:[["app-revenue"]],viewQuery:function(t,e){t&1&&j(e.revenueName,ge,5),t&2&&O()},standalone:!0,features:[w,C],decls:5,vars:22,consts:[["customFiltersTemplate",""],["revenueName",""],["paginatorPosition","both",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexPermission","updateBtnPermission","createBtnPermission","deleteBtnPermission","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows","withCustomFilters"],[3,"filtersDataChange","filtersData"],[1,"table-link-title",3,"routerLink"]],template:function(t,e){if(t&1){let o=L();r(0,"app-table-wrapper",2),D("createBtnClicked",function(){return c(o),f(e.openCreateRecordDialog())})("updateBtnClicked",function(_){return c(o),f(e.openUpdateRecordDialog(_))})("deleteBtnClicked",function(_){return c(o),f(e.deleteRecord(_))})("onLoadData",function(_){return c(o),f(e.loadRecords(_))}),Y(1,Ce,1,1,"ng-template",null,0,I)(3,ye,3,6,"ng-template",null,1,I),l()}if(t&2){let o,s;m("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("displayCreateButton",e.indexMeta.displayCreateButton)("columns",e.indexMeta.columns)("dataSource",e.records())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("rows",e.rows())("indexPermission",e.permissions().index)("updateBtnPermission",e.permissions().update)("createBtnPermission",e.permissions().create)("deleteBtnPermission",e.permissions().delete)("withActionsColumn",e.indexMeta.withAction)("displayUpdateButton",e.indexMeta.displayUpdateButton)("displayDeleteButton",e.indexMeta.displayDeleteButton)("globalFilterValue",e.globalFilterValue)("reorderableColumns",(o=e.indexMeta.reorderableColumns)!==null&&o!==void 0?o:!1)("reorderableRows",(s=e.indexMeta.reorderableRows)!==null&&s!==void 0?s:!1)("withCustomFilters",!0)}},dependencies:[b,me,P,de,H],encapsulation:2,changeDetection:0})};export{V as default};
