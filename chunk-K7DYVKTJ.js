import{a as ue}from"./chunk-7PWCODBA.js";import{Ba as v,Ca as F,Da as ae,Ea as le,Fa as re,Ra as pe,da as $,ea as ee,ha as te,ia as ie,k as z,la as ne,ma as M,t as J,ta as oe,ua as S,v as Q,y as Z}from"./chunk-TBA4VMVE.js";import"./chunk-R2AUDRXA.js";import{Fb as a,Gb as l,Hb as k,Ib as G,Jb as O,Lb as E,Mb as h,Nb as C,Qb as L,T as W,W as K,Yb as j,_b as X,ac as R,ad as H,bc as V,cb as u,cc as I,da as b,ec as T,ha as w,mb as A,pb as x,pc as r,qc as p,ta as d,tb as q,tc as Y,ua as m,wb as c,xa as B}from"./chunk-L5VXCLI3.js";import{a as y,b as f,e as U,i as me}from"./chunk-5KTCK5IS.js";var se=me(ue());var _=class{id;name;phone;city;address;whatsApp;website;facebook;instagram;company_type;linkedin;holders;constructor(t){this.id=t?.id||null,this.name=t?.name||null,this.phone=t?.phone||null,this.city=t?.city||null,this.address=t?.address||null,this.whatsApp=t?.whatsApp||null,this.company_type=t?.company_type||"General",this.website=t?.website||null,this.facebook=t?.facebook||null,this.instagram=t?.instagram||null,this.linkedin=t?.linkedin||null,this.holders=t?.holders||[null]}};var D=class s extends le{#e=b(oe);#t=b(S);ngOnInit(){this.dialogMeta=f(y({},this.dialogMeta),{endpoints:{store:"company/store",update:"company/update"}}),this.editData?(this.dialogMeta=f(y({},this.dialogMeta),{dialogTitle:this.translate.instant("Update Company"),submitButtonLabel:this.translate.instant("Update Company")}),this.model=new _(this.editData)):(this.dialogMeta=f(y({},this.dialogMeta),{dialogTitle:this.translate.instant("Create Company"),submitButtonLabel:this.translate.instant("Create Company")}),this.model=new _),this.fields=this.configureFields()}configureFields(){return[{fieldGroup:[{type:"separator-field",props:{title:this.translate.instant("Information Company"),icon:"fa-solid fa-info"}},this.#e.fieldBuilder([{key:"name",type:"floated-input-field",props:{label:"name",required:!0}},{key:"company_type",type:"select-field",props:{isFloatedLabel:!0,required:!0,label:"Select Company Type",placeholder:"Select Company Type",options:this.#t.typeCompany}}]),this.#e.fieldBuilder([{key:"whatsApp",type:"input-group-field",props:{type:"number",placeholder:"whatsApp",icon:"pi pi-whatsapp"}},{key:"phone",type:"input-group-field",props:{type:"number",placeholder:"Number",icon:"pi pi-phone"}},{key:"city",type:"select-field",props:{filter:!0,isFloatedLabel:!0,required:!0,label:"Select City",placeholder:"Select City",options:this.#t.city}}]),this.#e.fieldBuilder([{key:"address",type:"textarea-field",props:{label:"Address",placeholder:"Address"}}])]},{template:'<div class="border-1 border-200 -mt-3"></div>',className:"col-12"},{fieldGroup:[{type:"separator-field",props:{title:this.translate.instant("Social Media Company"),icon:"fa-solid fa-globe"}},this.#e.fieldBuilder([{key:"facebook",type:"input-group-field",props:{placeholder:"facebook",icon:"fa-brands fa-facebook"}},{key:"website",type:"input-group-field",props:{placeholder:"website",icon:"pi pi-globe"}}]),this.#e.fieldBuilder([{key:"instagram",type:"input-group-field",props:{placeholder:"instagram",icon:"pi pi-instagram"}},{key:"linkedin",type:"input-group-field",props:{placeholder:"linkedin",icon:"pi pi-linkedin"}}])]},{template:'<div class="border-1 border-200 -mt-3"></div>',className:"col-12"},{fieldGroup:[{type:"separator-field",props:{title:this.translate.instant("Holders Company"),icon:"fa-solid fa-users"}},this.#e.fieldBuilder([{key:"holders",type:"repeat-field",props:{addBtnText:"Add Holders",disabledRepeater:!1},hooks:{onInit:t=>t.formControl?.valueChanges.pipe(W(t.model),K(i=>{if(t.props)return i.length===4?t.props.disabledRepeater=!0:t.props.disabledRepeater=!1}))},fieldArray:this.#e.fieldBuilder([{key:"name",type:"floated-input-field",props:{label:"name holder",required:!0}},{key:"number",type:"input-group-field",props:{type:"number",placeholder:"number",icon:"pi pi-phone",required:!0}},{key:"whatsApp",type:"input-group-field",props:{type:"number",placeholder:"whatsApp",icon:"pi pi-whatsapp",required:!0}}])}])]}]}static \u0275fac=(()=>{let t;return function(e){return(t||(t=B(s)))(e||s)}})();static \u0275cmp=w({type:s,selectors:[["app-company-dialog"]],standalone:!0,features:[x,T],decls:7,vars:11,consts:[[3,"onSubmit","form","model","fields","options","showSubmitButton","buttonLabel","isFiledsLoaded","submitBtnLoading"],["ngProjectAs","[header]",5,["","header",""]],[1,"flex","align-items-center","justify-content-between","w-full","p-3","border-bottom-1","border-300","bg-white"],[1,"font-semibold","capitalize","text-lg","line-height-2","my-0"],["pButton","","pRipple","","icon","pi pi-times",1,"flex-shrink-0","p-button-text","p-button-plain","p-button-rounded","w-2rem","h-2rem",3,"click"]],template:function(i,e){i&1&&(a(0,"app-form",0),r(1,"async"),h("onSubmit",function(){return e.createUpdateRecord(e.dialogMeta.endpoints)}),G(2,1),a(3,"div",2)(4,"h2",3),j(5),l(),a(6,"button",4),h("click",function(){return e.closeDialog()}),l()(),O(),l()),i&2&&(c("form",e.createUpdateForm)("model",e.model)("fields",e.fields)("options",e.options)("showSubmitButton",e.dialogMeta.showSubmitButton)("buttonLabel",e.dialogMeta.submitButtonLabel)("isFiledsLoaded",p(1,9,e.dialogMeta.dialogData$))("submitBtnLoading",e.isLoading()),u(5),X(" ",e.dialogMeta.dialogTitle," "))},dependencies:[H,M,F,v,ae],encapsulation:2,changeDetection:0})};function he(s,t){if(s&1){let i=E();a(0,"div",10)(1,"p-dropdown",11),r(2,"translate"),I("ngModelChange",function(n){d(i);let o=C();return V(o.selectedType,n)||(o.selectedType=n),m(n)}),h("onChange",function(n){d(i);let o=C();return m(o.filterByType(n))}),l()(),a(3,"div",12)(4,"p-dropdown",11),r(5,"translate"),I("ngModelChange",function(n){d(i);let o=C();return V(o.selectedCity,n)||(o.selectedCity=n),m(n)}),h("onChange",function(n){d(i);let o=C();return m(o.filterByCity(n))}),l()()}if(s&2){let i=C();u(),L("placeholder",p(2,6,"Select a Company Type")),c("options",i.optionsTypes()),R("ngModel",i.selectedType),u(3),L("placeholder",p(5,8,"Select City")),c("options",i.optionsCities()),R("ngModel",i.selectedCity)}}var P=class s extends re{staticData=b(S);selectedType="company";selectedCity="";optionsTypes=A([]);optionsCities=A([]);exportColumns;ngOnInit(){this.optionsTypes.set([{label:this.#e("All"),value:"all"},...this.staticData.typeCompany]),this.optionsCities.set([{label:this.#e("All"),value:"all"},...this.staticData.city]),this.dialogComponent=D,this.indexMeta=f(y({},this.indexMeta),{provideFields:["website","facebook","instagram","linkedin","holders","address"],endpoints:{index:"company/index",delete:"company/delete"},indexTitle:"Companies",indexIcon:"fa-solid fa-building",createBtnLabel:"Create Company",indexTableKey:"COMPANY_KEY",columns:[{title:this.#e("name"),name:"name",searchable:!0,orderable:!1},{title:this.#e("phone"),name:"phone",searchable:!0,orderable:!1},{title:this.#e("whatsApp"),name:"whatsApp",searchable:!0,orderable:!1},{title:this.#e("company type"),name:"company_type",searchable:!1,orderable:!1},{title:this.#e("city"),name:"city",searchable:!1,orderable:!1},{title:this.#e("created at"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy"}}]}),this.exportColumns=this.indexMeta.columns.map(t=>({title:t.title,dataKey:t.name}))}exportPdf(){import("./chunk-NV6VTVJE.js").then(t=>{import("./chunk-PAHSF4GP.js").then(i=>{let e=new t.default("p","px","a4");e.autoTable(this.exportColumns,this.records()),e.save("records.pdf")})})}exportExcel(){import("./chunk-4VY6OIZS.js").then(t=>{let i=this.records().map(xe=>{var N=xe,{website:g,instagram:ge,linkedin:Ce,facebook:be,holders:_e,company_type:we,address:Be}=N,de=U(N,["website","instagram","linkedin","facebook","holders","company_type","address"]);return de}),n={Sheets:{data:t.utils.json_to_sheet(i)},SheetNames:["data"]},o=t.write(n,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(o,"records")})}saveAsExcelFile(t,i){let e="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",n=".xlsx",o=new Blob([t],{type:e});se.default.saveAs(o,i+"_export_"+new Date().getTime()+n)}filterByType(t){this.filtersData.update(i=>f(y({},i),{customFilters:t.value!=="all"?f(y({},i.customFilters),{company_type:t.value}):null}))}filterByCity(t){this.filtersData.update(i=>f(y({},i),{customFilters:t.value!=="all"?f(y({},i.customFilters),{city:t.value}):null}))}#e(t){return this.translate.instant(t)}static \u0275fac=(()=>{let t;return function(e){return(t||(t=B(s)))(e||s)}})();static \u0275cmp=w({type:s,selectors:[["app-company"]],standalone:!0,features:[x,T],decls:21,vars:43,consts:[["additionalContentTemplate",""],[1,"flex","gap-2","mb-4"],["type","button","pButton","","icon","pi pi-file-excel text-xs","tooltipPosition","top",1,"text-xs","py-1","px-3",3,"click","label","pTooltip"],["type","button","pButton","","icon","pi pi-file-pdf text-xs","tooltipPosition","top",1,"text-xs","bg-pink","border-pink","py-1","px-3",3,"click","label","pTooltip"],["paginatorPosition","both","placeholderSearch","Search Name Or Phone",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexRole","updateBtnRole","createBtnRole","deleteBtnRole","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows","withAdditionalContent"],["moreActions",""],[1,"list-none","m-0","p-0","flex","flex-wrap","gap-3","align-items-center"],["pButton","","icon","fa-solid fa-building","routerLink","/clients/company",1,"text-xs","py-2","shadow-none","text-white",3,"label"],["pButton","","icon","pi pi-users","routerLink","/clients/student-activities",1,"p-button-text","text-xs","py-2","shadow-none",3,"label"],["pButton","","icon","fa-solid fa-user","routerLink","/clients/individual",1,"p-button-text","text-xs","py-2","shadow-none",3,"label"],[1,"flex-order-2"],["styleClass","py-1 pl-2 shadow-none w-14rem",3,"ngModelChange","onChange","options","ngModel","placeholder"],[1,"flex-order-1"]],template:function(i,e){if(i&1){let n=E();a(0,"div",1)(1,"button",2),r(2,"translate"),r(3,"translate"),h("click",function(){return d(n),m(e.exportExcel())}),l(),a(4,"button",3),r(5,"translate"),r(6,"translate"),h("click",function(){return d(n),m(e.exportPdf())}),l()(),a(7,"app-table-wrapper",4),h("createBtnClicked",function(){return d(n),m(e.openCreateRecordDialog())})("updateBtnClicked",function(g){return d(n),m(e.openUpdateRecordDialog(g))})("deleteBtnClicked",function(g){return d(n),m(e.deleteRecord(g))})("onLoadData",function(g){return d(n),m(e.loadRecords(g))}),a(8,"div",5)(9,"ul",6)(10,"li"),k(11,"a",7),r(12,"translate"),l(),a(13,"li"),k(14,"a",8),r(15,"translate"),l(),a(16,"li"),k(17,"a",9),r(18,"translate"),l()()(),q(19,he,6,10,"ng-template",null,0,Y),l()}if(i&2){let n,o;u(),c("label",p(2,29,"Excel"))("pTooltip",p(3,31,"export_as_excel")),u(3),c("label",p(5,33,"PDF"))("pTooltip",p(6,35,"export_as_pdf")),u(3),c("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("displayCreateButton",e.indexMeta.displayCreateButton)("columns",e.indexMeta.columns)("dataSource",e.records())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("rows",e.rows())("indexRole",e.roles().index)("updateBtnRole",e.roles().update)("createBtnRole",e.roles().create)("deleteBtnRole",e.roles().delete)("withActionsColumn",e.indexMeta.withAction)("displayUpdateButton",e.indexMeta.displayUpdateButton)("displayDeleteButton",e.indexMeta.displayDeleteButton)("globalFilterValue",e.globalFilterValue)("reorderableColumns",(n=e.indexMeta.reorderableColumns)!==null&&n!==void 0?n:!1)("reorderableRows",(o=e.indexMeta.reorderableRows)!==null&&o!==void 0?o:!1)("withAdditionalContent",!0),u(4),c("label",p(12,37,"Company")),u(3),c("label",p(15,39,"Student Activity")),u(3),c("label",p(18,41,"Individual"))}},dependencies:[pe,F,v,ie,te,z,Z,J,Q,ee,$,M,ne],encapsulation:2,changeDetection:0})};export{P as default};
