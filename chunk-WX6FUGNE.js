import{a as N}from"./chunk-JKOVRG5G.js";import{Ea as U,ab as Y,ba as I,ga as v,ha as A,qa as E}from"./chunk-B2YRLTHG.js";import{A as R,C as y}from"./chunk-VGJJ4SUB.js";import"./chunk-NU2CE2PW.js";import{d as b}from"./chunk-DBWXYH2V.js";import"./chunk-R2AUDRXA.js";import"./chunk-JXG4LUU7.js";import{q as P}from"./chunk-Y2JJNTGM.js";import{Bb as g,Kb as i,Lb as d,Mb as F,Nb as G,Ob as w,Tb as p,db as D,dc as T,ea as B,fc as L,ia as f,mc as h,qb as c,r as C,xc as k,ya as u,yc as S}from"./chunk-I6HS2BDL.js";import{a as l,b as s}from"./chunk-5KTCK5IS.js";var m=class{id;name;start_date;end_date;type_discount;discount;product;constructor(t){this.id=t?.id||null,this.name=t?.name||null,this.start_date=t?.start_date||null,this.end_date=t?.end_date||null,this.type_discount=t?.type_discount||null,this.discount=t?.discount||null,this.product=t?.product||null}};var _=class a extends A{#e=B(I);#t=B(Y).getGlobalList(["type_discount","type_product"]);ngOnInit(){this.dialogMeta=s(l({},this.dialogMeta),{dialogData$:this.#t,endpoints:{store:"general-offer/store",update:"general-offer/update"}}),this.editData?(this.dialogMeta=s(l({},this.dialogMeta),{dialogTitle:this.translate.instant("Update General offer"),submitButtonLabel:this.translate.instant("Update General offer")}),this.model=new m(this.editData)):(this.dialogMeta=s(l({},this.dialogMeta),{dialogTitle:this.translate.instant("Create General offer"),submitButtonLabel:this.translate.instant("Create General offer")}),this.model=new m),this.fields=this.configureFields()}configureFields(){return[this.#e.fieldBuilder([{key:"name",type:"floated-input-field",props:{required:!0,label:"name"}},{key:"type_discount",type:"select-field",props:{isFloatedLabel:!0,label:"Type Discount",options:this.#t.pipe(C(({type_discount:t})=>t.slice(1)))}},{key:"discount",type:"floated-input-field",expressions:{"props.max":'model.type_discount === "percentage" ? 100 : null'},props:{type:"number",required:!0,label:"discount"}}]),this.#e.fieldBuilder([{key:"product",type:"select-field",props:{isFloatedLabel:!0,label:"Product",options:this.#t.pipe(C(({type_product:t})=>t.slice(1)))}},{key:"start_date",type:"date-field",className:"col-12 md:col-4",props:{required:!0,showTime:!0,format:"YYYY-MM-DD HH:mm",hourFormat:"24",label:"start date"}},{key:"end_date",type:"date-field",className:"col-12 md:col-4",props:{required:!0,showTime:!0,format:"YYYY-MM-DD HH:mm",hourFormat:"24",label:"end date"}}])]}static \u0275fac=(()=>{let t;return function(e){return(t||(t=u(a)))(e||a)}})();static \u0275cmp=f({type:a,selectors:[["app-generaloffer-dialog"]],standalone:!0,features:[c,h],decls:7,vars:11,consts:[[3,"onSubmit","form","model","fields","options","showSubmitButton","buttonLabel","isFiledsLoaded","submitBtnLoading"],["ngProjectAs","[header]",5,["","header",""]],[1,"flex","align-items-center","justify-content-between","w-full","p-3","border-bottom-1","border-300","bg-white"],[1,"font-semibold","capitalize","text-lg","line-height-2","my-0"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"flex-shrink-0","p-button-text","p-button-plain","p-button-rounded","w-2rem","h-2rem",3,"click"]],template:function(r,e){r&1&&(i(0,"app-form",0),k(1,"async"),p("onSubmit",function(){return e.createUpdateRecord(e.dialogMeta.endpoints)}),G(2,1),i(3,"div",2)(4,"h2",3),T(5),d(),i(6,"button",4),p("click",function(){return e.closeDialog()}),d()(),w(),d()),r&2&&(g("form",e.createUpdateForm)("model",e.model)("fields",e.fields)("options",e.options)("showSubmitButton",e.dialogMeta.showSubmitButton)("buttonLabel",e.dialogMeta.submitButtonLabel)("isFiledsLoaded",S(1,9,e.dialogMeta.dialogData$))("submitBtnLoading",e.isLoading()),D(5),L(" ",e.dialogMeta.dialogTitle," "))},dependencies:[P,b,y,R,v],encapsulation:2,changeDetection:0})};var M=class a extends E{ngOnInit(){this.clearCachingLists.set(["list-entity"]),this.dialogComponent=_,this.indexMeta=s(l({},this.indexMeta),{displayDeleteButton:this.currentUser()?.role==="technical-support",resourse:"offer-general-offer",endpoints:{index:"general-offer/index",delete:"general-offer/delete"},indexTitle:"General offers",indexIcon:"fa-solid fa-gift",createBtnLabel:"Create General offer",indexTableKey:"GENERALOFFER_KEY",columns:[{title:this.#e("#ID"),name:"id",searchable:!1,orderable:!0},{title:this.#e("name Offer"),name:"name",searchable:!0,orderable:!1},{title:this.#e("start Date"),name:"start_date",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}},{title:this.#e("End Date"),name:"end_date",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}},{title:this.#e("Product Type"),name:"product",searchable:!1,orderable:!1},{title:this.#e("Discount Type"),name:"type_discount",searchable:!1,orderable:!1},{title:this.#e("Discount"),name:"discount",searchable:!1,orderable:!1},{title:this.#e("Created At"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}}]}),this.initializePermissions()}#e(t){return this.translate.instant(t)}static \u0275fac=(()=>{let t;return function(e){return(t||(t=u(a)))(e||a)}})();static \u0275cmp=f({type:a,selectors:[["app-generaloffer"]],standalone:!0,features:[c,h],decls:3,vars:22,consts:[["paginatorPosition","both",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexPermission","updateBtnPermission","createBtnPermission","deleteBtnPermission","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows","withAdditionalContent"],["moreActions",""],["type","general-offer"]],template:function(r,e){if(r&1&&(i(0,"app-table-wrapper",0),p("createBtnClicked",function(){return e.openCreateRecordDialog()})("updateBtnClicked",function(o){return e.openUpdateRecordDialog(o)})("deleteBtnClicked",function(o){return e.deleteRecord(o)})("onLoadData",function(o){return e.loadRecords(o)}),i(1,"div",1),F(2,"app-links-offers",2),d()()),r&2){let n,o;g("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("displayCreateButton",e.indexMeta.displayCreateButton)("columns",e.indexMeta.columns)("dataSource",e.records())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("rows",e.rows())("indexPermission",e.permissions().index)("updateBtnPermission",e.permissions().update)("createBtnPermission",e.permissions().create)("deleteBtnPermission",e.permissions().delete)("withActionsColumn",e.indexMeta.withAction)("displayUpdateButton",e.indexMeta.displayUpdateButton)("displayDeleteButton",e.indexMeta.displayDeleteButton)("globalFilterValue",e.globalFilterValue)("reorderableColumns",(n=e.indexMeta.reorderableColumns)!==null&&n!==void 0?n:!1)("reorderableRows",(o=e.indexMeta.reorderableRows)!==null&&o!==void 0?o:!1)("withAdditionalContent",!0)}},dependencies:[U,y,N,b],encapsulation:2,changeDetection:0})};export{M as default};
