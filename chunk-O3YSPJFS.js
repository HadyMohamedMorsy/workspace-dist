import{a as ce,b as ae,c as se,d as le}from"./chunk-RRVOUZDX.js";import"./chunk-JQBPTR4M.js";import"./chunk-X3LLGXGY.js";import{Ea as re,N as H,O as W,S as k,X as Z,ba as ee,ga as ie,ha as ne,qa as oe,v as X}from"./chunk-RDWS3ZUY.js";import{A as T,B as te,C as D,e as z}from"./chunk-VGJJ4SUB.js";import"./chunk-NU2CE2PW.js";import{c as J,d as x}from"./chunk-DBWXYH2V.js";import"./chunk-R2AUDRXA.js";import"./chunk-JXG4LUU7.js";import{q as Q}from"./chunk-Y2JJNTGM.js";import{Bb as u,Cc as L,Gb as U,Kb as a,Lb as s,Mb as R,Nb as q,Ob as K,Qb as A,T as F,Tb as d,Ub as b,W as P,ac as O,bc as $,db as c,dc as G,ea as C,fc as Y,ia as _,mc as B,ob as N,qb as w,ua as l,va as p,wb as E,xc as m,ya as S,yc as f}from"./chunk-I6HS2BDL.js";import{a as h,b as g,e as j,i as ue}from"./chunk-5KTCK5IS.js";var pe=ue(ce());var v=class{id;name;unviresty;college;subjects;holders;constructor(t){this.id=t?.id||null,this.name=t?.name||null,this.unviresty=t?.unviresty||null,this.college=t?.college||null,this.subjects=t?.subjects||[null],this.holders=t?.holders||[null]}};var M=class r extends ne{#e=C(ee);ngOnInit(){this.dialogMeta=g(h({},this.dialogMeta),{endpoints:{store:"studentActivity/store",update:"studentActivity/update"}}),this.editData?(this.dialogMeta=g(h({},this.dialogMeta),{dialogTitle:this.translate.instant("Update StudentActivity"),submitButtonLabel:this.translate.instant("Update StudentActivity")}),this.model=new v(this.editData)):(this.dialogMeta=g(h({},this.dialogMeta),{dialogTitle:this.translate.instant("Create StudentActivity"),submitButtonLabel:this.translate.instant("Create StudentActivity")}),this.model=new v),this.fields=this.configureFields()}configureFields(){return[{fieldGroup:[{type:"separator-field",props:{title:this.translate.instant("Information Student Activity"),icon:"fa-solid fa-info"}},this.#e.fieldBuilder([{key:"name",type:"floated-input-field",props:{label:"name",required:!0}},{key:"unviresty",type:"input-group-field",props:{placeholder:"unviresty",icon:"fa-solid fa-building-columns",required:!0}},{key:"college",type:"input-group-field",props:{required:!0,placeholder:"college",icon:"fa-solid fa-graduation-cap"}}])]},{template:'<div class="border-1 border-200 -mt-3"></div>',className:"col-12"},{fieldGroup:[{type:"separator-field",props:{title:this.translate.instant("Holders Student Activity"),icon:"fa-solid fa-users"}},this.#e.fieldBuilder([{key:"holders",type:"repeat-field",props:{addBtnText:"Add Holders",disabledRepeater:!1},hooks:{onInit:t=>t.formControl?.valueChanges.pipe(F(t.model),P(i=>{if(t.props)return i.length===4?t.props.disabledRepeater=!0:t.props.disabledRepeater=!1}))},fieldArray:this.#e.fieldBuilder([{key:"name",type:"floated-input-field",props:{label:"name holder",required:!0}},{key:"position",type:"floated-input-field",props:{label:"position title",required:!0}},{key:"number",type:"input-group-field",props:{type:"number",placeholder:"number",icon:"pi pi-phone"}},{key:"whatsApp",type:"input-group-field",props:{type:"number",placeholder:"whatsApp",icon:"pi pi-whatsapp"}}])}])]},{template:'<div class="border-1 border-200 -mt-3"></div>',className:"col-12"},{fieldGroup:[{type:"separator-field",props:{title:this.translate.instant("Subjects"),icon:"fa-graduation-cap fa-solid"}},this.#e.fieldBuilder([{key:"subjects",type:"repeat-field",props:{addBtnText:"Add subject",disabledRepeater:!1},hooks:{onInit:t=>t.formControl?.valueChanges.pipe(F(t.model),P(i=>{if(t.props)return i.length===4?t.props.disabledRepeater=!0:t.props.disabledRepeater=!1}))},fieldArray:{type:"floated-input-field",props:{label:"subject",required:!0}}}])]}]}static \u0275fac=(()=>{let t;return function(e){return(t||(t=S(r)))(e||r)}})();static \u0275cmp=_({type:r,selectors:[["app-student-activity-dialog"]],standalone:!0,features:[w,B],decls:7,vars:11,consts:[[3,"onSubmit","form","model","fields","options","showSubmitButton","buttonLabel","isFiledsLoaded","submitBtnLoading"],["ngProjectAs","[header]",5,["","header",""]],[1,"flex","align-items-center","justify-content-between","w-full","p-3","border-bottom-1","border-300","bg-white"],[1,"font-semibold","capitalize","text-lg","line-height-2","my-0"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"flex-shrink-0","p-button-text","p-button-plain","p-button-rounded","w-2rem","h-2rem",3,"click"]],template:function(i,e){i&1&&(a(0,"app-form",0),m(1,"async"),d("onSubmit",function(){return e.createUpdateRecord(e.dialogMeta.endpoints)}),q(2,1),a(3,"div",2)(4,"h2",3),G(5),s(),a(6,"button",4),d("click",function(){return e.closeDialog()}),s()(),K(),s()),i&2&&(u("form",e.createUpdateForm)("model",e.model)("fields",e.fields)("options",e.options)("showSubmitButton",e.dialogMeta.showSubmitButton)("buttonLabel",e.dialogMeta.submitButtonLabel)("isFiledsLoaded",f(1,9,e.dialogMeta.dialogData$))("submitBtnLoading",e.isLoading()),c(5),Y(" ",e.dialogMeta.dialogTitle," "))},dependencies:[Q,x,k,D,T,ie],encapsulation:2,changeDetection:0})};var he=["viewClient"];function ge(r,t){if(r&1){let i=A();a(0,"p-button",8),d("onClick",function(){let n=l(i).$implicit,o=b();return p(o.viewDialog(n))}),s()}if(r&2){let i=t.$implicit;u("label",i.name)("link",!0)}}function be(r,t){if(r&1){let i=A();a(0,"button",11),d("click",function(){l(i);let n=b().$implicit,o=b();return p(o.showMessage(n.orders[0].order_price))}),s()}}function ve(r,t){if(r&1&&(R(0,"app-menu-collapse-actions",9),E(1,be,1,0,"button",10)),r&2){let i=t.$implicit,e=b();u("recordId",i.id)("permissionShared",e.hasPermisstion(e.resource.Shared,"create"))("permissionDeskArea",e.hasPermisstion(e.resource.Deskarea,"create"))("permissionMemebership",e.hasPermisstion(e.resource.AssignesMembership,"create"))("permissionDeal",e.hasPermisstion(e.resource.Deals,"create"))("permissionPackage",e.hasPermisstion(e.resource.AssignesPackage,"create"))("dialogConfig",e.dialogConfig)("clearCachingLists",e.clearCachingLists()),c(),U(i.orders!=null&&i.orders.length?1:-1)}}var V=class r extends oe{viewClient=N.required("viewClient");confirmationService=C(z);exportColumns;resource=Z;showMessage(t){this.confirmationService.confirm({message:`There Is Order From Kitchen You Must Pay It , Total Price is : ${t} EG`,header:this.translate.instant("message"),icon:"pi pi-envelope",acceptVisible:!1,rejectVisible:!1,rejectButtonStyleClass:"p-button-text"})}ngOnInit(){this.isShareRecord.set(!0),this.clearCachingLists.set(["assignes-membership/studentActivity","assign-general-offer/studentActivity","assignes-package/studentActivity","deals/studentActivity","shared/studentActivity","deskarea/studentActivity","reservation-room/studentActivity","order/studentActivity"]),this.dialogComponent=M,this.viewDialogComponent=se,this.indexMeta=g(h({},this.indexMeta),{endpoints:{index:"studentActivity/index",delete:"studentActivity/delete"},resourse:"customers-studentActivity",indexTitle:"Student Activity",indexIcon:"fa-solid fa-building",provideFields:["subjects","holders"],createBtnLabel:this.#e("Create Student Activity"),indexTableKey:"STUDENT_KEY",columns:[{title:this.#e("name"),name:"name",searchable:!0,orderable:!1,render:this.viewClient()},{title:this.#e("unviresty"),name:"unviresty",searchable:!0,orderable:!1},{title:this.#e("college"),name:"college",searchable:!0,orderable:!1},{title:this.#e("created by"),name:"createdBy",searchable:!1,orderable:!1},{title:this.#e("created at"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}}]}),this.initializePermissions()}exportPdf(){import("./chunk-H3P4WYJK.js").then(t=>{import("./chunk-M4ATFCOO.js").then(i=>{let e=new t.default("p","px","a4");e.autoTable(this.exportColumns,this.records()),e.save("records.pdf")})})}exportExcel(){import("./chunk-4VY6OIZS.js").then(t=>{let i=this.records().map(_e=>{var I=_e,{subjects:y,holders:Ce}=I,de=j(I,["subjects","holders"]);return de}),n={Sheets:{data:t.utils.json_to_sheet(i)},SheetNames:["data"]},o=t.write(n,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(o,"records")})}saveAsExcelFile(t,i){let e="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",n=".xlsx",o=new Blob([t],{type:e});pe.default.saveAs(o,i+"_export_"+new Date().getTime()+n)}#e(t){return this.translate.instant(t)}viewDialog(t){super.viewDialog(t,{endpoint:"studentActivity",keyState:"STUDENTACTIVITY",key:"studentActivity_id"})}hasPermisstion(t,i){return this.userPermission.hasPermission(t,i)}static \u0275fac=(()=>{let t;return function(e){return(t||(t=S(r)))(e||r)}})();static \u0275cmp=_({type:r,selectors:[["app-student-activity"]],viewQuery:function(i,e){i&1&&O(e.viewClient,he,5),i&2&&$()},standalone:!0,features:[w,B],decls:14,vars:34,consts:[["viewClient",""],["extendDefaultActionsTemplate",""],[1,"flex","gap-2","mb-4"],["type","button","pButton","","icon","pi pi-file-excel text-xs","tooltipPosition","top",1,"text-xs","py-1","px-3",3,"click","label","pTooltip"],["type","button","pButton","","icon","pi pi-file-pdf text-xs","tooltipPosition","top",1,"text-xs","bg-pink","border-pink","py-1","px-3",3,"click","label","pTooltip"],["placeholderSearch","search Unviresty Or College Or Name","paginatorPosition","both",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexPermission","updateBtnPermission","createBtnPermission","deleteBtnPermission","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows","withAdditionalContent"],["moreActions",""],["type","student-activities"],[3,"onClick","label","link"],["typeUser","studentActivity",3,"recordId","permissionShared","permissionDeskArea","permissionMemebership","permissionDeal","permissionPackage","dialogConfig","clearCachingLists"],["pButton","","pRipple","","icon","pi pi-exclamation-circle text-xs","tooltipPosition","top","pTooltip","Note order from kitchen",1,"p-button-rounded","p-button-text","p-button-sm"],["pButton","","pRipple","","icon","pi pi-exclamation-circle text-xs","tooltipPosition","top","pTooltip","Note order from kitchen",1,"p-button-rounded","p-button-text","p-button-sm",3,"click"]],template:function(i,e){if(i&1){let n=A();a(0,"div",2)(1,"button",3),m(2,"translate"),m(3,"translate"),d("click",function(){return l(n),p(e.exportExcel())}),s(),a(4,"button",4),m(5,"translate"),m(6,"translate"),d("click",function(){return l(n),p(e.exportPdf())}),s()(),a(7,"app-table-wrapper",5),d("createBtnClicked",function(){return l(n),p(e.openCreateRecordDialog())})("updateBtnClicked",function(y){return l(n),p(e.openUpdateRecordDialog(y))})("deleteBtnClicked",function(y){return l(n),p(e.deleteRecord(y))})("onLoadData",function(y){return l(n),p(e.loadRecords(y))}),a(8,"div",6),R(9,"app-links-client",7),s(),E(10,ge,1,2,"ng-template",null,0,L)(12,ve,2,9,"ng-template",null,1,L),s()}if(i&2){let n,o;c(),u("label",f(2,26,"Excel"))("pTooltip",f(3,28,"export_as_excel")),c(3),u("label",f(5,30,"PDF"))("pTooltip",f(6,32,"export_as_pdf")),c(3),u("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("displayCreateButton",e.indexMeta.displayCreateButton)("columns",e.indexMeta.columns)("dataSource",e.sharedRecords())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("rows",e.rows())("indexPermission",e.permissions().index)("updateBtnPermission",e.permissions().update)("createBtnPermission",e.permissions().create)("deleteBtnPermission",e.permissions().delete)("withActionsColumn",e.indexMeta.withAction)("displayUpdateButton",e.indexMeta.displayUpdateButton)("displayDeleteButton",e.indexMeta.displayDeleteButton)("globalFilterValue",e.globalFilterValue)("reorderableColumns",(n=e.indexMeta.reorderableColumns)!==null&&n!==void 0?n:!1)("reorderableRows",(o=e.indexMeta.reorderableRows)!==null&&o!==void 0?o:!1)("withAdditionalContent",!0)}},dependencies:[re,D,T,te,k,X,ae,le,W,H,x,J],encapsulation:2,changeDetection:0})};export{V as default};
