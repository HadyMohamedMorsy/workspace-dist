import{da as I,oa as D,va as Q,wa as T}from"./chunk-H45ZYL4L.js";import{A as L,C as V}from"./chunk-LBHIXMIT.js";import{q}from"./chunk-AHOHCUBB.js";import{Bb as w,Kb as d,L as s,Lb as h,Nb as v,Ob as F,Tb as g,W as a,db as _,dc as P,ea as f,fc as k,ia as y,mc as B,qb as C,xc as S,ya as b,yc as M}from"./chunk-PLVIENQC.js";import{a as u,b as p}from"./chunk-5KTCK5IS.js";var n=class{id;purshase_price;purshase_qty;type_store;weight_kg;weight_g;weight_product;total;product_id;constructor(e){this.id=e?.id||null,this.purshase_price=e?.purshase_price??0,this.type_store=e?.type_store||"item",this.purshase_qty=e?.purshase_qty??0,this.weight_kg=e?.weight_kg??0,this.weight_g=e?.weight_g??0,this.weight_product=e?.weight_product??0,this.total=e?.total??0,this.product_id=e?.product_id||null}};var x=class l extends T{#e=f(D);ngOnInit(){this.clearCachingLists.set(["product/index","category/show","category/list-categories","dashboard/analytics"]),this.dialogMeta=p(u({},this.dialogMeta),{endpoints:{store:"purchases/store",update:"purchases/update"}}),this.editData&&this.editData.method!=="create"?(this.dialogMeta=p(u({},this.dialogMeta),{dialogTitle:this.translate.instant("Update Purchases"),submitButtonLabel:this.translate.instant("Update Purchases")}),this.model=new n(this.editData)):(this.dialogMeta=p(u({},this.dialogMeta),{dialogTitle:this.translate.instant("Create Purchases"),submitButtonLabel:this.translate.instant("Create Purchases")}),this.model=new n(this.editData)),this.fields=this.configureFields()}configureFields(){return[this.#e.fieldBuilder([{key:"type_store",type:"radio-field",props:{required:!0,options:[{value:"item",label:this.translate.instant("Item")},{value:"weight",label:this.translate.instant("Weight")}]},hooks:{onInit:e=>e.formControl?.valueChanges.pipe(s(),a(o=>{let t=e.form?.get("purshase_qty"),i=e.form?.get("total");e.form?.get("purshase_price")?.setValue(0),t?.setValue(0),i?.setValue(0)}))}}]),{fieldGroup:[{type:"separator-field",props:{title:this.translate.instant("Calculate Purchase Qty"),icon:"pi pi-calculator"},expressions:{hide:e=>e.form?.get("type_store")?.value!=="weight"}},this.#e.fieldBuilder([{key:"weight_kg",type:"floated-input-field",props:{type:"number",label:"weight Kg",required:!0,min:0,placeholder:"weight Kg"},expressions:{hide:e=>e.form?.get("type_store")?.value!=="weight"},hooks:{onInit:e=>e.formControl?.valueChanges.pipe(s(),a(o=>{let t=e.form?.get("weight_g"),i=e.form?.get("weight_product"),r=e.form?.get("purshase_qty"),m=e.form?.get("total"),c=e.form?.get("purshase_price");t?.setValue(o*1e3),r?.setValue(t?.value/i?.value),m?.setValue(c?.value*r?.value?r?.value:0)}))}},{key:"weight_g",type:"floated-input-field",props:{type:"number",label:"weight g",required:!0,min:0,placeholder:"weight g",disabled:!0},expressions:{hide:e=>e.form?.get("type_store")?.value!=="weight"}},{key:"weight_product",type:"floated-input-field",props:{type:"number",label:"weight Product g",required:!0,min:0,placeholder:"weight Product g"},expressions:{hide:e=>e.form?.get("type_store")?.value!=="weight"},hooks:{onInit:e=>e.formControl?.valueChanges.pipe(s(),a(o=>{let t=e.form?.get("weight_g"),i=e.form?.get("weight_product"),r=e.form?.get("purshase_qty"),m=e.form?.get("total"),c=e.form?.get("purshase_price");r?.setValue(t?.value/i?.value),m?.setValue(c?.value*r?.value)}))}}]),{template:'<div class="border-1 border-200 -mt-3"></div>',className:"col-12",expressions:{hide:e=>e.form?.get("type_store")?.value!=="weight"}}]},this.#e.fieldBuilder([{key:"purshase_price",type:"floated-input-field",className:"col-12 md:col-4",props:{label:"Purchase Price By One Item",required:!0,placeholder:"purchase price"},hooks:{onInit:e=>e.formControl?.valueChanges.pipe(s(),a(o=>{let t=e.form?.get("total"),i=e.form?.get("purshase_qty");t?.setValue(+o*i?.value)}))}},{key:"purshase_qty",type:"floated-input-field",className:"col-12 md:col-4",expressions:{"props.disabled":e=>e.form?.get("type_store")?.value!=="item"},props:{type:"number",label:"Qty Purshase",required:!0,min:0,placeholder:"Qty Purshase By Item"},hooks:{onInit:e=>e.formControl?.valueChanges.pipe(s(),a(o=>{let t=e.form?.get("total"),i=e.form?.get("purshase_price");t?.setValue(+o*i?.value)}))}},{key:"total",type:"floated-input-field",className:"col-12 md:col-4",props:{label:"total Cost",required:!0,placeholder:"total Cost",disabled:!0}}])]}static \u0275fac=(()=>{let e;return function(t){return(e||(e=b(l)))(t||l)}})();static \u0275cmp=y({type:l,selectors:[["app-purchases-dialog"]],standalone:!0,features:[C,B],decls:7,vars:11,consts:[[3,"onSubmit","form","model","fields","options","showSubmitButton","buttonLabel","isFiledsLoaded","submitBtnLoading"],["ngProjectAs","[header]",5,["","header",""]],[1,"flex","align-items-center","justify-content-between","w-full","p-3","border-bottom-1","border-300","bg-white"],[1,"font-semibold","capitalize","text-lg","line-height-2","my-0"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"flex-shrink-0","p-button-text","p-button-plain","p-button-rounded","w-2rem","h-2rem",3,"click"]],template:function(o,t){o&1&&(d(0,"app-form",0),S(1,"async"),g("onSubmit",function(){return t.createUpdateRecord(t.dialogMeta.endpoints)}),v(2,1),d(3,"div",2)(4,"h2",3),P(5),h(),d(6,"button",4),g("click",function(){return t.closeDialog()}),h()(),F(),h()),o&2&&(w("form",t.createUpdateForm)("model",t.model)("fields",t.fields)("options",t.options)("showSubmitButton",t.dialogMeta.showSubmitButton)("buttonLabel",t.dialogMeta.submitButtonLabel)("isFiledsLoaded",M(1,9,t.dialogMeta.dialogData$))("submitBtnLoading",t.isLoading()),_(5),k(" ",t.dialogMeta.dialogTitle," "))},dependencies:[q,I,V,L,Q],encapsulation:2,changeDetection:0})};export{x as a};
