import{A as Q,D as X,Ea as ne,F as Z,H as ee,M as te,Sa as le,ca as ae,da as h,na as T,ob as V,ua as re,va as oe,w as H,x as J}from"./chunk-AA67JPLF.js";import{A as ie,C as L}from"./chunk-LBHIXMIT.js";import"./chunk-R2AUDRXA.js";import"./chunk-JXG4LUU7.js";import{q as $}from"./chunk-AHOHCUBB.js";import{Bb as p,C as x,Cc as z,Kb as l,Lb as s,Mb as A,Nb as K,Ob as j,Qb as P,Tb as C,Ub as R,W as E,db as y,dc as D,ea as m,fc as B,ia as u,ic as q,jc as O,kc as W,mc as g,pb as Y,qb as F,r as I,s as U,ua as f,va as c,wb as G,xc as M,ya as S,yc as w}from"./chunk-PLVIENQC.js";import{a as o,b as d}from"./chunk-5KTCK5IS.js";var k=class i{#e=m(T);filtersData=Y();model={};form=new J({});options={};fields=[this.#e.fieldBuilder([{key:"customFilters.start_date",type:"date-field",className:"md:col-3 col-12",props:{format:"YYYY-MM-DD",label:"start date"},hooks:{onInit:t=>t.formControl?.valueChanges.pipe(x(a=>!!a),E(()=>{this.filtersData.update(a=>o(o({},a),this.model))}))}},{key:"customFilters.end_date",type:"date-field",className:"md:col-3 col-12",props:{format:"YYYY-MM-DD",label:"end date"},hooks:{onInit:t=>t.formControl?.valueChanges.pipe(x(a=>!!a),E(()=>{this.filtersData.update(a=>o(o({},a),this.model))}))}}])];static \u0275fac=function(a){return new(a||i)};static \u0275cmp=u({type:i,selectors:[["app-sallaries"]],inputs:{filtersData:[1,"filtersData"]},outputs:{filtersData:"filtersDataChange"},standalone:!0,features:[g],decls:5,vars:8,consts:[[1,"text-base","capitalize","font-medium","mb-3"],[3,"formGroup"],[3,"model","fields","form","options"]],template:function(a,e){a&1&&(l(0,"h1",0),D(1),M(2,"translate"),s(),l(3,"form",1),A(4,"formly-form",2),s()),a&2&&(y(),B(" ",w(2,6,"Filters Sallaries")," : "),y(2),p("formGroup",e.form),y(),p("model",e.model)("fields",e.fields)("form",e.form)("options",e.options))},dependencies:[te,ee,Z,Q,H,X,h,ae],encapsulation:2,changeDetection:0})};var _=class{id;cost;type_sallary;name;destination;user;user_id;constructor(t){this.id=t?.id||null,this.name=t?.name||null,this.destination=t?.destination||null,this.cost=t?.cost??0,this.type_sallary=t?.type_sallary||"Internal",this.user_id=t?.user?.id||null}};var v=class i extends oe{#e=m(T);#t=m(V).getGlobalList(["type_sallary"]);#a=m(V).getGlobalEntityList("user");ngOnInit(){this.dialogMeta=d(o({},this.dialogMeta),{dialogData$:U([this.#t,this.#a]),endpoints:{store:"salary/store",update:"salary/update"}}),this.editData?(this.dialogMeta=d(o({},this.dialogMeta),{dialogTitle:this.translate.instant("Update Salary"),submitButtonLabel:this.translate.instant("Update Salary")}),this.model=new _(this.editData)):(this.dialogMeta=d(o({},this.dialogMeta),{dialogTitle:this.translate.instant("Create  Salary"),submitButtonLabel:this.translate.instant("Create  Salary")}),this.model=new _),this.fields=this.configureFields()}configureFields(){return[this.#e.fieldBuilder([{key:"type_sallary",type:"select-field",className:"md:col-6 col-12",props:{filter:!0,isFloatedLabel:!0,required:!0,label:"Select Type Salllary",placeholder:"Select Type Salllary",options:this.#t.pipe(I(({type_sallary:t})=>t.slice(1)))}}]),this.#e.fieldBuilder([{key:"name",type:"floated-input-field",expressions:{hide:t=>t.form?.get("type_sallary")?.value!=="External"},props:{label:"name",required:!0}},{key:"destination",type:"floated-input-field",expressions:{hide:t=>t.form?.get("type_sallary")?.value!=="External"},props:{label:"destination",required:!0}},{key:"user_id",type:"select-field",expressions:{hide:t=>t.form?.get("type_sallary")?.value!=="Internal"},props:{isFloatedLabel:!0,label:"users",options:this.#a.pipe(I(t=>t.map(a=>({label:a.firstName+" "+a.lastName,value:a.id}))))}},{key:"cost",type:"floated-input-field",props:{type:"number",label:"Sallary",required:!0}}])]}static \u0275fac=(()=>{let t;return function(e){return(t||(t=S(i)))(e||i)}})();static \u0275cmp=u({type:i,selectors:[["app-salary-dialog"]],standalone:!0,features:[F,g],decls:7,vars:11,consts:[[3,"onSubmit","form","model","fields","options","showSubmitButton","buttonLabel","isFiledsLoaded","submitBtnLoading"],["ngProjectAs","[header]",5,["","header",""]],[1,"flex","align-items-center","justify-content-between","w-full","p-3","border-bottom-1","border-300","bg-white"],[1,"font-semibold","capitalize","text-lg","line-height-2","my-0"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"flex-shrink-0","p-button-text","p-button-plain","p-button-rounded","w-2rem","h-2rem",3,"click"]],template:function(a,e){a&1&&(l(0,"app-form",0),M(1,"async"),C("onSubmit",function(){return e.createUpdateRecord(e.dialogMeta.endpoints)}),K(2,1),l(3,"div",2)(4,"h2",3),D(5),s(),l(6,"button",4),C("click",function(){return e.closeDialog()}),s()(),j(),s()),a&2&&(p("form",e.createUpdateForm)("model",e.model)("fields",e.fields)("options",e.options)("showSubmitButton",e.dialogMeta.showSubmitButton)("buttonLabel",e.dialogMeta.submitButtonLabel)("isFiledsLoaded",w(1,9,e.dialogMeta.dialogData$))("submitBtnLoading",e.isLoading()),y(5),B(" ",e.dialogMeta.dialogTitle," "))},dependencies:[$,h,L,ie,re],encapsulation:2,changeDetection:0})};function de(i,t){if(i&1){let a=P();l(0,"app-sallaries",2),W("filtersDataChange",function(r){f(a);let n=R();return O(n.filtersData,r)||(n.filtersData=r),c(r)}),s()}if(i&2){let a=R();q("filtersData",a.filtersData)}}var N=class i extends ne{ngOnInit(){this.dialogComponent=v,this.indexMeta=d(o({},this.indexMeta),{resourse:"settings-expenses-salaries",endpoints:{index:"salary/index",delete:"salary/delete"},indexTitle:"salaries",indexIcon:"pi pi-money-bill",createBtnLabel:"Create salary",indexTableKey:"SALARY_KEY",columns:[{title:this.#e("Sallary"),name:"cost",searchable:!1,orderable:!0},{title:this.#e("Employer Internal"),name:"user.firstName",searchable:!1,orderable:!1},{title:this.#e("Employer External"),name:"name",searchable:!1,orderable:!1},{title:this.#e("created at"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}}]}),this.initializePermissions()}#e(t){return this.translate.instant(t)}static \u0275fac=(()=>{let t;return function(e){return(t||(t=S(i)))(e||i)}})();static \u0275cmp=u({type:i,selectors:[["app-salaries"]],standalone:!0,features:[F,g],decls:3,vars:22,consts:[["customFiltersTemplate",""],["paginatorPosition","both",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexPermission","updateBtnPermission","createBtnPermission","deleteBtnPermission","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows","withCustomFilters"],[3,"filtersDataChange","filtersData"]],template:function(a,e){if(a&1){let r=P();l(0,"app-table-wrapper",1),C("createBtnClicked",function(){return f(r),c(e.openCreateRecordDialog())})("updateBtnClicked",function(b){return f(r),c(e.openUpdateRecordDialog(b))})("deleteBtnClicked",function(b){return f(r),c(e.deleteRecord(b))})("onLoadData",function(b){return f(r),c(e.loadRecords(b))}),G(1,de,1,1,"ng-template",null,0,z),s()}if(a&2){let r,n;p("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("displayCreateButton",e.indexMeta.displayCreateButton)("columns",e.indexMeta.columns)("dataSource",e.records())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("rows",e.rows())("indexPermission",e.permissions().index)("updateBtnPermission",e.permissions().update)("createBtnPermission",e.permissions().create)("deleteBtnPermission",e.permissions().delete)("withActionsColumn",e.indexMeta.withAction)("displayUpdateButton",e.indexMeta.displayUpdateButton)("displayDeleteButton",e.indexMeta.displayDeleteButton)("globalFilterValue",e.globalFilterValue)("reorderableColumns",(r=e.indexMeta.reorderableColumns)!==null&&r!==void 0?r:!1)("reorderableRows",(n=e.indexMeta.reorderableRows)!==null&&n!==void 0?n:!1)("withCustomFilters",!0)}},dependencies:[h,le,k,L],encapsulation:2,changeDetection:0})};export{N as default};
