import{a as Xe}from"./chunk-AQWO3IYN.js";import{c as je,d as ze,e as Ge,f as We,g as Ye,h as He,i as Qe,j as Je}from"./chunk-4TAAWFWS.js";import{a as Ke}from"./chunk-7AFSXZCD.js";import{$ as E,$a as Ne,E as V,Ea as D,Ra as Ie,Sa as R,W as Fe,X as v,Za as Le,_a as Ae,ca as X,da as C,eb as Ee,fa as Ue,ga as Ve,ia as ce,kb as $e,l as ve,na as Pe,ob as qe,pa as Z,pb as Oe,ua as te,v as De,va as ie,z as Re}from"./chunk-AA67JPLF.js";import{A as $,B as ee,C as g,e as xe}from"./chunk-LBHIXMIT.js";import"./chunk-R2AUDRXA.js";import"./chunk-JXG4LUU7.js";import{l as Me,q as J}from"./chunk-AHOHCUBB.js";import{Bb as m,Cc as K,Gb as L,Hb as ye,Ia as l,Ib as Ce,Jb as ge,Kb as r,Lb as s,Nb as Y,Ob as H,Pb as we,Qb as T,Tb as p,Tc as U,Ub as c,W as _e,_ as be,ac as z,bc as Q,db as S,dc as F,ea as B,fc as O,gc as ke,ia as b,ic as Be,jc as Te,kc as Se,mc as y,nb as P,ob as j,qb as k,r as W,ua as f,va as h,wb as M,xc as A,ya as w,yc as N}from"./chunk-PLVIENQC.js";import{a as d,b as u}from"./chunk-5KTCK5IS.js";var G=class{id;firstName;lastName;email;username;role;phone;password;password_confirmation;constructor(t){this.id=t?.id||null,this.firstName=t?.firstName||null,this.lastName=t?.lastName||null,this.email=t?.email||null,this.role=t?.role||null,this.username=t?.username||null,this.phone=t?.phone||null,this.password=t?.password||null,this.password_confirmation=t?.password_confirmation||null}},ne=class{id;permission;constructor(t){this.id=t?.id||null,this.permission=t?.permission||null}};var oe=class a extends ie{#e=B(Pe);#t=B(qe).getGlobalList(["roles"]);ngOnInit(){this.dialogMeta=u(d({},this.dialogMeta),{dialogData$:this.#t,endpoints:{store:"user/store",update:"user/update"}}),this.editData?(this.dialogMeta=u(d({},this.dialogMeta),{dialogTitle:this.translate.instant("Update User"),submitButtonLabel:this.translate.instant("Update User")}),this.model=new G(this.editData)):(this.dialogMeta=u(d({},this.dialogMeta),{dialogTitle:this.translate.instant("Create User"),submitButtonLabel:this.translate.instant("Create User")}),this.model=new G),this.fields=this.configureFields()}configureFields(){return[{fieldGroup:[{type:"separator-field",props:{title:this.translate.instant("Information Users"),icon:"fa-solid fa-info"}},this.#e.fieldBuilder([{key:"firstName",type:"floated-input-field",props:{label:"First Name",required:!0}},{key:"lastName",type:"floated-input-field",props:{label:"Last Name",required:!0}},{key:"phone",type:"floated-input-field",props:{type:"number",label:"Mobile Number",required:!0}}]),this.#e.fieldBuilder([{key:"email",type:"floated-input-field",props:{label:"Email",required:!0}},{key:"username",type:"floated-input-field",props:{label:"Username",required:!0}},{key:"role",type:"select-field",props:{isFloatedLabel:!0,label:"Roles",options:this.#t.pipe(W(({roles:t})=>t))}}])]},{template:'<div class="border-1 border-200 -mt-3"></div>',className:"col-12"},{fieldGroup:[{type:"separator-field",props:{title:this.translate.instant("Password Users"),icon:"fa-solid fa-lock"}},this.#e.fieldBuilder([{validators:{validation:[{name:"fieldMatch",options:{errorPath:"password_confirmation"}}]},fieldGroup:[this.#e.fieldBuilder([{key:"password",type:"password-field",props:{label:"password",placeholder:"password",toggleMask:!0,required:!this.editData}},{key:"password_confirmation",type:"password-field",props:{label:"password confirmation",placeholder:"password confirmation",toggleMask:!0,required:!this.editData}}])]}])]}]}static \u0275fac=(()=>{let t;return function(e){return(t||(t=w(a)))(e||a)}})();static \u0275cmp=b({type:a,selectors:[["app-user-dialog"]],standalone:!0,features:[k,y],decls:7,vars:11,consts:[[3,"onSubmit","form","model","fields","options","showSubmitButton","buttonLabel","isFiledsLoaded","submitBtnLoading"],["ngProjectAs","[header]",5,["","header",""]],[1,"flex","align-items-center","justify-content-between","w-full","p-3","border-bottom-1","border-300","bg-white"],[1,"font-semibold","capitalize","text-lg","line-height-2","my-0"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"flex-shrink-0","p-button-text","p-button-plain","p-button-rounded","w-2rem","h-2rem",3,"click"]],template:function(i,e){i&1&&(r(0,"app-form",0),A(1,"async"),p("onSubmit",function(){return e.createUpdateRecord(e.dialogMeta.endpoints)}),Y(2,1),r(3,"div",2)(4,"h2",3),F(5),s(),r(6,"button",4),p("click",function(){return e.closeDialog()}),s()(),H(),s()),i&2&&(m("form",e.createUpdateForm)("model",e.model)("fields",e.fields)("options",e.options)("showSubmitButton",e.dialogMeta.showSubmitButton)("buttonLabel",e.dialogMeta.submitButtonLabel)("isFiledsLoaded",N(1,9,e.dialogMeta.dialogData$))("submitBtnLoading",e.isLoading()),S(5),O(" ",e.dialogMeta.dialogTitle," "))},dependencies:[J,C,g,$,te],encapsulation:2,changeDetection:0})};var ae=class a{#e=B($e);getTreeNodesData$(t){return this.#e.getListData("lists/permission-list-tree","GET",void 0,`${t}`).pipe(W(({data:i})=>i))}static \u0275fac=function(i){return new(i||a)};static \u0275prov=be({token:a,factory:a.\u0275fac,providedIn:"root"})};var re=class a extends ie{#e=B(ae);selection=P([]);nodeLists=P([]);flattenNodeOptions=P([]);filteredNodes=P([]);ngOnInit(){this.dialogMeta=u(d({},this.dialogMeta),{dialogData$:this.#e.getTreeNodesData$(`permission-list-${this.editData.id}`),dialogTitle:this.translate.instant("Update User Permissions"),submitButtonLabel:this.translate.instant("Update User Permissions"),endpoints:{update:"user/update"}}),this.#e.getTreeNodesData$(`permission-list-${this.editData.id}`).pipe(_e(t=>{this.nodeLists.set(t),this.flattenNodeOptions.set(this.#o(this.nodeLists())),this.selection.set(this.#t(this.editData.permission)),this.#i(),this.fields=this.configureFields()}),Z(this.destroyRef)).subscribe(),this.fields=this.configureFields()}#t(t){return this.nodeLists().flatMap(i=>{let e=t.find(x=>x.resource===i.data);if(!e)return[];let o=(i.children||[]).map(x=>x.data?.split(":")[1]).filter(Boolean).every(x=>e.actions.includes(x)),_=i.children.filter(x=>e.actions.includes(x.data.split(":")[1])).map(x=>d({},x));return o?[{key:i.key,label:i.label,data:i.data},..._]:_})}#i(){let t=this.selection().reduce((i,e)=>{let[n,o]=e.data.split(":");if(!n||!o)return i;let _=i.find(x=>x.resource===n);return _?_.actions.push(o):i.push({resource:n,actions:[o]}),i},[]);this.model=new ne({id:this.editData.id,permission:t})}#n(t){let i=this.filteredNodes().length?this.filteredNodes():this.flattenNodeOptions();if(t.props?.isAllSelected){let e=this.selection().filter(n=>!i.some(o=>o.key===n.key));this.selection.set(e)}else this.selection.update(e=>[...new Set([...e,...i])]),this.selection().forEach(e=>e.partialSelected=!1);this.#i()}configureFields(){return[{template:`
          <h2 class="text-base font-medium mt-0 mb-3">
            <i class="fas fa-user-shield mr-2"></i> ${this.editData.firstName+" "+this.editData.lastName}
          </h2>
        `},{type:"tree-field",props:{filter:!0,filterPlaceholder:this.translate.instant("filter selections"),withSelectionToggler:!0,withCollapseToggler:!0,isAllSelected:!1,isNoFilterResult:!1,selection:this.selection,options:this.nodeLists(),selectionChange:(t,i)=>{this.selection.set(i),this.#i();let e=this.selection().length===this.flattenNodeOptions().length;t.props&&(t.props.isAllSelected=e)},toggleSelection:t=>{this.#n(t),t.props&&(t.props.isAllSelected=!t.props.isAllSelected)}}}]}#o(t){return t?.flatMap(i=>[i,...i.children||[]])||[]}static \u0275fac=(()=>{let t;return function(e){return(t||(t=w(a)))(e||a)}})();static \u0275cmp=b({type:a,selectors:[["app-user-permissions-dialog"]],standalone:!0,features:[k,y],decls:7,vars:11,consts:[[3,"onSubmit","form","model","fields","options","showSubmitButton","buttonLabel","isFiledsLoaded","submitBtnLoading"],["ngProjectAs","[header]",5,["","header",""]],[1,"flex","align-items-center","justify-content-between","w-full","p-3","border-bottom-1","border-300","bg-white"],[1,"font-semibold","capitalize","text-lg","line-height-2","my-0"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"flex-shrink-0","p-button-text","p-button-plain","p-button-rounded","w-2rem","h-2rem",3,"click"]],template:function(i,e){i&1&&(r(0,"app-form",0),A(1,"async"),p("onSubmit",function(){return e.createUpdateRecord(e.dialogMeta.endpoints)}),Y(2,1),r(3,"div",2)(4,"h2",3),F(5),s(),r(6,"button",4),p("click",function(){return e.closeDialog()}),s()(),H(),s()),i&2&&(m("form",e.createUpdateForm)("model",e.model)("fields",e.fields)("options",e.options)("showSubmitButton",e.dialogMeta.showSubmitButton)("buttonLabel",e.dialogMeta.submitButtonLabel)("isFiledsLoaded",N(1,9,e.dialogMeta.dialogData$))("submitBtnLoading",e.isLoading()),S(5),O(" ",e.dialogMeta.dialogTitle," "))},dependencies:[J,C,g,$,te],encapsulation:2,changeDetection:0})};var se=class a extends D{id=l.required({transform:U});endpoint=l.required();keyState=l.required();resourse=l.required();key=l.required();ngOnInit(){this.indexMeta=u(d({},this.indexMeta),{endpoints:{index:`company/${this.endpoint()}`},displayCreateButton:!1,resourse:this.resourse(),withAction:!1,indexTitle:"Companies",indexIcon:"fa-solid fa-building",createBtnLabel:this.#e("Create Company"),indexTableKey:`${this.keyState()}_COMPANY_KEY`,columns:[{title:this.#e("name"),name:"name",searchable:!0,orderable:!1},{title:this.#e("phone"),name:"phone",searchable:!1,orderable:!1},{title:this.#e("whatsApp"),name:"whatsApp",searchable:!0,orderable:!1},{title:this.#e("company type"),name:"company_type",searchable:!1,orderable:!1},{title:this.#e("city"),name:"city",searchable:!1,orderable:!1},{title:this.#e("created by"),name:"createdBy",searchable:!1,orderable:!1},{title:this.#e("created at"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}}]}),this.initializePermissions(),this.filtersData.update(t=>u(d({},t),{[this.key()]:this.id()}))}#e(t){return this.translate.instant(t)}static \u0275fac=(()=>{let t;return function(e){return(t||(t=w(a)))(e||a)}})();static \u0275cmp=b({type:a,selectors:[["app-view-related-company"]],inputs:{id:[1,"id"],endpoint:[1,"endpoint"],keyState:[1,"keyState"],resourse:[1,"resourse"],key:[1,"key"]},standalone:!0,features:[k,y],decls:1,vars:21,consts:[["paginatorPosition","both",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexPermission","updateBtnPermission","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows","withCustomFilters","withTableFilters"]],template:function(i,e){if(i&1&&(r(0,"app-table-wrapper",0),p("createBtnClicked",function(){return e.openCreateRecordDialog()})("updateBtnClicked",function(o){return e.openUpdateRecordDialog(o)})("deleteBtnClicked",function(o){return e.deleteRecord(o)})("onLoadData",function(o){return e.loadRecords(o)}),s()),i&2){let n,o;m("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("displayCreateButton",e.indexMeta.displayCreateButton)("columns",e.indexMeta.columns)("dataSource",e.records())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("rows",e.rows())("indexPermission",e.permissions().index)("updateBtnPermission",e.permissions().update)("withActionsColumn",e.indexMeta.withAction)("displayUpdateButton",e.indexMeta.displayUpdateButton)("displayDeleteButton",e.indexMeta.displayDeleteButton)("globalFilterValue",e.globalFilterValue)("reorderableColumns",(n=e.indexMeta.reorderableColumns)!==null&&n!==void 0?n:!1)("reorderableRows",(o=e.indexMeta.reorderableRows)!==null&&o!==void 0?o:!1)("withCustomFilters",!0)("withTableFilters",!1)}},dependencies:[R,V,v,E,g,C],encapsulation:2,changeDetection:0})};var le=class a extends D{id=l.required({transform:U});endpoint=l.required();keyState=l.required();resourse=l.required();key=l.required();ngOnInit(){this.indexMeta=u(d({},this.indexMeta),{endpoints:{index:`individual/${this.endpoint()}`},displayCreateButton:!1,withAction:!1,resourse:this.resourse(),indexTitle:"Individual",indexIcon:"fa-solid fa-user",createBtnLabel:this.#e("Create Individual"),indexTableKey:`${this.keyState()}_INDIVIDUAL_KEY`,columns:[{title:this.#e("name"),name:"name",searchable:!0,orderable:!1},{title:this.#e("number"),name:"number",searchable:!0,orderable:!1},{title:this.#e("whatsApp"),name:"whatsApp",searchable:!0,orderable:!1},{title:this.#e("created by"),name:"createdBy",searchable:!1,orderable:!1},{title:this.#e("Created At"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}}]}),this.initializePermissions(),this.filtersData.update(t=>u(d({},t),{[this.key()]:this.id()}))}#e(t){return this.translate.instant(t)}static \u0275fac=(()=>{let t;return function(e){return(t||(t=w(a)))(e||a)}})();static \u0275cmp=b({type:a,selectors:[["app-view-related-individual"]],inputs:{id:[1,"id"],endpoint:[1,"endpoint"],keyState:[1,"keyState"],resourse:[1,"resourse"],key:[1,"key"]},standalone:!0,features:[k,y],decls:1,vars:21,consts:[["paginatorPosition","both",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexPermission","updateBtnPermission","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows","withCustomFilters","withTableFilters"]],template:function(i,e){if(i&1&&(r(0,"app-table-wrapper",0),p("createBtnClicked",function(){return e.openCreateRecordDialog()})("updateBtnClicked",function(o){return e.openUpdateRecordDialog(o)})("deleteBtnClicked",function(o){return e.deleteRecord(o)})("onLoadData",function(o){return e.loadRecords(o)}),s()),i&2){let n,o;m("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("displayCreateButton",e.indexMeta.displayCreateButton)("columns",e.indexMeta.columns)("dataSource",e.records())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("rows",e.rows())("indexPermission",e.permissions().index)("updateBtnPermission",e.permissions().update)("withActionsColumn",e.indexMeta.withAction)("displayUpdateButton",e.indexMeta.displayUpdateButton)("displayDeleteButton",e.indexMeta.displayDeleteButton)("globalFilterValue",e.globalFilterValue)("reorderableColumns",(n=e.indexMeta.reorderableColumns)!==null&&n!==void 0?n:!1)("reorderableRows",(o=e.indexMeta.reorderableRows)!==null&&o!==void 0?o:!1)("withCustomFilters",!0)("withTableFilters",!1)}},dependencies:[R,V,v,E,g,C],encapsulation:2,changeDetection:0})};var de=class a extends D{id=l.required({transform:U});endpoint=l.required();keyState=l.required();resourse=l.required();key=l.required();ngOnInit(){this.indexMeta=u(d({},this.indexMeta),{resourse:this.resourse(),endpoints:{index:`salary/${this.endpoint()}`},indexTitle:"salaries",displayCreateButton:!1,withAction:!1,indexIcon:"pi pi-money-bill",createBtnLabel:"Create salary",indexTableKey:"SALARY_KEY",columns:[{title:this.#e("Sallary"),name:"cost",searchable:!1,orderable:!0},{title:this.#e("Employer Internal"),name:"user.firstName",searchable:!1,orderable:!1},{title:this.#e("created at"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}}]}),this.initializePermissions(),this.filtersData.update(t=>u(d({},t),{[this.key()]:this.id()}))}#e(t){return this.translate.instant(t)}static \u0275fac=(()=>{let t;return function(e){return(t||(t=w(a)))(e||a)}})();static \u0275cmp=b({type:a,selectors:[["app-view-related-sallary"]],inputs:{id:[1,"id"],endpoint:[1,"endpoint"],keyState:[1,"keyState"],resourse:[1,"resourse"],key:[1,"key"]},standalone:!0,features:[k,y],decls:1,vars:23,consts:[["paginatorPosition","both",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexPermission","updateBtnPermission","createBtnPermission","deleteBtnPermission","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows","withCustomFilters","withTableFilters"]],template:function(i,e){if(i&1&&(r(0,"app-table-wrapper",0),p("createBtnClicked",function(){return e.openCreateRecordDialog()})("updateBtnClicked",function(o){return e.openUpdateRecordDialog(o)})("deleteBtnClicked",function(o){return e.deleteRecord(o)})("onLoadData",function(o){return e.loadRecords(o)}),s()),i&2){let n,o;m("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("displayCreateButton",e.indexMeta.displayCreateButton)("columns",e.indexMeta.columns)("dataSource",e.records())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("rows",e.rows())("indexPermission",e.permissions().index)("updateBtnPermission",e.permissions().update)("createBtnPermission",e.permissions().create)("deleteBtnPermission",e.permissions().delete)("withActionsColumn",e.indexMeta.withAction)("displayUpdateButton",e.indexMeta.displayUpdateButton)("displayDeleteButton",e.indexMeta.displayDeleteButton)("globalFilterValue",e.globalFilterValue)("reorderableColumns",(n=e.indexMeta.reorderableColumns)!==null&&n!==void 0?n:!1)("reorderableRows",(o=e.indexMeta.reorderableRows)!==null&&o!==void 0?o:!1)("withCustomFilters",!0)("withTableFilters",!1)}},dependencies:[R,V,v,E,g,C],encapsulation:2,changeDetection:0})};var pe=class a extends D{id=l.required({transform:U});endpoint=l.required();keyState=l.required();resourse=l.required();key=l.required();ngOnInit(){this.indexMeta=u(d({},this.indexMeta),{endpoints:{index:`studentActivity/${this.endpoint()}`},displayCreateButton:!1,withAction:!1,resourse:this.resourse(),indexTitle:"Student Activity",indexIcon:"fa-solid fa-building",createBtnLabel:this.#e("Create Student Activity"),indexTableKey:`${this.keyState()}_STUDENT_KEY`,columns:[{title:this.#e("name"),name:"name",searchable:!0,orderable:!1},{title:this.#e("unviresty"),name:"unviresty",searchable:!0,orderable:!1},{title:this.#e("college"),name:"college",searchable:!0,orderable:!1},{title:this.#e("created by"),name:"createdBy",searchable:!1,orderable:!1},{title:this.#e("created at"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}}]}),this.initializePermissions(),this.filtersData.update(t=>u(d({},t),{[this.key()]:this.id()}))}#e(t){return this.translate.instant(t)}static \u0275fac=(()=>{let t;return function(e){return(t||(t=w(a)))(e||a)}})();static \u0275cmp=b({type:a,selectors:[["app-view-related-student-activity"]],inputs:{id:[1,"id"],endpoint:[1,"endpoint"],keyState:[1,"keyState"],resourse:[1,"resourse"],key:[1,"key"]},standalone:!0,features:[k,y],decls:1,vars:23,consts:[["paginatorPosition","both",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexPermission","updateBtnPermission","createBtnPermission","deleteBtnPermission","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows","withCustomFilters","withTableFilters"]],template:function(i,e){if(i&1&&(r(0,"app-table-wrapper",0),p("createBtnClicked",function(){return e.openCreateRecordDialog()})("updateBtnClicked",function(o){return e.openUpdateRecordDialog(o)})("deleteBtnClicked",function(o){return e.deleteRecord(o)})("onLoadData",function(o){return e.loadRecords(o)}),s()),i&2){let n,o;m("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("displayCreateButton",e.indexMeta.displayCreateButton)("columns",e.indexMeta.columns)("dataSource",e.records())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("rows",e.rows())("indexPermission",e.permissions().index)("updateBtnPermission",e.permissions().update)("createBtnPermission",e.permissions().create)("deleteBtnPermission",e.permissions().delete)("withActionsColumn",e.indexMeta.withAction)("displayUpdateButton",e.indexMeta.displayUpdateButton)("displayDeleteButton",e.indexMeta.displayDeleteButton)("globalFilterValue",e.globalFilterValue)("reorderableColumns",(n=e.indexMeta.reorderableColumns)!==null&&n!==void 0?n:!1)("reorderableRows",(o=e.indexMeta.reorderableRows)!==null&&o!==void 0?o:!1)("withCustomFilters",!0)("withTableFilters",!1)}},dependencies:[R,V,v,E,g,C],encapsulation:2,changeDetection:0})};var Ze=["user"];function et(a,t){if(a&1&&F(0),a&2){let i=t.$implicit;O(" ",i.user.firstName+" "+i.user.lastName," ")}}var me=class a extends D{user=j.required("user");id=l.required({transform:U});endpoint=l.required();keyState=l.required();resourse=l.required();key=l.required();ngOnInit(){this.dialogComponent=Xe,this.indexMeta=u(d({},this.indexMeta),{displayCreateButton:!1,withAction:!1,resourse:this.resourse(),endpoints:{index:`task/${this.endpoint()}`},indexTitle:"tasks",indexIcon:"pi pi-file",createBtnLabel:"Create task",provideFields:["note"],indexTableKey:`${this.keyState()}_TASK_KEY`,columns:[{title:this.#e("name"),name:"name",searchable:!1,orderable:!1},{title:this.#e("User"),name:"user.firstName",searchable:!1,orderable:!1,render:this.user()},{title:this.#e("created by"),name:"createdBy",searchable:!1,orderable:!1},{title:this.#e("created at"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}}]}),this.initializePermissions(),this.filtersData.update(t=>u(d({},t),{[this.key()]:this.id()}))}#e(t){return this.translate.instant(t)}static \u0275fac=(()=>{let t;return function(e){return(t||(t=w(a)))(e||a)}})();static \u0275cmp=b({type:a,selectors:[["app-view-related-task"]],viewQuery:function(i,e){i&1&&z(e.user,Ze,5),i&2&&Q()},inputs:{id:[1,"id"],endpoint:[1,"endpoint"],keyState:[1,"keyState"],resourse:[1,"resourse"],key:[1,"key"]},standalone:!0,features:[k,y],decls:3,vars:23,consts:[["user",""],["paginatorPosition","both",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexPermission","updateBtnPermission","createBtnPermission","deleteBtnPermission","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows","withCustomFilters","withTableFilters"]],template:function(i,e){if(i&1){let n=T();r(0,"app-table-wrapper",1),p("createBtnClicked",function(){return f(n),h(e.openCreateRecordDialog())})("updateBtnClicked",function(_){return f(n),h(e.openUpdateRecordDialog(_))})("deleteBtnClicked",function(_){return f(n),h(e.deleteRecord(_))})("onLoadData",function(_){return f(n),h(e.loadRecords(_))}),M(1,et,1,1,"ng-template",null,0,K),s()}if(i&2){let n,o;m("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("displayCreateButton",e.indexMeta.displayCreateButton)("columns",e.indexMeta.columns)("dataSource",e.records())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("rows",e.rows())("indexPermission",e.permissions().index)("updateBtnPermission",e.permissions().update)("createBtnPermission",e.permissions().create)("deleteBtnPermission",e.permissions().delete)("withActionsColumn",e.indexMeta.withAction)("displayUpdateButton",e.indexMeta.displayUpdateButton)("displayDeleteButton",e.indexMeta.displayDeleteButton)("globalFilterValue",e.globalFilterValue)("reorderableColumns",(n=e.indexMeta.reorderableColumns)!==null&&n!==void 0?n:!1)("reorderableRows",(o=e.indexMeta.reorderableRows)!==null&&o!==void 0?o:!1)("withCustomFilters",!0)("withTableFilters",!1)}},dependencies:[R,g,C],encapsulation:2,changeDetection:0})};function it(a,t){if(a&1){let i=T();r(0,"p-button",8),p("click",function(){let n=f(i).$index,o=c();return h(o.setActiveIndex(n))}),s()}if(a&2){let i,e=t.$implicit,n=t.$index,o=c();m("outlined",o.activeIndex()!==n)("label",(i=e)!==null&&i!==void 0?i:"")}}function nt(a,t){a&1&&we(0)}function ot(a,t){if(a&1&&M(0,nt,1,0,"ng-container",9),a&2){let i=c();m("ngComponentOutlet",i.tabs()[i.activeIndex()].component)("ngComponentOutletInputs",i.tabs()[i.activeIndex()].inputs)}}var ue=class a{#e=B(Ve);#t=B(Ue);data=this.#t.data;buttons=P(["membership","General Offers","Packages","Orders","shared","deskarea","rooms","deals","tasks","individual","studentActivity","Companies","salaries"]);resource=ce;tabs=P([{component:Ge,inputs:{id:this.data.id,endpoint:this.data.endpoint,keyState:this.data.keyState,resourse:this.resource.AssignesMembership,key:this.data.key}},{component:je,inputs:{id:this.data.id,endpoint:this.data.endpoint,keyState:this.data.keyState,resourse:this.resource.AssignGeneralOffer,key:this.data.key}},{component:ze,inputs:{id:this.data.id,endpoint:this.data.endpoint,keyState:this.data.keyState,resourse:this.resource.AssignesPackage,key:this.data.key}},{component:Qe,inputs:{id:this.data.id,endpoint:this.data.endpoint,keyState:this.data.keyState,resourse:this.resource.Order,key:this.data.key}},{component:Ye,inputs:{id:this.data.id,endpoint:`shared/${this.data.endpoint}`,keyState:this.data.keyState,resourse:this.resource.Shared,key:this.data.key,titleIndex:"shareds",iconIndex:"fa-solid fa-building",endpointChangeStatus:"shared/update",typeReservation:"shared",endpointStore:"shared/store",endpointUpdate:"shared/update",endpointListOffers:"global-offer-shared",provideFields:["note","start_hour","start_minute","start_time","end_hour","end_minute","end_time"]}},{component:We,inputs:{id:this.data.id,endpoint:`deskarea/${this.data.endpoint}`,keyState:this.data.keyState,resourse:this.resource.Deskarea,key:this.data.key,titleIndex:"deskarea",iconIndex:"fa-solid fa-building",endpointChangeStatus:"deskarea/update",typeReservation:"deskarea",endpointStore:"deskarea/store",endpointUpdate:"deskarea/update",endpointListOffers:"global-offer-deskarea",provideFields:["note","start_hour","start_minute","start_time","end_hour","end_minute","end_time"]}},{component:Je,inputs:{id:this.data.id,endpoint:this.data.endpoint,keyState:this.data.keyState,resourse:this.resource.ReservationRoom,key:this.data.key}},{component:He,inputs:{id:this.data.id,endpoint:this.data.endpoint,keyState:this.data.keyState,resourse:this.resource.Deals,key:this.data.key}},{component:me,inputs:{id:this.data.id,endpoint:this.data.endpoint,keyState:this.data.keyState,resourse:this.resource.Task,key:this.data.key}},{component:le,inputs:{id:this.data.id,endpoint:this.data.endpoint,keyState:this.data.keyState,resourse:this.resource.Task,key:this.data.key}},{component:pe,inputs:{id:this.data.id,endpoint:this.data.endpoint,keyState:this.data.keyState,resourse:this.resource.Task,key:this.data.key}},{component:se,inputs:{id:this.data.id,endpoint:this.data.endpoint,keyState:this.data.keyState,resourse:this.resource.Task,key:this.data.key}},{component:de,inputs:{id:this.data.id,endpoint:this.data.endpoint,keyState:this.data.keyState,resourse:this.resource.Task,key:this.data.key}}]);activeIndex=P(0);setActiveIndex(t){this.activeIndex.set(t)}closeDialog(t){this.#e.close(t)}static \u0275fac=function(i){return new(i||a)};static \u0275cmp=b({type:a,selectors:[["app-view-user"]],standalone:!0,features:[y],decls:12,vars:5,consts:[[1,"flex","align-items-center","justify-content-between","w-full","p-3","border-bottom-1","border-300","bg-white"],[1,"font-semibold","capitalize","text-lg","line-height-2","my-0"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"flex-shrink-0","p-button-text","p-button-plain","p-button-rounded","w-2rem","h-2rem",3,"click"],[1,"px-3","py-2"],[1,"scrollable-tabs"],[1,"flex","m-1","gap-2"],["rounded","true","styleClass","py-1 px-3 transition-none white-space-nowrap shadow-none capitalize","iconPos","right",3,"outlined","label"],[1,"mt-5"],["rounded","true","styleClass","py-1 px-3 transition-none white-space-nowrap shadow-none capitalize","iconPos","right",3,"click","outlined","label"],[4,"ngComponentOutlet","ngComponentOutletInputs"]],template:function(i,e){i&1&&(r(0,"div",0)(1,"h2",1),F(2),A(3,"translate"),s(),r(4,"button",2),p("click",function(){return e.closeDialog()}),s()(),r(5,"div",3)(6,"div",4)(7,"div",5),Ce(8,it,1,2,"p-button",6,ye),s()(),r(10,"div",7),M(11,ot,1,2,"ng-container"),s()()),i&2&&(S(2),ke(" ",N(3,3,"History Of ")," ",e.data.firstName+" "+e.data.lastName," "),S(6),ge(e.buttons()),S(3),L(e.tabs()[e.activeIndex()]?11:-1))},dependencies:[C,X,Ne,g,$,ee,v,Me],styles:[".scrollable-tabs[_ngcontent-%COMP%]{width:100%;padding-bottom:10px;overflow-x:auto;scrollbar-width:thin}.scrollable-tabs[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}"],changeDetection:0})};var at=["viewUser"],rt=["switch"];function st(a,t){if(a&1){let i=T();r(0,"button",9),p("click",function(){f(i);let n=c(2).$implicit,o=c();return h(o.openUpdateRecordDialog(n))}),s()}a&2&&m("icon","pi pi-pencil text-xs")}function lt(a,t){if(a&1&&M(0,st,1,1,"button",8),a&2){let i=c(2);m("appHasPermission",i.permissions().update)}}function dt(a,t){if(a&1){let i=T();r(0,"app-confirm",13),p("acceptAction",function(){f(i);let n=c(3).$implicit,o=c();return h(o.deleteRecord(n))}),s()}}function pt(a,t){if(a&1&&M(0,dt,1,0,"app-confirm",12),a&2){let i=c(3);m("appHasPermission",i.permissions()["update-permissions"])}}function mt(a,t){if(a&1){let i=T();r(0,"button",14),A(1,"translate"),p("click",function(){f(i);let n=c(2).$implicit,o=c();return h(o.openUpdateUserPermissionsDialog(n))}),s()}a&2&&m("pTooltip",N(1,1,"Update User Permissions"))}function ut(a,t){if(a&1&&M(0,pt,1,1,"app-confirm",10)(1,mt,2,3,"button",11),a&2){let i=c(2);L(i.indexMeta.displayDeleteButton?0:-1),S(),m("appHasPermission",i.permissions().delete)}}function ct(a,t){if(a&1){let i=T();r(0,"button",15),p("click",function(){f(i);let n=c().$implicit,o=c();return h(o.showMessage(n.orders[0].order_price))}),s()}}function ft(a,t){if(a&1){let i=T();M(0,lt,1,1,"button",4)(1,ut,2,2,"button",5)(2,ct,1,0,"button",6),r(3,"button",7),p("click",function(){let n=f(i).$implicit,o=c();return h(o.navigateToPOS(n))}),s()}if(a&2){let i,e=t.$implicit,n=c();L(n.indexMeta.displayUpdateButton?0:-1),S(),L(((i=n.currentUser())==null?null:i.id)!==e.id?1:-1),S(),L(e.orders!=null&&e.orders.length?2:-1)}}function ht(a,t){if(a&1){let i=T();r(0,"p-button",16),p("onClick",function(){let n=f(i).$implicit,o=c();return h(o.viewDialog(n))}),s()}if(a&2){let i=t.$implicit;m("label",i.firstName+" "+i.lastName)("link",!0)}}function _t(a,t){if(a&1){let i=T();r(0,"p-inputSwitch",18),p("onChange",function(n){f(i);let o=c().$implicit,_=c();return h(_.changeStatus(o,n))}),Se("ngModelChange",function(n){f(i);let o=c().$implicit;return Te(o.status,n)||(o.status=n),h(n)}),s()}if(a&2){let i,e=c().$implicit,n=c();m("disabled",((i=n.currentUser())==null?null:i.id)===e.id),Be("ngModel",e.status)}}function bt(a,t){a&1&&F(0," Can't Inactive Technical Support ")}function yt(a,t){if(a&1&&M(0,_t,1,2,"p-inputSwitch",17)(1,bt,1,0),a&2){let i=t.$implicit;L((i==null?null:i.role)!=="technical-support"?0:1)}}var he=class a extends D{posService=B(Ke);router=B(ve);viewUser=j.required("viewUser");switch=j.required("switch");currentLang=B(Oe).currentLanguage;confirmationService=B(xe);showMessage(t){this.confirmationService.confirm({message:`There Is Order From Kitchen You Must Pay It , Total Price is : ${t} EG`,header:this.translate.instant("message"),icon:"pi pi-envelope",acceptVisible:!1,rejectVisible:!1,rejectButtonStyleClass:"p-button-text"})}navigateToPOS(t){this.posService.setCustomerId.set(t?.id),this.posService.setCustomerType.set("employed"),this.router.navigate(["/pos"],{queryParams:{userData:JSON.stringify({id:t?.id,type:"employed"})}})}ngOnInit(){this.clearCachingLists.set(["user/index"]),this.dialogComponent=oe,this.viewDialogComponent=ue,this.indexMeta=u(d({},this.indexMeta),{provideFields:["role","permission","lastName"],displayDeleteButton:this.currentUser()?.role==="technical-support",displayUpdateButton:this.currentUser()?.role==="technical-support",endpoints:{index:"user/index",delete:"user/delete"},indexTitle:"Users",resourse:"settings-user",indexIcon:"fa-solid fa-building",createBtnLabel:"Create Users",indexTableKey:"USERS_KEY",columns:[{title:this.#e("Full Name"),name:"firstName",searchable:!0,orderable:!1,render:this.viewUser()},{title:this.#e("email"),name:"email",searchable:!0,orderable:!1},{title:this.#e("username"),name:"username",searchable:!0,orderable:!1},{title:this.#e("number"),name:"phone",searchable:!0,orderable:!1},{title:this.#e("status"),name:"status",searchable:!1,orderable:!1,render:this.switch()},{title:this.#e("created at"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}}]}),this.initializePermissions(),this.permissions.update(t=>u(d({},t),{"update-permissions":this.userPermission.hasPermission(this.indexMeta.resourse,"update-permissions")}))}openUpdateUserPermissionsDialog(t){let i=u(d({},this.dialogConfig),{width:"500px",data:t});this.dialogRef=this.dialogService.open(re,i),this.dialogRef.onClose.pipe(Z(this.destroyRef)).subscribe(e=>{e&&(this.records.update(n=>n.map(o=>o.id===e.id?d(d({},o),e):o)),this.clearCachingLists.update(n=>[...n,`permission-list-${e.id}`]),this.cacheFilters.deleteAnotherCacheEndPoint(this.clearCachingLists()))})}changeStatus(t,i){this.api.request("post","user/update",{status:i.checked,id:t.id}).subscribe(()=>{this.cacheFilters.deleteAnotherCacheEndPoint(this.clearCachingLists())})}viewDialog(t){super.viewDialog(t,{endpoint:"user",keyState:"USER",key:"user_id"})}#e(t){return this.translate.instant(t)}static \u0275fac=(()=>{let t;return function(e){return(t||(t=w(a)))(e||a)}})();static \u0275cmp=b({type:a,selectors:[["app-users"]],viewQuery:function(i,e){i&1&&(z(e.viewUser,at,5),z(e.switch,rt,5)),i&2&&Q(2)},standalone:!0,features:[k,y],decls:7,vars:22,consts:[["actionsTemplate",""],["viewUser",""],["switch",""],["paginatorPosition","both",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexPermission","updateBtnPermission","createBtnPermission","deleteBtnPermission","placeholderSearch","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows"],["pButton","","pRipple","",1,"p-button-rounded","p-button-text","p-button-sm",3,"icon"],["pButton","","icon","fas fa-user-shield text-sm","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",3,"pTooltip"],["pButton","","pRipple","","icon","pi pi-exclamation-circle text-xs","tooltipPosition","top","pTooltip","Note order from kitchen",1,"p-button-rounded","p-button-text","p-button-sm"],["pButton","","pRipple","","icon","fa-solid fa-kitchen-set text-sm","tooltipPosition","top","pTooltip","Kitchen",1,"p-button-rounded","p-button-text","p-button-sm",3,"click"],["pButton","","pRipple","","class","p-button-rounded p-button-text p-button-sm",3,"icon","click",4,"appHasPermission"],["pButton","","pRipple","",1,"p-button-rounded","p-button-text","p-button-sm",3,"click","icon"],["icon","fas fa-trash text-xs","buttonClass","p-button-sm p-button-rounded p-button-text p-button-danger"],["pButton","","icon","fas fa-user-shield text-sm","class","p-button-rounded p-button-text p-button-sm","tooltipPosition","top",3,"pTooltip","click",4,"appHasPermission"],["icon","fas fa-trash text-xs","buttonClass","p-button-sm p-button-rounded p-button-text p-button-danger",3,"acceptAction",4,"appHasPermission"],["icon","fas fa-trash text-xs","buttonClass","p-button-sm p-button-rounded p-button-text p-button-danger",3,"acceptAction"],["pButton","","icon","fas fa-user-shield text-sm","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",3,"click","pTooltip"],["pButton","","pRipple","","icon","pi pi-exclamation-circle text-xs","tooltipPosition","top","pTooltip","Note order from kitchen",1,"p-button-rounded","p-button-text","p-button-sm",3,"click"],[3,"onClick","label","link"],["trueValue","active","falseValue","inactive",3,"disabled","ngModel"],["trueValue","active","falseValue","inactive",3,"onChange","ngModelChange","disabled","ngModel"]],template:function(i,e){if(i&1){let n=T();r(0,"app-table-wrapper",3),p("createBtnClicked",function(){return f(n),h(e.openCreateRecordDialog())})("updateBtnClicked",function(_){return f(n),h(e.openUpdateRecordDialog(_))})("deleteBtnClicked",function(_){return f(n),h(e.deleteRecord(_))})("onLoadData",function(_){return f(n),h(e.loadRecords(_))}),M(1,ft,4,3,"ng-template",null,0,K)(3,ht,1,2,"ng-template",null,1,K)(5,yt,2,1,"ng-template",null,2,K),s()}if(i&2){let n,o;m("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("displayCreateButton",e.indexMeta.displayCreateButton)("columns",e.indexMeta.columns)("dataSource",e.records())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("rows",e.rows())("indexPermission",e.permissions().index)("updateBtnPermission",e.permissions().update)("createBtnPermission",e.permissions().create)("deleteBtnPermission",e.permissions().delete)("placeholderSearch",e.indexMeta.placeholderSearch)("withActionsColumn",e.indexMeta.withAction)("displayUpdateButton",e.indexMeta.displayUpdateButton)("displayDeleteButton",e.indexMeta.displayDeleteButton)("globalFilterValue",e.globalFilterValue)("reorderableColumns",(n=e.indexMeta.reorderableColumns)!==null&&n!==void 0?n:!1)("reorderableRows",(o=e.indexMeta.reorderableRows)!==null&&o!==void 0?o:!1)}},dependencies:[R,V,De,Re,v,Fe,Ae,Le,g,$,ee,Ee,Ie,C,X],encapsulation:2,changeDetection:0})};export{he as default};
