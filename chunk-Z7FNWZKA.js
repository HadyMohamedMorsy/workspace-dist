import{ba as L,ga as T,ha as V}from"./chunk-RDWS3ZUY.js";import{A as I,C as x}from"./chunk-VGJJ4SUB.js";import{d as D}from"./chunk-DBWXYH2V.js";import{q}from"./chunk-Y2JJNTGM.js";import{Bb as C,Kb as d,L as s,Lb as m,Nb as F,Ob as P,Tb as g,W as a,db as _,dc as v,ea as f,fc as k,ia as y,mc as B,qb as w,xc as M,ya as b,yc as S}from"./chunk-I6HS2BDL.js";import{a as p,b as u}from"./chunk-5KTCK5IS.js";var n=class{id;purshase_price;purshase_qty;type_store;weight_kg;weight_g;weight_product;total;product_id;constructor(e){this.id=e?.id||null,this.purshase_price=e?.purshase_price??0,this.type_store=e?.type_store||"item",this.purshase_qty=e?.purshase_qty??0,this.weight_kg=e?.weight_kg??0,this.weight_g=e?.weight_g??0,this.weight_product=e?.weight_product??0,this.total=e?.total??0,this.product_id=e?.product_id||null}};var N=class l extends V{#e=f(L);ngOnInit(){this.clearCachingLists.set(["product/index","category/show","category/list-categories"]),this.dialogMeta=u(p({},this.dialogMeta),{endpoints:{store:"purchases/store",update:"purchases/update"}}),this.editData&&this.editData.method!=="create"?(this.dialogMeta=u(p({},this.dialogMeta),{dialogTitle:this.translate.instant("Update Purchases"),submitButtonLabel:this.translate.instant("Update Purchases")}),this.model=new n(this.editData)):(this.dialogMeta=u(p({},this.dialogMeta),{dialogTitle:this.translate.instant("Create Purchases"),submitButtonLabel:this.translate.instant("Create Purchases")}),this.model=new n(this.editData)),this.fields=this.configureFields()}configureFields(){return[{fieldGroup:[{type:"separator-field",props:{title:this.translate.instant("Calculate  Qty"),icon:"pi pi-calculator"},expressions:{hide:e=>e.model.type_store!=="weight"}},this.#e.fieldBuilder([{key:"weight_kg",type:"floated-input-field",props:{type:"number",label:"weight Product Kg",required:!0,min:0,placeholder:"weight Product Kg"},expressions:{hide:e=>e.model.type_store!=="weight"},hooks:{onInit:e=>e.formControl?.valueChanges.pipe(s(),a(o=>{let t=e.form?.get("weight_g"),i=e.form?.get("weight_product"),r=e.form?.get("purshase_qty"),h=e.form?.get("total"),c=e.form?.get("purshase_price");t?.setValue(o*1e3),r?.setValue(t?.value/i?.value),h?.setValue(c?.value*r?.value?r?.value:0)}))}},{key:"weight_g",type:"floated-input-field",props:{type:"number",label:"weight Product g",required:!0,min:0,placeholder:"weight Product g",disabled:!0},expressions:{hide:e=>e.model.type_store!=="weight"}},{key:"weight_product",type:"floated-input-field",props:{type:"number",label:"weight Cup (g)",required:!0,min:0,placeholder:"weight Cup (g)"},expressions:{hide:e=>e.model.type_store!=="weight"},hooks:{onInit:e=>e.formControl?.valueChanges.pipe(s(),a(o=>{let t=e.form?.get("weight_g"),i=e.form?.get("weight_product"),r=e.form?.get("purshase_qty"),h=e.form?.get("total"),c=e.form?.get("purshase_price");r?.setValue(t?.value/i?.value),h?.setValue(c?.value*r?.value)}))}}]),{template:'<div class="border-1 border-200 -mt-3"></div>',className:"col-12",expressions:{hide:e=>e.model.type_store!=="weight"}}]},this.#e.fieldBuilder([{key:"purshase_price",type:"floated-input-field",className:"col-12 md:col-4",props:{label:"Purchase Price By One Item",required:!0,placeholder:"purchase price"},expressions:{hide:e=>e.model.type_store==="weight"},hooks:{onInit:e=>e.formControl?.valueChanges.pipe(s(),a(o=>{let t=e.form?.get("total"),i=e.form?.get("purshase_qty");t?.setValue(+o*i?.value)}))}},{key:"purshase_qty",type:"floated-input-field",className:"col-12 md:col-4",expressions:{"props.disabled":e=>e.model.type_store!=="item"},props:{type:"number",label:"Qty",required:!0,min:0,placeholder:"Qty"},hooks:{onInit:e=>e.formControl?.valueChanges.pipe(s(),a(o=>{let t=e.form?.get("total"),i=e.form?.get("purshase_price");t?.setValue(+o*i?.value)}))}},{key:"total",type:"floated-input-field",className:"col-12 md:col-4",expressions:{"props.disabled":e=>e.model.type_store==="item"},props:{type:"number",label:"total Purshase",required:!0,placeholder:"total Purshase",disabled:!0}}])]}static \u0275fac=(()=>{let e;return function(t){return(e||(e=b(l)))(t||l)}})();static \u0275cmp=y({type:l,selectors:[["app-purchases-dialog"]],standalone:!0,features:[w,B],decls:7,vars:11,consts:[[3,"onSubmit","form","model","fields","options","showSubmitButton","buttonLabel","isFiledsLoaded","submitBtnLoading"],["ngProjectAs","[header]",5,["","header",""]],[1,"flex","align-items-center","justify-content-between","w-full","p-3","border-bottom-1","border-300","bg-white"],[1,"font-semibold","capitalize","text-lg","line-height-2","my-0"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"flex-shrink-0","p-button-text","p-button-plain","p-button-rounded","w-2rem","h-2rem",3,"click"]],template:function(o,t){o&1&&(d(0,"app-form",0),M(1,"async"),g("onSubmit",function(){return t.createUpdateRecord(t.dialogMeta.endpoints)}),F(2,1),d(3,"div",2)(4,"h2",3),v(5),m(),d(6,"button",4),g("click",function(){return t.closeDialog()}),m()(),P(),m()),o&2&&(C("form",t.createUpdateForm)("model",t.model)("fields",t.fields)("options",t.options)("showSubmitButton",t.dialogMeta.showSubmitButton)("buttonLabel",t.dialogMeta.submitButtonLabel)("isFiledsLoaded",S(1,9,t.dialogMeta.dialogData$))("submitBtnLoading",t.isLoading()),_(5),k(" ",t.dialogMeta.dialogTitle," "))},dependencies:[q,D,x,I,T],encapsulation:2,changeDetection:0})};export{N as a};
