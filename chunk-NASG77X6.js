import{a as $}from"./chunk-Z7FNWZKA.js";import{D as j,Ea as Z,ba as Q,n as G,o as K,qa as X,r as W,u as O,w as q,y as z}from"./chunk-RDWS3ZUY.js";import{C as J}from"./chunk-VGJJ4SUB.js";import"./chunk-NU2CE2PW.js";import{c as H,d as _}from"./chunk-DBWXYH2V.js";import"./chunk-R2AUDRXA.js";import"./chunk-JXG4LUU7.js";import"./chunk-Y2JJNTGM.js";import{Bb as u,C as y,Cc as E,Ia as M,Kb as p,Lb as d,Mb as V,Qb as b,Tb as S,Tc as A,Ub as F,W as D,db as h,dc as I,ea as P,fc as v,ia as f,ic as x,jc as U,kc as L,mc as C,pb as T,qb as k,ua as n,va as l,wb as R,xc as N,ya as w,yc as Y}from"./chunk-I6HS2BDL.js";import{a as s,b as c}from"./chunk-5KTCK5IS.js";var g=class o{#e=P(Q);filtersData=T();model={};form=new K({});options={};fields=[this.#e.fieldBuilder([{key:"customFilters.start_date",type:"date-field",className:"col-12 md:col-3",props:{format:"YYYY-MM-DD",label:"start date"},hooks:{onInit:r=>r.formControl?.valueChanges.pipe(y(t=>!!t),D(()=>{this.filtersData.update(t=>s(s({},t),this.model))}))}},{key:"customFilters.end_date",type:"date-field",className:"col-12 md:col-3",props:{format:"YYYY-MM-DD",label:"end date"},hooks:{onInit:r=>r.formControl?.valueChanges.pipe(y(t=>!!t),D(()=>{this.filtersData.update(t=>s(s({},t),this.model))}))}}])];static \u0275fac=function(t){return new(t||o)};static \u0275cmp=f({type:o,selectors:[["app-filter-purshase"]],inputs:{filtersData:[1,"filtersData"]},outputs:{filtersData:"filtersDataChange"},standalone:!0,features:[C],decls:5,vars:8,consts:[[1,"text-base","capitalize","font-medium","mb-3"],[3,"formGroup"],[3,"model","fields","form","options"]],template:function(t,e){t&1&&(p(0,"h1",0),I(1),N(2,"translate"),d(),p(3,"form",1),V(4,"formly-form",2),d()),t&2&&(h(),v(" ",Y(2,6,"Filters purshase")," : "),h(2),u("formGroup",e.form),h(),u("model",e.model)("fields",e.fields)("form",e.form)("options",e.options))},dependencies:[j,z,q,W,G,O,_,H],encapsulation:2,changeDetection:0})};function re(o,r){if(o&1){let t=b();p(0,"app-filter-purshase",2),L("filtersDataChange",function(a){n(t);let i=F();return U(i.filtersData,a)||(i.filtersData=a),l(a)}),d()}if(o&2){let t=F();x("filtersData",t.filtersData)}}var B=class o extends X{id=M.required({transform:A});ngOnInit(){this.clearCachingLists.set(["product/index","category/show","category/list-categories"]),this.dialogComponent=$,this.indexMeta=c(s({},this.indexMeta),{displayCreateButton:!1,displayUpdateButton:!1,displayDeleteButton:this.checkCreateUpdateRole(),endpoints:{index:"purchases/index",delete:"purchases/delete"},resourse:"kitchen-purchases",indexTitle:"Purchasess",indexIcon:"fa-solid fa-building",createBtnLabel:"Create Purchases",indexTableKey:"PURCHASES_KEY",columns:[{name:"id",title:this.#e("#ID"),searchable:!1,orderable:!1},{name:"purshase_price",title:this.#e("Price"),searchable:!1,orderable:!0},{name:"purshase_qty",title:this.#e("Qty"),searchable:!1,orderable:!0},{name:"total",title:this.#e("total"),searchable:!1,orderable:!0},{title:this.#e("Created At"),name:"created_at",searchable:!1,orderable:!0,transform:{type:"date",filter:"M/d/yyyy h:mm:ss"}}]}),this.initializePermissions(),this.filtersData.update(t=>c(s({},t),{product_id:this.id()}));let r={product_id:this.id(),method:"create"};this.dialogConfig=c(s({},this.dialogConfig),{data:r})}#e(r){return this.translate.instant(r)}checkCreateUpdateRole(){return this.currentUser()?.role==="technical-support"||this.currentUser()?.role==="founder"||this.currentUser()?.role==="general-manager"}static \u0275fac=(()=>{let r;return function(e){return(r||(r=w(o)))(e||o)}})();static \u0275cmp=f({type:o,selectors:[["app-purchases"]],inputs:{id:[1,"id"]},standalone:!0,features:[k,C],decls:3,vars:22,consts:[["customFiltersTemplate",""],["paginatorPosition","both",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","onLoadData","headerTitle","titleIcon","headerBtnLabel","displayCreateButton","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","rows","indexPermission","updateBtnPermission","createBtnPermission","deleteBtnPermission","withActionsColumn","displayUpdateButton","displayDeleteButton","globalFilterValue","reorderableColumns","reorderableRows","withCustomFilters"],[3,"filtersDataChange","filtersData"]],template:function(t,e){if(t&1){let a=b();p(0,"app-table-wrapper",1),S("createBtnClicked",function(){return n(a),l(e.openCreateRecordDialog())})("updateBtnClicked",function(m){return n(a),l(e.openUpdateRecordDialog(m))})("deleteBtnClicked",function(m){return n(a),l(e.deleteRecord(m))})("onLoadData",function(m){return n(a),l(e.loadRecords(m))}),R(1,re,1,1,"ng-template",null,0,E),d()}if(t&2){let a,i;u("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("displayCreateButton",e.indexMeta.displayCreateButton)("columns",e.indexMeta.columns)("dataSource",e.records())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("rows",e.rows())("indexPermission",e.permissions().index)("updateBtnPermission",e.permissions().update)("createBtnPermission",e.permissions().create)("deleteBtnPermission",e.permissions().delete)("withActionsColumn",e.indexMeta.withAction)("displayUpdateButton",e.indexMeta.displayUpdateButton)("displayDeleteButton",e.indexMeta.displayDeleteButton)("globalFilterValue",e.globalFilterValue)("reorderableColumns",(a=e.indexMeta.reorderableColumns)!==null&&a!==void 0?a:!1)("reorderableRows",(i=e.indexMeta.reorderableRows)!==null&&i!==void 0?i:!1)("withCustomFilters",!0)}},dependencies:[Z,J,g,_],encapsulation:2,changeDetection:0})};export{B as default};
